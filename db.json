{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/butterfly/source/css/index.styl","path":"css/index.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/css/var.styl","path":"css/var.styl","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/404.jpg","path":"img/404.jpg","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":1},{"_id":"themes/butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":0,"renderable":1},{"_id":"themes/butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"acad91ace80b80295b11a9b7ad4c29a2dcfdd8fb","modified":1649001099065},{"_id":"source/_posts/我的第一篇博客.md","hash":"476e8d3452f5f346f9ed41039f2ae6278398ecb4","modified":1649200453406},{"_id":"themes/butterfly/LICENSE","hash":"c8bc7df08db9dd3b39c2c2259a163a36cf2f6808","modified":1649030595169},{"_id":"themes/butterfly/README_CN.md","hash":"84fa5880f5358abe919eb295aad3cfd17b69b631","modified":1649030595170},{"_id":"themes/butterfly/package.json","hash":"ff4e6e90badea36f89e79a3c7a25e67dcdf36e32","modified":1649030595232},{"_id":"themes/butterfly/_config.yml","hash":"7b3db0f251ea89eebfaca1295f67fcfda2a7cd42","modified":1649030595171},{"_id":"themes/butterfly/languages/en.yml","hash":"69ed4d7aa63a26afd539321784d27494fbebffe8","modified":1649030595172},{"_id":"themes/butterfly/languages/default.yml","hash":"54a412ace93549f02f8e44fcf3e1cacb161a64db","modified":1649030595172},{"_id":"themes/butterfly/layout/category.pug","hash":"bf979aec88d78b644fc5d31518f8679ad7625792","modified":1649030595174},{"_id":"themes/butterfly/layout/archive.pug","hash":"2d5bf4b1755f89898c579c18d601be83d2bc8ebd","modified":1649030595173},{"_id":"themes/butterfly/layout/index.pug","hash":"648dcbdb3d145a710de81c909e000e8664d2ac9c","modified":1649030595230},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"813eb75fbf274b26e2a0c0c75f359f810ad5eeff","modified":1649030595172},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"c9675ad7721dd20c9f7731438181a891b43553e6","modified":1649030595173},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/bug_report.md","hash":"0b7979a908ebe8c350d73b6731f0be3e29d401c2","modified":1649030595167},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/feature_request.md","hash":"205a69ba038cf76affcdc1f39d88a8cb8079fc12","modified":1649030595168},{"_id":"themes/butterfly/layout/page.pug","hash":"bf2d6c6d2d156777b55292e51be02b0b3acf0af8","modified":1649030595230},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/custom.md","hash":"b41123ce5f0ccfa9e06a68b9f3cb59ba040a049a","modified":1649030595168},{"_id":"themes/butterfly/layout/tag.pug","hash":"4bb5efc6dabdf1626685bf6771aaa1467155ae86","modified":1649030595231},{"_id":"themes/butterfly/.github/workflows/publish.yml","hash":"e320b40c051bae1549156cd5ea4a51383cf78598","modified":1649030595169},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"aace9ddff469de4226e47a52ede1c81e66d66d5c","modified":1649030595174},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"8459729db2978bebd7f3668f6dc00a5bb100e633","modified":1649030595175},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"8715948b93e7508b84d913be1969b28c6b067b9b","modified":1649030595175},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"687461a9422d1eb4d4b5a619854c79e5acc30fd7","modified":1649030595175},{"_id":"themes/butterfly/layout/post.pug","hash":"fdbb508b5e6dec30fb8753c5a7fdd494410c4fc0","modified":1649030595230},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"5fd6c9659262dc8f61d87866d0417fd534292c88","modified":1649030595237},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"6c3b7d0874fa499800a4fd49894c481b05ec750c","modified":1649030595237},{"_id":"themes/butterfly/scripts/events/404.js","hash":"f1d1c378356b776e9b2a8411e6dca88dc8c3245c","modified":1649030595234},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"f2e1d8a05d2e409c4804f67a98f5f59f527d6627","modified":1649030595186},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"bb1847f45e713cc88b1c0a97035ec01f0209c995","modified":1649030595191},{"_id":"themes/butterfly/scripts/events/config.js","hash":"e959cd313fc20c62fe23f0a7cba3d350d6131d66","modified":1649030595235},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"2cf68619af17ece9acea71aa2cb06737097890a5","modified":1649030595192},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"205562ec188bfba5686c51af77486550d0927df5","modified":1649030595192},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"4f712b4ea383b59a3122683db1d54c04a79ccc5d","modified":1649030595238},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"376e1884ea764404c38b1e73b16de0358ece519e","modified":1649030595238},{"_id":"themes/butterfly/scripts/events/init.js","hash":"b321a97420082101a4d41e6e571db1a166475e06","modified":1649030595235},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"218add7e9b39b6fb6e69921abb9e44891a6cc3ce","modified":1649030595236},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"b92cc4648cfe5fb28c58943727823d1178b73a4a","modified":1649030595236},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"44cca49ddc76921bb455465ef912cab46c993cef","modified":1649030595240},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"22a2c69b3e68b0e3f80decfd4a2b9c9cc213ff5c","modified":1649030595238},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"384de3c04809ec5fa996e8aa0628f770cd4bff3e","modified":1649030595239},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"26dd1900e68a3e10a5cf3f3484a93139a0f1340e","modified":1649030595239},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"6d4cd2393945a9316339351cab588265f5c18d73","modified":1649030595241},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"7641adb0d520c5ff29dd36fc1fb8617c52ecc9fb","modified":1649030595241},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"3ba7677969ff01fab06fc6713455ddc6861f0024","modified":1649030595240},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"e01a3967e5884881bab858b11635457df412de80","modified":1649030595241},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"551f1b8edc973bd8afc5cce2eae546f002fa84c3","modified":1649030595242},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"fd683ccc090db3122d77c7ee73e8d35dc8735ee3","modified":1649030595242},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"08ea00791bd4738952234cb5d8360e119df6f875","modified":1649030595243},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"4c7056d3cd56f10bd209d2ba4d3cc2027aad1440","modified":1649030595244},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"420ba8b11e7316b4c09eb301d39814bc9bae9f90","modified":1649030595243},{"_id":"themes/butterfly/source/css/index.styl","hash":"c7924868adcb046b46498626a9223c7a7b3f2e30","modified":1649030595272},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1649030595274},{"_id":"themes/butterfly/.github/stale.yml","hash":"7a131b8aa4936fbcedea3517299e1cdc1bcbcaab","modified":1649030595168},{"_id":"themes/butterfly/source/css/var.styl","hash":"584ef7b18d5e677eb2e62f9b139097d3b714a993","modified":1649030595273},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1649030595273},{"_id":"themes/butterfly/source/js/main.js","hash":"a2c1c55b5b8ec9a83cf6242ebc9ea9be95e1f0c1","modified":1649030595275},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"07380718ed3af19a7e64b30e8c13726fe5983947","modified":1649030595176},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1649030595275},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"4db1170be7a9360e2c5399d281b979da730df2a3","modified":1649030595277},{"_id":"themes/butterfly/source/js/utils.js","hash":"fdb9e5b38f076953a2431b8f682388b030694b55","modified":1649030595278},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"bd5dd5452e28a4fe94c3241a758ec6f4fdb7a149","modified":1649030595178},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"b8e3e07b0e8f3cf25af9550c6361725a05045b92","modified":1649030595176},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"f29123e603cbbcc6ce277d4e8f600ba67498077c","modified":1649030595178},{"_id":"themes/butterfly/layout/includes/head/noscript.pug","hash":"72efaa09ff60843567458bd54152e06f0cb2757e","modified":1649030595179},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"c1e45d4d0bd905ddcd2282de4fe89be92e67847d","modified":1649030595176},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"6dc2c9b85df9ab4f5b554305339fd80a90a6cf43","modified":1649030595180},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"5168caadc4cf541f5d6676a9c5e8ae47a948f9ad","modified":1649030595180},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"fc3e67e5ae4774d9e89964ba96beed28f34ee8f0","modified":1649030595179},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"a9e56b1c41bf327859b0a7bcb8e72b458bd851b2","modified":1649030595185},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"ca8bcd90ad9467819330bfe7c02b76322754bccf","modified":1649030595184},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"3b0b2053fe9f08cbc21b3baa53163adc2f76c19a","modified":1649030595185},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"631ec7000fd4d6cfa2de118ee02ad8a42ffb34f5","modified":1649030595186},{"_id":"themes/butterfly/layout/includes/loading/loading-js.pug","hash":"2e1ab0c2ca59a1ff5a5ba9b6ef60f3e34af5430c","modified":1649030595187},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1649030595189},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"3a2797d2744607ba6cdb5a02853851957c0f7e29","modified":1649030595182},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"971038debf539333b1687b4a1d87cf4fc965a846","modified":1649030595188},{"_id":"themes/butterfly/layout/includes/loading/loading.pug","hash":"dd8e6813976be64e80eba6562b54e74527ab306d","modified":1649030595188},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"e9459f122af7b733398578f9f0f8ab3c5e12a217","modified":1649030595190},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"9c8e65939d048a579ea08d063c0f98550376f536","modified":1649030595189},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"e2eba0fcb8332cb333b2aff9c76664e40e2e1974","modified":1649030595190},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"a8312b527493dabbadbb1280760168d3bc909a3b","modified":1649030595224},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"594626a18b7efbf771232855dfbce143fb244bc6","modified":1649030595192},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"6ec54b77e3a90e148e66e317e5bb6c89624fddca","modified":1649030595191},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"8f43fdeaf8cff4a35bab74b48c963786ca015620","modified":1649030595190},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"21e019bdc3b1e796bb00976bb29af2d51f873624","modified":1649030595224},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"66e383b4ef374951eb87dd1bf4cdb7a667193fb5","modified":1649030595227},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"c02b1779bd0ebca6749f195be096b6ca574bfa29","modified":1649030595227},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"73d33b6930e7944187a4b3403daf25d27077a2dd","modified":1649030595224},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"1dba77d250eeebfb6e293d504352c7e9ea31980b","modified":1649030595226},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"9755cac8424dc578e9ec07dbcaa429fddbedd392","modified":1649030595228},{"_id":"themes/butterfly/README.md","hash":"2555c3e418157a0fda35d3deaf029f12e5a12f12","modified":1649030595170},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"bee06b3f01fa1f0d8fa08c154234b452da425101","modified":1649030595193},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"471b20e71a19db1f5115727082e5188200c49383","modified":1649030595228},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"62adef7998fb9bebc5891a49472cfea944a1bf7a","modified":1649030595229},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"59d979702fa21d960443824198614d63aaf69662","modified":1649030595228},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"935dde9cf4c1fef0214dbb9935ecb71805735be0","modified":1649030595225},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"d06dafe7faf3a2e328ef62f26166a51ffe7a5579","modified":1649030595213},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"7b5ae404a1205546b7de4be42291315cf918f2b3","modified":1649030595229},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"4c3da5a89b4e6fd3ab527f5c6d27790359d57f71","modified":1649030595207},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"61a220bf134201bdf49430b578305191421c547c","modified":1649030595213},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"2448b243ded58aa1d5fc22fd115e6d06b636f9fd","modified":1649030595214},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"5e0e9e9b2cd3c256d52423e2278e790aa387a53a","modified":1649030595229},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"311d883dede2a6838bf24ba9e4b3f69e62d5b3f1","modified":1649030595223},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"b9d7d23dc8810542b8c8ffcbfbd3694318debcc6","modified":1649030595245},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"a2aa5caf338ff5323b6ff0601ebcc09e710d8398","modified":1649030595246},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"d35d156b06f4da25a048872f1cfc35ad49092515","modified":1649030595245},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"f27ad7b5d781c98bcac5c12c2d70b69b830e0374","modified":1649030595255},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"0abe05309a186682772a94e5e759b63f8028e61a","modified":1649030595255},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"b62d41e079e45146f0019694156049c5f1be040a","modified":1649030595255},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"e931ef81754a7b9d999fa23d134c620e68e75491","modified":1649030595257},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"3c178608406c31d768af355ef1d7326da37cc75f","modified":1649030595253},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"844858ae87c7278996ce484c6b456db354c48764","modified":1649030595258},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"bd099f7d3adef4b7edd24c0a25a07415b156e587","modified":1649030595259},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"f3aac52defb3497079a313e8c63ac2f7ee24dfbe","modified":1649030595257},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"35c7fa4e18cefe01b62e0caedccbdc0c26b3546c","modified":1649030595259},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"6dcf19c0933c8828a439f801b0f4b256447dec07","modified":1649030595259},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"0bcd07ffbd2a86a1b24eaefabd7e278034b14ee2","modified":1649030595261},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"b5ba2c3339ad406ce611d12d3f8cc84f864fbc03","modified":1649030595260},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"1c1c585ba99cb4004956b5e98fc044260b456f99","modified":1649030595260},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"a7223a8fcc4fa7b81e552c9a2554be7df9de312e","modified":1649030595262},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"4258fa2e590aeea704660008aed7f0362fac72d4","modified":1649030595260},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"1fed25162d7204480e9bcf476b3246e1717107ca","modified":1649030595262},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"988a947f80c218d8c2279c9975f46d0c2a3d0b6e","modified":1649030595261},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"68bc8cbea25dbb3cdc170f09f9b43ce130547717","modified":1649030595263},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"ecc2b2e28c179eb9406fc2c6f00e141078249cdd","modified":1649030595264},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"d72218cb5a6bfe048ae1c92009bd815a08a53d3a","modified":1649030595263},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"a714776e3d585369f2285b6bb4e1564539c58d8b","modified":1649030595264},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"9e35f91847773b915c74a78b8aa66c7bdb950ad0","modified":1649030595265},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"f9bee6cac49de1171076560acf6a6eec96647c56","modified":1649030595268},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"84c42716e833d2d1dd47195ea996803ffa0e58ec","modified":1649030595269},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"f84268708a9ea3c417426bf194bdfea9f7374628","modified":1649030595267},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"c42b872df237726483d93d6124b8751d4f64cf86","modified":1649030595265},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"62da1de0d5b8453fcecbfacddb16985265638ba5","modified":1649030595269},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"107b9e586b12d1fe7bb5b6e53fcc8e31516ab3ba","modified":1649030595268},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"985b183db7b7bfd8f9bdb60494549fb7f850348b","modified":1649030595270},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"b7cf7753479fcf2fe07287ffdb0e568adbba4c18","modified":1649030595270},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"2f83bd145b870d80d4b18b0ac603235229a5694e","modified":1649030595270},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"5a873d01fabebcf7ddf7a6b1c2e2e5e2714097f4","modified":1649030595270},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"076cd87805207c9b5612ec9771f6994287f4c169","modified":1649030595271},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"8549829fb7d3c21cd9e119884962e8c463a4a267","modified":1649030595272},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"ec81ea316c82b83d6aee31e52f248d329559d5d3","modified":1649030595271},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"2086c6ad3c48ded263a36b230485ed0c15293f8e","modified":1649030595277},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"d684f2a60fe821d61761a01cf36fd2fb57c31c9c","modified":1649030595276},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"07ea7134db7a66c87658116f089fb1a2a6906563","modified":1649030595271},{"_id":"themes/butterfly/layout/includes/third-party/chat/gitter.pug","hash":"794ce3911f17d354b7196deb8c36d191afac63fb","modified":1649030595197},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"e5af55cdb87d1ffd3d8702bc77097159acf95b54","modified":1649030595197},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"4eebb2d94ca75809ef0cf32d70f13e9bf1e87091","modified":1649030595194},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"b741b5e942481d779a8a1fe94c45154a62a6b748","modified":1649030595197},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"f4d21dcbc3b00eed9b1f604e132c4c6811a0a059","modified":1649030595193},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"bb467bb22f3d0775b33f9eacbfc086ecb7831e78","modified":1649030595198},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"f3f6eaecbcf9352342e259f4a5a3ad7160f31fc9","modified":1649030595196},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"cd7ab4a776be93eea96a6f6fd0a547977fbe1ea3","modified":1649030595199},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"eb2d840fa42de3ec7a7fda0eaa30246d52f543e2","modified":1649030595194},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"896dc0b7480151562c5717771e3000c5a7fc1b16","modified":1649030595195},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"a18415004d03c0a1783eccac522fbcb6ce0ea1f1","modified":1649030595194},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"f3db5c5e738e097a191dc0de59c61d3e1444f7c3","modified":1649030595196},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"e6d48579029c253b85f2abbba5997d6baf9a10ae","modified":1649030595203},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"d5f81fd5443a1b09efb165b5f4447a35949d14ad","modified":1649030595201},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"9ddfac9ae7071ecd982ca3808dcfd4d2d6098f33","modified":1649030595202},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"b22ed23c78fb372cbdc4cfd3f733beb2ebea5d74","modified":1649030595203},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"a780962b3a04cac4b296ce809ee7101e42cf3a37","modified":1649030595203},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"414f876d28f8497d6d551363a89c5c69bf1533eb","modified":1649030595204},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"810e8ca2669433f649329859922aabbb30d76178","modified":1649030595205},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"589f8503f264d4fda971c8daf2028f45c4f2867b","modified":1649030595205},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"21098eba47237ec003228e7fa70a5fbb14d6c804","modified":1649030595206},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"cd1ce86441dc508e4c3dbf8b829046455ba8a6b4","modified":1649030595210},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"3f10e67c7618615cc85d50e4a3694f3d8b262952","modified":1649030595205},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"d1ac48307e4999be08c63c673e98fe3fcee5bfce","modified":1649030595206},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"0f287b10408b4455d946a69677549fcfd302e8c0","modified":1649030595206},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"b2ede1f6b41026ebd233ac076a405889a6eec76b","modified":1649030595210},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"2afa4c21dd19890f47fb568cfb0d90efb676a253","modified":1649030595208},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"444820bc7e4a9a033062bcd8cd71b10b49d1968a","modified":1649030595211},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"16cf05cf9649322da57e9b8d316573bb65f8d8d8","modified":1649030595211},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"c9e6e14770317a3516e2e2f320654cd52b1bd73a","modified":1649030595212},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"3b42d3b8468431655112705bff7530ce647f8c05","modified":1649030595212},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"266caf985dc0703ff81b871b8f8d206f57db6e79","modified":1649030595208},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"a5aa867697578660fe78a0d9b0f245d09b571110","modified":1649030595215},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"87e40f0c315407ab88571a2b3450d640f15c96bc","modified":1649030595209},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"ff3727c3ec698ec61a28c55cbc8c8508f0efb0a0","modified":1649030595216},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"7ce18e4b22c41dcfd84835e89b47030fc5f4a394","modified":1649030595217},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"6dd420ea858f3237d8a7353e8541df665dd6fdf1","modified":1649030595209},{"_id":"themes/butterfly/layout/includes/third-party/share/add-this.pug","hash":"8b4034e53ca5bf85097f681a6e76a53ce685c205","modified":1649030595218},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"fbac21a6c5924fb2f8d1190fd634105fdbc603d4","modified":1649030595219},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"4898a09d8e67fb358ffd74b3a1f0014f555dd856","modified":1649030595222},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"7e9a7347dd8ca4c33c564fb62512743b6012bb2d","modified":1649030595223},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"1309292f1c8c53d96cd7333507b106bcc24ca8fc","modified":1649030595252},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"01ff9e77eb1bd454bec65a6ff5972c8e219bc708","modified":1649030595252},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"0b8aea62d1550113e1fcc237fae1b03743190208","modified":1649030595253},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"fc702a4614d0562a381907b083f71ba63d301d86","modified":1649030595251},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"6e77f1ca0cfb0db6b028f5c0238780e66d344f3d","modified":1649030595249},{"_id":"public/archives/index.html","hash":"86fe327c3b0f5cf7f526abdd2d3d63aea721a344","modified":1649213257365},{"_id":"public/archives/2022/index.html","hash":"13ddc67e36a8de8eec06c0759d61463a9d190243","modified":1649213257365},{"_id":"public/archives/2022/04/index.html","hash":"cb494e4c4b826ef54a68f15c04063876cf0febca","modified":1649213257365},{"_id":"public/index.html","hash":"50aa18382a746af156b1b3be00389825f38f8a4e","modified":1649213257365},{"_id":"public/tags/hexo-vue个人学习笔记/index.html","hash":"1f2e2f0d1067557a3dbaf03f5f429cd735c44fdd","modified":1649213257365},{"_id":"public/2022/04/04/我的第一篇博客/index.html","hash":"c4a4a22ee184489ec554edc77838f558a1567897","modified":1649200535751},{"_id":"public/2022/04/03/hello-world/index.html","hash":"dcb701a0e96974c750f07e068f4dc892a8079e3c","modified":1649213164703},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1649200535751},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1649200535751},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1649200535751},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1649200535751},{"_id":"public/js/search/local-search.js","hash":"ec62117f38e095425f295b1170c222c7a1399425","modified":1649200535751},{"_id":"public/js/utils.js","hash":"0b95daada72abb5d64a1e3236049a60120e47cca","modified":1649200535751},{"_id":"public/js/search/algolia.js","hash":"aaa5e44125dcf321866bc2355a73773b11db8c9c","modified":1649200535751},{"_id":"public/css/index.css","hash":"d19ed1c5b2d2295d1ba4a3c030a7659709ba27c2","modified":1649200535751},{"_id":"public/js/main.js","hash":"04efcbd28b37875cfec88eb87cab7256a9ebb327","modified":1649200535751},{"_id":"public/js/tw_cn.js","hash":"00053ce73210274b3679f42607edef1206eebc68","modified":1649200535751},{"_id":"source/_posts/vue3快速上手.md","hash":"d6a25999cbfbc6b1ea7c74be8251a19701ca2b67","modified":1649213144012},{"_id":"source/_posts/我的vue笔记.md","hash":"476e8d3452f5f346f9ed41039f2ae6278398ecb4","modified":1649200453406},{"_id":"public/2022/04/06/vue3快速上手/index.html","hash":"7942823279529c79a7c349333194cc83ac99cd32","modified":1649213164703},{"_id":"public/2022/04/04/我的vue笔记/index.html","hash":"19cfbd01af6a445cb849fc56cc7639b18cecc395","modified":1649213164703},{"_id":"public/tags/hexo-vue3/index.html","hash":"3c4208b87c0617db18934670588ed5241a6ebe39","modified":1649213257365}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n","slug":"hello-world","published":1,"date":"2022-04-03T15:51:39.064Z","updated":"2022-04-03T15:51:39.065Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1mrf29g00008ok583xv0w4e","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"},{"title":"我的第一篇博客","date":"2022-04-04T12:10:51.000Z","_content":"# 笔记\n\n## 脚手架文件结构\n\n\t├── node_modules \n\t├── public\n\t│   ├── favicon.ico: 页签图标\n\t│   └── index.html: 主页面\n\t├── src\n\t│   ├── assets: 存放静态资源\n\t│   │   └── logo.png\n\t│   │── component: 存放组件\n\t│   │   └── HelloWorld.vue\n\t│   │── App.vue: 汇总所有组件\n\t│   │── main.js: 入口文件\n\t├── .gitignore: git版本管制忽略的配置\n\t├── babel.config.js: babel的配置文件\n\t├── package.json: 应用包配置文件 \n\t├── README.md: 应用描述文件\n\t├── package-lock.json：包版本控制文件\n\n## 关于不同版本的Vue\n\n1. vue.js与vue.runtime.xxx.js的区别：\n   1. vue.js是完整版的Vue，包含：核心功能 + 模板解析器。\n   2. vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。\n2. 因为vue.runtime.xxx.js没有模板解析器，所以不能使用template这个配置项，需要使用render函数接收到的createElement函数去指定具体内容。\n\n## vue.config.js配置文件\n\n1. 使用vue inspect > output.js可以查看到Vue脚手架的默认配置。\n2. 使用vue.config.js可以对脚手架进行个性化定制，详情见：https://cli.vuejs.org/zh\n\n## ref属性\n\n1. 被用来给元素或子组件注册引用信息（id的替代者）\n2. 应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象（vc）\n3. 使用方式：\n   1. 打标识：```<h1 ref=\"xxx\">.....</h1>``` 或 ```<School ref=\"xxx\"></School>```\n   2. 获取：```this.$refs.xxx```\n\n## props配置项\n\n1. 功能：让组件接收外部传过来的数据\n\n2. 传递数据：```<Demo name=\"xxx\"/>```\n\n3. 接收数据：\n\n   1. 第一种方式（只接收）：```props:['name'] ```\n\n   2. 第二种方式（限制类型）：```props:{name:String}```\n\n   3. 第三种方式（限制类型、限制必要性、指定默认值）：\n\n      ```js\n      props:{\n      \tname:{\n      \ttype:String, //类型\n      \trequired:true, //必要性\n      \tdefault:'老王' //默认值\n      \t}\n      }\n      ```\n\n   > 备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。\n\n## mixin(混入)\n\n1. 功能：可以把多个组件共用的配置提取成一个混入对象\n\n2. 使用方式：\n\n   第一步定义混合：\n\n   ```\n   {\n       data(){....},\n       methods:{....}\n       ....\n   }\n   ```\n\n   第二步使用混入：\n\n   ​\t全局混入：```Vue.mixin(xxx)```\n   ​\t局部混入：```mixins:['xxx']\t```\n\n## 插件\n\n1. 功能：用于增强Vue\n\n2. 本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。\n\n3. 定义插件：\n\n   ```js\n   对象.install = function (Vue, options) {\n       // 1. 添加全局过滤器\n       Vue.filter(....)\n   \n       // 2. 添加全局指令\n       Vue.directive(....)\n   \n       // 3. 配置全局混入(合)\n       Vue.mixin(....)\n   \n       // 4. 添加实例方法\n       Vue.prototype.$myMethod = function () {...}\n       Vue.prototype.$myProperty = xxxx\n   }\n   ```\n\n4. 使用插件：```Vue.use()```\n\n## scoped样式\n\n1. 作用：让样式在局部生效，防止冲突。\n2. 写法：```<style scoped>```\n\n## 总结TodoList案例\n\n1. 组件化编码流程：\n\n   ​\t(1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。\n\n   ​\t(2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：\n\n   ​\t\t\t1).一个组件在用：放在组件自身即可。\n\n   ​\t\t\t2). 一些组件在用：放在他们共同的父组件上（<span style=\"color:red\">状态提升</span>）。\n\n   ​\t(3).实现交互：从绑定事件开始。\n\n2. props适用于：\n\n   ​\t(1).父组件 ==> 子组件 通信\n\n   ​\t(2).子组件 ==> 父组件 通信（要求父先给子一个函数）\n\n3. 使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！\n\n4. props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。\n\n## webStorage\n\n1. 存储内容大小一般支持5MB左右（不同浏览器可能还不一样）\n\n2. 浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。\n\n3. 相关API：\n\n   1. ```xxxxxStorage.setItem('key', 'value');```\n      \t该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。\n\n   2. ```xxxxxStorage.getItem('person');```\n\n      ​\t\t该方法接受一个键名作为参数，返回键名对应的值。\n\n   3. ```xxxxxStorage.removeItem('key');```\n\n      ​\t\t该方法接受一个键名作为参数，并把该键名从存储中删除。\n\n   4. ``` xxxxxStorage.clear()```\n\n      ​\t\t该方法会清空存储中的所有数据。\n\n4. 备注：\n\n   1. SessionStorage存储的内容会随着浏览器窗口关闭而消失。\n   2. LocalStorage存储的内容，需要手动清除才会消失。\n   3. ```xxxxxStorage.getItem(xxx)```如果xxx对应的value获取不到，那么getItem的返回值是null。\n   4. ```JSON.parse(null)```的结果依然是null。\n\n## 组件的自定义事件\n\n1. 一种组件间通信的方式，适用于：<strong style=\"color:red\">子组件 ===> 父组件</strong>\n\n2. 使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（<span style=\"color:red\">事件的回调在A中</span>）。\n\n3. 绑定自定义事件：\n\n   1. 第一种方式，在父组件中：```<Demo @atguigu=\"test\"/>```  或 ```<Demo v-on:atguigu=\"test\"/>```\n\n   2. 第二种方式，在父组件中：\n\n      ```js\n      <Demo ref=\"demo\"/>\n      ......\n      mounted(){\n         this.$refs.xxx.$on('atguigu',this.test)\n      }\n      ```\n\n   3. 若想让自定义事件只能触发一次，可以使用```once```修饰符，或```$once```方法。\n\n4. 触发自定义事件：```this.$emit('atguigu',数据)```\t\t\n\n5. 解绑自定义事件```this.$off('atguigu')```\n\n6. 组件上也可以绑定原生DOM事件，需要使用```native```修饰符。\n\n7. 注意：通过```this.$refs.xxx.$on('atguigu',回调)```绑定自定义事件时，回调<span style=\"color:red\">要么配置在methods中</span>，<span style=\"color:red\">要么用箭头函数</span>，否则this指向会出问题！\n\n## 全局事件总线（GlobalEventBus）\n\n1. 一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。\n\n2. 安装全局事件总线：\n\n   ```js\n   new Vue({\n   \t......\n   \tbeforeCreate() {\n   \t\tVue.prototype.$bus = this //安装全局事件总线，$bus就是当前应用的vm\n   \t},\n       ......\n   }) \n   ```\n\n3. 使用事件总线：\n\n   1. 接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的<span style=\"color:red\">回调留在A组件自身。</span>\n\n      ```js\n      methods(){\n        demo(data){......}\n      }\n      ......\n      mounted() {\n        this.$bus.$on('xxxx',this.demo)\n      }\n      ```\n\n   2. 提供数据：```this.$bus.$emit('xxxx',数据)```\n\n4. 最好在beforeDestroy钩子中，用$off去解绑<span style=\"color:red\">当前组件所用到的</span>事件。 \n\n## 消息订阅与发布（pubsub）\n\n1. 一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。\n\n2. 使用步骤：\n\n   1. 安装pubsub：```npm i pubsub-js```\n\n   2. 引入: ```import pubsub from 'pubsub-js'```\n\n   3. 接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的<span style=\"color:red\">回调留在A组件自身。</span>\n\n      ```js\n      methods(){\n        demo(data){......}\n      }\n      ......\n      mounted() {\n        this.pid = pubsub.subscribe('xxx',this.demo) //订阅消息\n      }\n      ```\n\n   4. 提供数据：```pubsub.publish('xxx',数据)```\n\n   5. 最好在beforeDestroy钩子中，用```PubSub.unsubscribe(pid)```去<span style=\"color:red\">取消订阅。</span>\n\n## nextTick\n\n1. 语法：```this.$nextTick(回调函数)```\n2. 作用：在下一次 DOM 更新结束后执行其指定的回调。\n3. 什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。\n\n## Vue封装的过度与动画\n\n1. 作用：在插入、更新或移除 DOM元素时，在合适的时候给元素添加样式类名。\n\n2. 图示：<img src=\"https://img04.sogoucdn.com/app/a/100520146/5990c1dff7dc7a8fb3b34b4462bd0105\" style=\"width:60%\" />\n\n3. 写法：\n\n   1. 准备好样式：\n\n      - 元素进入的样式：\n        1. v-enter：进入的起点\n        2. v-enter-active：进入过程中\n        3. v-enter-to：进入的终点\n      - 元素离开的样式：\n        1. v-leave：离开的起点\n        2. v-leave-active：离开过程中\n        3. v-leave-to：离开的终点\n\n   2. 使用```<transition>```包裹要过度的元素，并配置name属性：\n\n      ```vue\n      <transition name=\"hello\">\n      \t<h1 v-show=\"isShow\">你好啊！</h1>\n      </transition>\n      ```\n\n   3. 备注：若有多个元素需要过度，则需要使用：```<transition-group>```，且每个元素都要指定```key```值。\n\n## vue脚手架配置代理服务器\n\n### 方法一\n\n​\t在vue.config.js中添加如下配置：\n\n```js\ndevServer:{\n  proxy:\"http://localhost:5000\"\n}\n```\n\n说明：\n\n1. 优点：配置简单，请求资源时直接发给前端（8080）即可。\n2. 缺点：不能配置多个代理，不能灵活的控制请求是否走代理。\n3. 工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）\n\n### 方法二\n\n​\t编写vue.config.js配置具体代理规则：\n\n```js\nmodule.exports = {\n\tdevServer: {\n      proxy: {\n      '/api1': {// 匹配所有以 '/api1'开头的请求路径\n        target: 'http://localhost:5000',// 代理目标的基础路径\n        changeOrigin: true,\n        pathRewrite: {'^/api1': ''}\n      },\n      '/api2': {// 匹配所有以 '/api2'开头的请求路径\n        target: 'http://localhost:5001',// 代理目标的基础路径\n        changeOrigin: true,\n        pathRewrite: {'^/api2': ''}\n      }\n    }\n  }\n}\n/*\n   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000\n   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080\n   changeOrigin默认值为true\n*/\n```\n\n说明：\n\n1. 优点：可以配置多个代理，且可以灵活的控制请求是否走代理。\n2. 缺点：配置略微繁琐，请求资源时必须加前缀。\n\n## 插槽\n\n1. 作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong style=\"color:red\">父组件 ===> 子组件</strong> 。\n\n2. 分类：默认插槽、具名插槽、作用域插槽\n\n3. 使用方式：\n\n   1. 默认插槽：\n\n      ```vue\n      父组件中：\n              <Category>\n                 <div>html结构1</div>\n              </Category>\n      子组件中：\n              <template>\n                  <div>\n                     <!-- 定义插槽 -->\n                     <slot>插槽默认内容...</slot>\n                  </div>\n              </template>\n      ```\n\n   2. 具名插槽：\n\n      ```vue\n      父组件中：\n              <Category>\n                  <template slot=\"center\">\n                    <div>html结构1</div>\n                  </template>\n      \n                  <template v-slot:footer>\n                     <div>html结构2</div>\n                  </template>\n              </Category>\n      子组件中：\n              <template>\n                  <div>\n                     <!-- 定义插槽 -->\n                     <slot name=\"center\">插槽默认内容...</slot>\n                     <slot name=\"footer\">插槽默认内容...</slot>\n                  </div>\n              </template>\n      ```\n\n   3. 作用域插槽：\n\n      1. 理解：<span style=\"color:red\">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）\n\n      2. 具体编码：\n\n         ```vue\n         父组件中：\n         \t\t<Category>\n         \t\t\t<template scope=\"scopeData\">\n         \t\t\t\t<!-- 生成的是ul列表 -->\n         \t\t\t\t<ul>\n         \t\t\t\t\t<li v-for=\"g in scopeData.games\" :key=\"g\">{{g}}</li>\n         \t\t\t\t</ul>\n         \t\t\t</template>\n         \t\t</Category>\n         \n         \t\t<Category>\n         \t\t\t<template slot-scope=\"scopeData\">\n         \t\t\t\t<!-- 生成的是h4标题 -->\n         \t\t\t\t<h4 v-for=\"g in scopeData.games\" :key=\"g\">{{g}}</h4>\n         \t\t\t</template>\n         \t\t</Category>\n         子组件中：\n                 <template>\n                     <div>\n                         <slot :games=\"games\"></slot>\n                     </div>\n                 </template>\n         \t\t\n                 <script>\n                     export default {\n                         name:'Category',\n                         props:['title'],\n                         //数据在子组件自身\n                         data() {\n                             return {\n                                 games:['红色警戒','穿越火线','劲舞团','超级玛丽']\n                             }\n                         },\n                     }\n                 </script>\n         ```\n\n   ```\n   \n   ```\n\n## Vuex\n\n### 1.概念\n\n​\t\t在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。\n\n### 2.何时使用？\n\n​\t\t多个组件需要共享数据时\n\n### 3.搭建vuex环境\n\n1. 创建文件：```src/store/index.js```\n\n   ```js\n   //引入Vue核心库\n   import Vue from 'vue'\n   //引入Vuex\n   import Vuex from 'vuex'\n   //应用Vuex插件\n   Vue.use(Vuex)\n   \n   //准备actions对象——响应组件中用户的动作\n   const actions = {}\n   //准备mutations对象——修改state中的数据\n   const mutations = {}\n   //准备state对象——保存具体的数据\n   const state = {}\n   \n   //创建并暴露store\n   export default new Vuex.Store({\n   \tactions,\n   \tmutations,\n   \tstate\n   })\n   ```\n\n2. 在```main.js```中创建vm时传入```store```配置项\n\n   ```js\n   ......\n   //引入store\n   import store from './store'\n   ......\n   \n   //创建vm\n   new Vue({\n   \tel:'#app',\n   \trender: h => h(App),\n   \tstore\n   })\n   ```\n\n###    4.基本使用\n\n1. 初始化数据、配置```actions```、配置```mutations```，操作文件```store.js```\n\n   ```js\n   //引入Vue核心库\n   import Vue from 'vue'\n   //引入Vuex\n   import Vuex from 'vuex'\n   //引用Vuex\n   Vue.use(Vuex)\n   \n   const actions = {\n       //响应组件中加的动作\n   \tjia(context,value){\n   \t\t// console.log('actions中的jia被调用了',miniStore,value)\n   \t\tcontext.commit('JIA',value)\n   \t},\n   }\n   \n   const mutations = {\n       //执行加\n   \tJIA(state,value){\n   \t\t// console.log('mutations中的JIA被调用了',state,value)\n   \t\tstate.sum += value\n   \t}\n   }\n   \n   //初始化数据\n   const state = {\n      sum:0\n   }\n   \n   //创建并暴露store\n   export default new Vuex.Store({\n   \tactions,\n   \tmutations,\n   \tstate,\n   })\n   ```\n\n2. 组件中读取vuex中的数据：```$store.state.sum```\n\n3. 组件中修改vuex中的数据：```$store.dispatch('action中的方法名',数据)``` 或 ```$store.commit('mutations中的方法名',数据)```\n\n   >  备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写```dispatch```，直接编写```commit```\n\n### 5.getters的使用\n\n1. 概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。\n\n2. 在```store.js```中追加```getters```配置\n\n   ```js\n   ......\n   \n   const getters = {\n   \tbigSum(state){\n   \t\treturn state.sum * 10\n   \t}\n   }\n   \n   //创建并暴露store\n   export default new Vuex.Store({\n   \t......\n   \tgetters\n   })\n   ```\n\n3. 组件中读取数据：```$store.getters.bigSum```\n\n### 6.四个map方法的使用\n\n1. <strong>mapState方法：</strong>用于帮助我们映射```state```中的数据为计算属性\n\n   ```js\n   computed: {\n       //借助mapState生成计算属性：sum、school、subject（对象写法）\n        ...mapState({sum:'sum',school:'school',subject:'subject'}),\n            \n       //借助mapState生成计算属性：sum、school、subject（数组写法）\n       ...mapState(['sum','school','subject']),\n   },\n   ```\n\n2. <strong>mapGetters方法：</strong>用于帮助我们映射```getters```中的数据为计算属性\n\n   ```js\n   computed: {\n       //借助mapGetters生成计算属性：bigSum（对象写法）\n       ...mapGetters({bigSum:'bigSum'}),\n   \n       //借助mapGetters生成计算属性：bigSum（数组写法）\n       ...mapGetters(['bigSum'])\n   },\n   ```\n\n3. <strong>mapActions方法：</strong>用于帮助我们生成与```actions```对话的方法，即：包含```$store.dispatch(xxx)```的函数\n\n   ```js\n   methods:{\n       //靠mapActions生成：incrementOdd、incrementWait（对象形式）\n       ...mapActions({incrementOdd:'jiaOdd',incrementWait:'jiaWait'})\n   \n       //靠mapActions生成：incrementOdd、incrementWait（数组形式）\n       ...mapActions(['jiaOdd','jiaWait'])\n   }\n   ```\n\n4. <strong>mapMutations方法：</strong>用于帮助我们生成与```mutations```对话的方法，即：包含```$store.commit(xxx)```的函数\n\n   ```js\n   methods:{\n       //靠mapActions生成：increment、decrement（对象形式）\n       ...mapMutations({increment:'JIA',decrement:'JIAN'}),\n       \n       //靠mapMutations生成：JIA、JIAN（对象形式）\n       ...mapMutations(['JIA','JIAN']),\n   }\n   ```\n\n> 备注：mapActions与mapMutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。\n\n### 7.模块化+命名空间\n\n1. 目的：让代码更好维护，让多种数据分类更加明确。\n\n2. 修改```store.js```\n\n   ```javascript\n   const countAbout = {\n     namespaced:true,//开启命名空间\n     state:{x:1},\n     mutations: { ... },\n     actions: { ... },\n     getters: {\n       bigSum(state){\n          return state.sum * 10\n       }\n     }\n   }\n   \n   const personAbout = {\n     namespaced:true,//开启命名空间\n     state:{ ... },\n     mutations: { ... },\n     actions: { ... }\n   }\n   \n   const store = new Vuex.Store({\n     modules: {\n       countAbout,\n       personAbout\n     }\n   })\n   ```\n\n3. 开启命名空间后，组件中读取state数据：\n\n   ```js\n   //方式一：自己直接读取\n   this.$store.state.personAbout.list\n   //方式二：借助mapState读取：\n   ...mapState('countAbout',['sum','school','subject']),\n   ```\n\n4. 开启命名空间后，组件中读取getters数据：\n\n   ```js\n   //方式一：自己直接读取\n   this.$store.getters['personAbout/firstPersonName']\n   //方式二：借助mapGetters读取：\n   ...mapGetters('countAbout',['bigSum'])\n   ```\n\n5. 开启命名空间后，组件中调用dispatch\n\n   ```js\n   //方式一：自己直接dispatch\n   this.$store.dispatch('personAbout/addPersonWang',person)\n   //方式二：借助mapActions：\n   ...mapActions('countAbout',{incrementOdd:'jiaOdd',incrementWait:'jiaWait'})\n   ```\n\n6. 开启命名空间后，组件中调用commit\n\n   ```js\n   //方式一：自己直接commit\n   this.$store.commit('personAbout/ADD_PERSON',person)\n   //方式二：借助mapMutations：\n   ...mapMutations('countAbout',{increment:'JIA',decrement:'JIAN'}),\n   ```\n\n ## 路由\n\n1. 理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。\n2. 前端路由：key是路径，value是组件。\n\n### 1.基本使用\n\n1. 安装vue-router，命令：```npm i vue-router```\n\n2. 应用插件：```Vue.use(VueRouter)```\n\n3. 编写router配置项:\n\n   ```js\n   //引入VueRouter\n   import VueRouter from 'vue-router'\n   //引入Luyou 组件\n   import About from '../components/About'\n   import Home from '../components/Home'\n   \n   //创建router实例对象，去管理一组一组的路由规则\n   const router = new VueRouter({\n   \troutes:[\n   \t\t{\n   \t\t\tpath:'/about',\n   \t\t\tcomponent:About\n   \t\t},\n   \t\t{\n   \t\t\tpath:'/home',\n   \t\t\tcomponent:Home\n   \t\t}\n   \t]\n   })\n   \n   //暴露router\n   export default router\n   ```\n\n4. 实现切换（active-class可配置高亮样式）\n\n   ```vue\n   <router-link active-class=\"active\" to=\"/about\">About</router-link>\n   ```\n\n5. 指定展示位置\n\n   ```vue\n   <router-view></router-view>\n   ```\n\n### 2.几个注意点\n\n1. 路由组件通常存放在```pages```文件夹，一般组件通常存放在```components```文件夹。\n2. 通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。\n3. 每个组件都有自己的```$route```属性，里面存储着自己的路由信息。\n4. 整个应用只有一个router，可以通过组件的```$router```属性获取到。\n\n### 3.多级路由（多级路由）\n\n1. 配置路由规则，使用children配置项：\n\n   ```js\n   routes:[\n   \t{\n   \t\tpath:'/about',\n   \t\tcomponent:About,\n   \t},\n   \t{\n   \t\tpath:'/home',\n   \t\tcomponent:Home,\n   \t\tchildren:[ //通过children配置子级路由\n   \t\t\t{\n   \t\t\t\tpath:'news', //此处一定不要写：/news\n   \t\t\t\tcomponent:News\n   \t\t\t},\n   \t\t\t{\n   \t\t\t\tpath:'message',//此处一定不要写：/message\n   \t\t\t\tcomponent:Message\n   \t\t\t}\n   \t\t]\n   \t}\n   ]\n   ```\n\n2. 跳转（要写完整路径）：\n\n   ```vue\n   <router-link to=\"/home/news\">News</router-link>\n   ```\n\n### 4.路由的query参数\n\n1. 传递参数\n\n   ```vue\n   <!-- 跳转并携带query参数，to的字符串写法 -->\n   <router-link :to=\"/home/message/detail?id=666&title=你好\">跳转</router-link>\n   \t\t\t\t\n   <!-- 跳转并携带query参数，to的对象写法 -->\n   <router-link \n   \t:to=\"{\n   \t\tpath:'/home/message/detail',\n   \t\tquery:{\n   \t\t   id:666,\n               title:'你好'\n   \t\t}\n   \t}\"\n   >跳转</router-link>\n   ```\n\n2. 接收参数：\n\n   ```js\n   $route.query.id\n   $route.query.title\n   ```\n\n### 5.命名路由\n\n1. 作用：可以简化路由的跳转。\n\n2. 如何使用\n\n   1. 给路由命名：\n\n      ```js\n      {\n      \tpath:'/demo',\n      \tcomponent:Demo,\n      \tchildren:[\n      \t\t{\n      \t\t\tpath:'test',\n      \t\t\tcomponent:Test,\n      \t\t\tchildren:[\n      \t\t\t\t{\n                            name:'hello' //给路由命名\n      \t\t\t\t\tpath:'welcome',\n      \t\t\t\t\tcomponent:Hello,\n      \t\t\t\t}\n      \t\t\t]\n      \t\t}\n      \t]\n      }\n      ```\n\n   2. 简化跳转：\n\n      ```vue\n      <!--简化前，需要写完整的路径 -->\n      <router-link to=\"/demo/test/welcome\">跳转</router-link>\n      \n      <!--简化后，直接通过名字跳转 -->\n      <router-link :to=\"{name:'hello'}\">跳转</router-link>\n      \n      <!--简化写法配合传递参数 -->\n      <router-link \n      \t:to=\"{\n      \t\tname:'hello',\n      \t\tquery:{\n      \t\t   id:666,\n                  title:'你好'\n      \t\t}\n      \t}\"\n      >跳转</router-link>\n      ```\n\n### 6.路由的params参数\n\n1. 配置路由，声明接收params参数\n\n   ```js\n   {\n   \tpath:'/home',\n   \tcomponent:Home,\n   \tchildren:[\n   \t\t{\n   \t\t\tpath:'news',\n   \t\t\tcomponent:News\n   \t\t},\n   \t\t{\n   \t\t\tcomponent:Message,\n   \t\t\tchildren:[\n   \t\t\t\t{\n   \t\t\t\t\tname:'xiangqing',\n   \t\t\t\t\tpath:'detail/:id/:title', //使用占位符声明接收params参数\n   \t\t\t\t\tcomponent:Detail\n   \t\t\t\t}\n   \t\t\t]\n   \t\t}\n   \t]\n   }\n   ```\n\n2. 传递参数\n\n   ```vue\n   <!-- 跳转并携带params参数，to的字符串写法 -->\n   <router-link :to=\"/home/message/detail/666/你好\">跳转</router-link>\n   \t\t\t\t\n   <!-- 跳转并携带params参数，to的对象写法 -->\n   <router-link \n   \t:to=\"{\n   \t\tname:'xiangqing',\n   \t\tparams:{\n   \t\t   id:666,\n               title:'你好'\n   \t\t}\n   \t}\"\n   >跳转</router-link>\n   ```\n\n   > 特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！\n\n3. 接收参数：\n\n   ```js\n   $route.params.id\n   $route.params.title\n   ```\n\n### 7.路由的props配置\n\n​\t作用：让路由组件更方便的收到参数\n\n```js\n{\n\tname:'xiangqing',\n\tpath:'detail/:id',\n\tcomponent:Detail,\n\n\t//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件\n\t// props:{a:900}\n\n\t//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件\n\t// props:true\n\t\n\t//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件\n\tprops(route){\n\t\treturn {\n\t\t\tid:route.query.id,\n\t\t\ttitle:route.query.title\n\t\t}\n\t}\n}\n```\n\n### 8.```<router-link>```的replace属性\n\n1. 作用：控制路由跳转时操作浏览器历史记录的模式\n2. 浏览器的历史记录有两种写入方式：分别为```push```和```replace```，```push```是追加历史记录，```replace```是替换当前记录。路由跳转时候默认为```push```\n3. 如何开启```replace```模式：```<router-link replace .......>News</router-link>```\n\n### 9.编程式路由导航\n\n1. 作用：不借助```<router-link> ```实现路由跳转，让路由跳转更加灵活\n\n2. 具体编码：\n\n   ```js\n   //$router的两个API\n   this.$router.push({\n   \tname:'xiangqing',\n   \t\tparams:{\n   \t\t\tid:xxx,\n   \t\t\ttitle:xxx\n   \t\t}\n   })\n   \n   this.$router.replace({\n   \tname:'xiangqing',\n   \t\tparams:{\n   \t\t\tid:xxx,\n   \t\t\ttitle:xxx\n   \t\t}\n   })\n   this.$router.forward() //前进\n   this.$router.back() //后退\n   this.$router.go() //可前进也可后退\n   ```\n\n### 10.缓存路由组件\n\n1. 作用：让不展示的路由组件保持挂载，不被销毁。\n\n2. 具体编码：\n\n   ```vue\n   <keep-alive include=\"News\"> \n       <router-view></router-view>\n   </keep-alive>\n   ```\n\n### 11.两个新的生命周期钩子\n\n1. 作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。\n2. 具体名字：\n   1. ```activated```路由组件被激活时触发。\n   2. ```deactivated```路由组件失活时触发。\n\n### 12.路由守卫\n\n1. 作用：对路由进行权限控制\n\n2. 分类：全局守卫、独享守卫、组件内守卫\n\n3. 全局守卫:\n\n   ```js\n   //全局前置守卫：初始化时执行、每次路由切换前执行\n   router.beforeEach((to,from,next)=>{\n   \tconsole.log('beforeEach',to,from)\n   \tif(to.meta.isAuth){ //判断当前路由是否需要进行权限控制\n   \t\tif(localStorage.getItem('school') === 'atguigu'){ //权限控制的具体规则\n   \t\t\tnext() //放行\n   \t\t}else{\n   \t\t\talert('暂无权限查看')\n   \t\t\t// next({name:'guanyu'})\n   \t\t}\n   \t}else{\n   \t\tnext() //放行\n   \t}\n   })\n   \n   //全局后置守卫：初始化时执行、每次路由切换后执行\n   router.afterEach((to,from)=>{\n   \tconsole.log('afterEach',to,from)\n   \tif(to.meta.title){ \n   \t\tdocument.title = to.meta.title //修改网页的title\n   \t}else{\n   \t\tdocument.title = 'vue_test'\n   \t}\n   })\n   ```\n\n4. 独享守卫:\n\n   ```js\n   beforeEnter(to,from,next){\n   \tconsole.log('beforeEnter',to,from)\n   \tif(to.meta.isAuth){ //判断当前路由是否需要进行权限控制\n   \t\tif(localStorage.getItem('school') === 'atguigu'){\n   \t\t\tnext()\n   \t\t}else{\n   \t\t\talert('暂无权限查看')\n   \t\t\t// next({name:'guanyu'})\n   \t\t}\n   \t}else{\n   \t\tnext()\n   \t}\n   }\n   ```\n\n5. 组件内守卫：\n\n   ```js\n   //进入守卫：通过路由规则，进入该组件时被调用\n   beforeRouteEnter (to, from, next) {\n   },\n   //离开守卫：通过路由规则，离开该组件时被调用\n   beforeRouteLeave (to, from, next) {\n   }\n   ```\n\n### 13.路由器的两种工作模式\n\n\n\n1. 对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。\n\n2. hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。\n\n3. hash模式：\n\n   1. 地址中永远带着#号，不美观 。\n   2. 若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。\n   3. 兼容性较好。\n\n4. history模式：\n\n   1. 地址干净，美观 。\n   2. 兼容性和hash模式相比略差。\n   3. 应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题。\n\n    ","source":"_posts/我的vue笔记.md","raw":"---\ntitle: 我的第一篇博客\ndate: 2022-04-04 20:10:51\ntags: hexo vue个人学习笔记\n---\n# 笔记\n\n## 脚手架文件结构\n\n\t├── node_modules \n\t├── public\n\t│   ├── favicon.ico: 页签图标\n\t│   └── index.html: 主页面\n\t├── src\n\t│   ├── assets: 存放静态资源\n\t│   │   └── logo.png\n\t│   │── component: 存放组件\n\t│   │   └── HelloWorld.vue\n\t│   │── App.vue: 汇总所有组件\n\t│   │── main.js: 入口文件\n\t├── .gitignore: git版本管制忽略的配置\n\t├── babel.config.js: babel的配置文件\n\t├── package.json: 应用包配置文件 \n\t├── README.md: 应用描述文件\n\t├── package-lock.json：包版本控制文件\n\n## 关于不同版本的Vue\n\n1. vue.js与vue.runtime.xxx.js的区别：\n   1. vue.js是完整版的Vue，包含：核心功能 + 模板解析器。\n   2. vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。\n2. 因为vue.runtime.xxx.js没有模板解析器，所以不能使用template这个配置项，需要使用render函数接收到的createElement函数去指定具体内容。\n\n## vue.config.js配置文件\n\n1. 使用vue inspect > output.js可以查看到Vue脚手架的默认配置。\n2. 使用vue.config.js可以对脚手架进行个性化定制，详情见：https://cli.vuejs.org/zh\n\n## ref属性\n\n1. 被用来给元素或子组件注册引用信息（id的替代者）\n2. 应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象（vc）\n3. 使用方式：\n   1. 打标识：```<h1 ref=\"xxx\">.....</h1>``` 或 ```<School ref=\"xxx\"></School>```\n   2. 获取：```this.$refs.xxx```\n\n## props配置项\n\n1. 功能：让组件接收外部传过来的数据\n\n2. 传递数据：```<Demo name=\"xxx\"/>```\n\n3. 接收数据：\n\n   1. 第一种方式（只接收）：```props:['name'] ```\n\n   2. 第二种方式（限制类型）：```props:{name:String}```\n\n   3. 第三种方式（限制类型、限制必要性、指定默认值）：\n\n      ```js\n      props:{\n      \tname:{\n      \ttype:String, //类型\n      \trequired:true, //必要性\n      \tdefault:'老王' //默认值\n      \t}\n      }\n      ```\n\n   > 备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。\n\n## mixin(混入)\n\n1. 功能：可以把多个组件共用的配置提取成一个混入对象\n\n2. 使用方式：\n\n   第一步定义混合：\n\n   ```\n   {\n       data(){....},\n       methods:{....}\n       ....\n   }\n   ```\n\n   第二步使用混入：\n\n   ​\t全局混入：```Vue.mixin(xxx)```\n   ​\t局部混入：```mixins:['xxx']\t```\n\n## 插件\n\n1. 功能：用于增强Vue\n\n2. 本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。\n\n3. 定义插件：\n\n   ```js\n   对象.install = function (Vue, options) {\n       // 1. 添加全局过滤器\n       Vue.filter(....)\n   \n       // 2. 添加全局指令\n       Vue.directive(....)\n   \n       // 3. 配置全局混入(合)\n       Vue.mixin(....)\n   \n       // 4. 添加实例方法\n       Vue.prototype.$myMethod = function () {...}\n       Vue.prototype.$myProperty = xxxx\n   }\n   ```\n\n4. 使用插件：```Vue.use()```\n\n## scoped样式\n\n1. 作用：让样式在局部生效，防止冲突。\n2. 写法：```<style scoped>```\n\n## 总结TodoList案例\n\n1. 组件化编码流程：\n\n   ​\t(1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。\n\n   ​\t(2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：\n\n   ​\t\t\t1).一个组件在用：放在组件自身即可。\n\n   ​\t\t\t2). 一些组件在用：放在他们共同的父组件上（<span style=\"color:red\">状态提升</span>）。\n\n   ​\t(3).实现交互：从绑定事件开始。\n\n2. props适用于：\n\n   ​\t(1).父组件 ==> 子组件 通信\n\n   ​\t(2).子组件 ==> 父组件 通信（要求父先给子一个函数）\n\n3. 使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！\n\n4. props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。\n\n## webStorage\n\n1. 存储内容大小一般支持5MB左右（不同浏览器可能还不一样）\n\n2. 浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。\n\n3. 相关API：\n\n   1. ```xxxxxStorage.setItem('key', 'value');```\n      \t该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。\n\n   2. ```xxxxxStorage.getItem('person');```\n\n      ​\t\t该方法接受一个键名作为参数，返回键名对应的值。\n\n   3. ```xxxxxStorage.removeItem('key');```\n\n      ​\t\t该方法接受一个键名作为参数，并把该键名从存储中删除。\n\n   4. ``` xxxxxStorage.clear()```\n\n      ​\t\t该方法会清空存储中的所有数据。\n\n4. 备注：\n\n   1. SessionStorage存储的内容会随着浏览器窗口关闭而消失。\n   2. LocalStorage存储的内容，需要手动清除才会消失。\n   3. ```xxxxxStorage.getItem(xxx)```如果xxx对应的value获取不到，那么getItem的返回值是null。\n   4. ```JSON.parse(null)```的结果依然是null。\n\n## 组件的自定义事件\n\n1. 一种组件间通信的方式，适用于：<strong style=\"color:red\">子组件 ===> 父组件</strong>\n\n2. 使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（<span style=\"color:red\">事件的回调在A中</span>）。\n\n3. 绑定自定义事件：\n\n   1. 第一种方式，在父组件中：```<Demo @atguigu=\"test\"/>```  或 ```<Demo v-on:atguigu=\"test\"/>```\n\n   2. 第二种方式，在父组件中：\n\n      ```js\n      <Demo ref=\"demo\"/>\n      ......\n      mounted(){\n         this.$refs.xxx.$on('atguigu',this.test)\n      }\n      ```\n\n   3. 若想让自定义事件只能触发一次，可以使用```once```修饰符，或```$once```方法。\n\n4. 触发自定义事件：```this.$emit('atguigu',数据)```\t\t\n\n5. 解绑自定义事件```this.$off('atguigu')```\n\n6. 组件上也可以绑定原生DOM事件，需要使用```native```修饰符。\n\n7. 注意：通过```this.$refs.xxx.$on('atguigu',回调)```绑定自定义事件时，回调<span style=\"color:red\">要么配置在methods中</span>，<span style=\"color:red\">要么用箭头函数</span>，否则this指向会出问题！\n\n## 全局事件总线（GlobalEventBus）\n\n1. 一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。\n\n2. 安装全局事件总线：\n\n   ```js\n   new Vue({\n   \t......\n   \tbeforeCreate() {\n   \t\tVue.prototype.$bus = this //安装全局事件总线，$bus就是当前应用的vm\n   \t},\n       ......\n   }) \n   ```\n\n3. 使用事件总线：\n\n   1. 接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的<span style=\"color:red\">回调留在A组件自身。</span>\n\n      ```js\n      methods(){\n        demo(data){......}\n      }\n      ......\n      mounted() {\n        this.$bus.$on('xxxx',this.demo)\n      }\n      ```\n\n   2. 提供数据：```this.$bus.$emit('xxxx',数据)```\n\n4. 最好在beforeDestroy钩子中，用$off去解绑<span style=\"color:red\">当前组件所用到的</span>事件。 \n\n## 消息订阅与发布（pubsub）\n\n1. 一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。\n\n2. 使用步骤：\n\n   1. 安装pubsub：```npm i pubsub-js```\n\n   2. 引入: ```import pubsub from 'pubsub-js'```\n\n   3. 接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的<span style=\"color:red\">回调留在A组件自身。</span>\n\n      ```js\n      methods(){\n        demo(data){......}\n      }\n      ......\n      mounted() {\n        this.pid = pubsub.subscribe('xxx',this.demo) //订阅消息\n      }\n      ```\n\n   4. 提供数据：```pubsub.publish('xxx',数据)```\n\n   5. 最好在beforeDestroy钩子中，用```PubSub.unsubscribe(pid)```去<span style=\"color:red\">取消订阅。</span>\n\n## nextTick\n\n1. 语法：```this.$nextTick(回调函数)```\n2. 作用：在下一次 DOM 更新结束后执行其指定的回调。\n3. 什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。\n\n## Vue封装的过度与动画\n\n1. 作用：在插入、更新或移除 DOM元素时，在合适的时候给元素添加样式类名。\n\n2. 图示：<img src=\"https://img04.sogoucdn.com/app/a/100520146/5990c1dff7dc7a8fb3b34b4462bd0105\" style=\"width:60%\" />\n\n3. 写法：\n\n   1. 准备好样式：\n\n      - 元素进入的样式：\n        1. v-enter：进入的起点\n        2. v-enter-active：进入过程中\n        3. v-enter-to：进入的终点\n      - 元素离开的样式：\n        1. v-leave：离开的起点\n        2. v-leave-active：离开过程中\n        3. v-leave-to：离开的终点\n\n   2. 使用```<transition>```包裹要过度的元素，并配置name属性：\n\n      ```vue\n      <transition name=\"hello\">\n      \t<h1 v-show=\"isShow\">你好啊！</h1>\n      </transition>\n      ```\n\n   3. 备注：若有多个元素需要过度，则需要使用：```<transition-group>```，且每个元素都要指定```key```值。\n\n## vue脚手架配置代理服务器\n\n### 方法一\n\n​\t在vue.config.js中添加如下配置：\n\n```js\ndevServer:{\n  proxy:\"http://localhost:5000\"\n}\n```\n\n说明：\n\n1. 优点：配置简单，请求资源时直接发给前端（8080）即可。\n2. 缺点：不能配置多个代理，不能灵活的控制请求是否走代理。\n3. 工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）\n\n### 方法二\n\n​\t编写vue.config.js配置具体代理规则：\n\n```js\nmodule.exports = {\n\tdevServer: {\n      proxy: {\n      '/api1': {// 匹配所有以 '/api1'开头的请求路径\n        target: 'http://localhost:5000',// 代理目标的基础路径\n        changeOrigin: true,\n        pathRewrite: {'^/api1': ''}\n      },\n      '/api2': {// 匹配所有以 '/api2'开头的请求路径\n        target: 'http://localhost:5001',// 代理目标的基础路径\n        changeOrigin: true,\n        pathRewrite: {'^/api2': ''}\n      }\n    }\n  }\n}\n/*\n   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000\n   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080\n   changeOrigin默认值为true\n*/\n```\n\n说明：\n\n1. 优点：可以配置多个代理，且可以灵活的控制请求是否走代理。\n2. 缺点：配置略微繁琐，请求资源时必须加前缀。\n\n## 插槽\n\n1. 作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong style=\"color:red\">父组件 ===> 子组件</strong> 。\n\n2. 分类：默认插槽、具名插槽、作用域插槽\n\n3. 使用方式：\n\n   1. 默认插槽：\n\n      ```vue\n      父组件中：\n              <Category>\n                 <div>html结构1</div>\n              </Category>\n      子组件中：\n              <template>\n                  <div>\n                     <!-- 定义插槽 -->\n                     <slot>插槽默认内容...</slot>\n                  </div>\n              </template>\n      ```\n\n   2. 具名插槽：\n\n      ```vue\n      父组件中：\n              <Category>\n                  <template slot=\"center\">\n                    <div>html结构1</div>\n                  </template>\n      \n                  <template v-slot:footer>\n                     <div>html结构2</div>\n                  </template>\n              </Category>\n      子组件中：\n              <template>\n                  <div>\n                     <!-- 定义插槽 -->\n                     <slot name=\"center\">插槽默认内容...</slot>\n                     <slot name=\"footer\">插槽默认内容...</slot>\n                  </div>\n              </template>\n      ```\n\n   3. 作用域插槽：\n\n      1. 理解：<span style=\"color:red\">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）\n\n      2. 具体编码：\n\n         ```vue\n         父组件中：\n         \t\t<Category>\n         \t\t\t<template scope=\"scopeData\">\n         \t\t\t\t<!-- 生成的是ul列表 -->\n         \t\t\t\t<ul>\n         \t\t\t\t\t<li v-for=\"g in scopeData.games\" :key=\"g\">{{g}}</li>\n         \t\t\t\t</ul>\n         \t\t\t</template>\n         \t\t</Category>\n         \n         \t\t<Category>\n         \t\t\t<template slot-scope=\"scopeData\">\n         \t\t\t\t<!-- 生成的是h4标题 -->\n         \t\t\t\t<h4 v-for=\"g in scopeData.games\" :key=\"g\">{{g}}</h4>\n         \t\t\t</template>\n         \t\t</Category>\n         子组件中：\n                 <template>\n                     <div>\n                         <slot :games=\"games\"></slot>\n                     </div>\n                 </template>\n         \t\t\n                 <script>\n                     export default {\n                         name:'Category',\n                         props:['title'],\n                         //数据在子组件自身\n                         data() {\n                             return {\n                                 games:['红色警戒','穿越火线','劲舞团','超级玛丽']\n                             }\n                         },\n                     }\n                 </script>\n         ```\n\n   ```\n   \n   ```\n\n## Vuex\n\n### 1.概念\n\n​\t\t在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读/写），也是一种组件间通信的方式，且适用于任意组件间通信。\n\n### 2.何时使用？\n\n​\t\t多个组件需要共享数据时\n\n### 3.搭建vuex环境\n\n1. 创建文件：```src/store/index.js```\n\n   ```js\n   //引入Vue核心库\n   import Vue from 'vue'\n   //引入Vuex\n   import Vuex from 'vuex'\n   //应用Vuex插件\n   Vue.use(Vuex)\n   \n   //准备actions对象——响应组件中用户的动作\n   const actions = {}\n   //准备mutations对象——修改state中的数据\n   const mutations = {}\n   //准备state对象——保存具体的数据\n   const state = {}\n   \n   //创建并暴露store\n   export default new Vuex.Store({\n   \tactions,\n   \tmutations,\n   \tstate\n   })\n   ```\n\n2. 在```main.js```中创建vm时传入```store```配置项\n\n   ```js\n   ......\n   //引入store\n   import store from './store'\n   ......\n   \n   //创建vm\n   new Vue({\n   \tel:'#app',\n   \trender: h => h(App),\n   \tstore\n   })\n   ```\n\n###    4.基本使用\n\n1. 初始化数据、配置```actions```、配置```mutations```，操作文件```store.js```\n\n   ```js\n   //引入Vue核心库\n   import Vue from 'vue'\n   //引入Vuex\n   import Vuex from 'vuex'\n   //引用Vuex\n   Vue.use(Vuex)\n   \n   const actions = {\n       //响应组件中加的动作\n   \tjia(context,value){\n   \t\t// console.log('actions中的jia被调用了',miniStore,value)\n   \t\tcontext.commit('JIA',value)\n   \t},\n   }\n   \n   const mutations = {\n       //执行加\n   \tJIA(state,value){\n   \t\t// console.log('mutations中的JIA被调用了',state,value)\n   \t\tstate.sum += value\n   \t}\n   }\n   \n   //初始化数据\n   const state = {\n      sum:0\n   }\n   \n   //创建并暴露store\n   export default new Vuex.Store({\n   \tactions,\n   \tmutations,\n   \tstate,\n   })\n   ```\n\n2. 组件中读取vuex中的数据：```$store.state.sum```\n\n3. 组件中修改vuex中的数据：```$store.dispatch('action中的方法名',数据)``` 或 ```$store.commit('mutations中的方法名',数据)```\n\n   >  备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写```dispatch```，直接编写```commit```\n\n### 5.getters的使用\n\n1. 概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。\n\n2. 在```store.js```中追加```getters```配置\n\n   ```js\n   ......\n   \n   const getters = {\n   \tbigSum(state){\n   \t\treturn state.sum * 10\n   \t}\n   }\n   \n   //创建并暴露store\n   export default new Vuex.Store({\n   \t......\n   \tgetters\n   })\n   ```\n\n3. 组件中读取数据：```$store.getters.bigSum```\n\n### 6.四个map方法的使用\n\n1. <strong>mapState方法：</strong>用于帮助我们映射```state```中的数据为计算属性\n\n   ```js\n   computed: {\n       //借助mapState生成计算属性：sum、school、subject（对象写法）\n        ...mapState({sum:'sum',school:'school',subject:'subject'}),\n            \n       //借助mapState生成计算属性：sum、school、subject（数组写法）\n       ...mapState(['sum','school','subject']),\n   },\n   ```\n\n2. <strong>mapGetters方法：</strong>用于帮助我们映射```getters```中的数据为计算属性\n\n   ```js\n   computed: {\n       //借助mapGetters生成计算属性：bigSum（对象写法）\n       ...mapGetters({bigSum:'bigSum'}),\n   \n       //借助mapGetters生成计算属性：bigSum（数组写法）\n       ...mapGetters(['bigSum'])\n   },\n   ```\n\n3. <strong>mapActions方法：</strong>用于帮助我们生成与```actions```对话的方法，即：包含```$store.dispatch(xxx)```的函数\n\n   ```js\n   methods:{\n       //靠mapActions生成：incrementOdd、incrementWait（对象形式）\n       ...mapActions({incrementOdd:'jiaOdd',incrementWait:'jiaWait'})\n   \n       //靠mapActions生成：incrementOdd、incrementWait（数组形式）\n       ...mapActions(['jiaOdd','jiaWait'])\n   }\n   ```\n\n4. <strong>mapMutations方法：</strong>用于帮助我们生成与```mutations```对话的方法，即：包含```$store.commit(xxx)```的函数\n\n   ```js\n   methods:{\n       //靠mapActions生成：increment、decrement（对象形式）\n       ...mapMutations({increment:'JIA',decrement:'JIAN'}),\n       \n       //靠mapMutations生成：JIA、JIAN（对象形式）\n       ...mapMutations(['JIA','JIAN']),\n   }\n   ```\n\n> 备注：mapActions与mapMutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。\n\n### 7.模块化+命名空间\n\n1. 目的：让代码更好维护，让多种数据分类更加明确。\n\n2. 修改```store.js```\n\n   ```javascript\n   const countAbout = {\n     namespaced:true,//开启命名空间\n     state:{x:1},\n     mutations: { ... },\n     actions: { ... },\n     getters: {\n       bigSum(state){\n          return state.sum * 10\n       }\n     }\n   }\n   \n   const personAbout = {\n     namespaced:true,//开启命名空间\n     state:{ ... },\n     mutations: { ... },\n     actions: { ... }\n   }\n   \n   const store = new Vuex.Store({\n     modules: {\n       countAbout,\n       personAbout\n     }\n   })\n   ```\n\n3. 开启命名空间后，组件中读取state数据：\n\n   ```js\n   //方式一：自己直接读取\n   this.$store.state.personAbout.list\n   //方式二：借助mapState读取：\n   ...mapState('countAbout',['sum','school','subject']),\n   ```\n\n4. 开启命名空间后，组件中读取getters数据：\n\n   ```js\n   //方式一：自己直接读取\n   this.$store.getters['personAbout/firstPersonName']\n   //方式二：借助mapGetters读取：\n   ...mapGetters('countAbout',['bigSum'])\n   ```\n\n5. 开启命名空间后，组件中调用dispatch\n\n   ```js\n   //方式一：自己直接dispatch\n   this.$store.dispatch('personAbout/addPersonWang',person)\n   //方式二：借助mapActions：\n   ...mapActions('countAbout',{incrementOdd:'jiaOdd',incrementWait:'jiaWait'})\n   ```\n\n6. 开启命名空间后，组件中调用commit\n\n   ```js\n   //方式一：自己直接commit\n   this.$store.commit('personAbout/ADD_PERSON',person)\n   //方式二：借助mapMutations：\n   ...mapMutations('countAbout',{increment:'JIA',decrement:'JIAN'}),\n   ```\n\n ## 路由\n\n1. 理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。\n2. 前端路由：key是路径，value是组件。\n\n### 1.基本使用\n\n1. 安装vue-router，命令：```npm i vue-router```\n\n2. 应用插件：```Vue.use(VueRouter)```\n\n3. 编写router配置项:\n\n   ```js\n   //引入VueRouter\n   import VueRouter from 'vue-router'\n   //引入Luyou 组件\n   import About from '../components/About'\n   import Home from '../components/Home'\n   \n   //创建router实例对象，去管理一组一组的路由规则\n   const router = new VueRouter({\n   \troutes:[\n   \t\t{\n   \t\t\tpath:'/about',\n   \t\t\tcomponent:About\n   \t\t},\n   \t\t{\n   \t\t\tpath:'/home',\n   \t\t\tcomponent:Home\n   \t\t}\n   \t]\n   })\n   \n   //暴露router\n   export default router\n   ```\n\n4. 实现切换（active-class可配置高亮样式）\n\n   ```vue\n   <router-link active-class=\"active\" to=\"/about\">About</router-link>\n   ```\n\n5. 指定展示位置\n\n   ```vue\n   <router-view></router-view>\n   ```\n\n### 2.几个注意点\n\n1. 路由组件通常存放在```pages```文件夹，一般组件通常存放在```components```文件夹。\n2. 通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。\n3. 每个组件都有自己的```$route```属性，里面存储着自己的路由信息。\n4. 整个应用只有一个router，可以通过组件的```$router```属性获取到。\n\n### 3.多级路由（多级路由）\n\n1. 配置路由规则，使用children配置项：\n\n   ```js\n   routes:[\n   \t{\n   \t\tpath:'/about',\n   \t\tcomponent:About,\n   \t},\n   \t{\n   \t\tpath:'/home',\n   \t\tcomponent:Home,\n   \t\tchildren:[ //通过children配置子级路由\n   \t\t\t{\n   \t\t\t\tpath:'news', //此处一定不要写：/news\n   \t\t\t\tcomponent:News\n   \t\t\t},\n   \t\t\t{\n   \t\t\t\tpath:'message',//此处一定不要写：/message\n   \t\t\t\tcomponent:Message\n   \t\t\t}\n   \t\t]\n   \t}\n   ]\n   ```\n\n2. 跳转（要写完整路径）：\n\n   ```vue\n   <router-link to=\"/home/news\">News</router-link>\n   ```\n\n### 4.路由的query参数\n\n1. 传递参数\n\n   ```vue\n   <!-- 跳转并携带query参数，to的字符串写法 -->\n   <router-link :to=\"/home/message/detail?id=666&title=你好\">跳转</router-link>\n   \t\t\t\t\n   <!-- 跳转并携带query参数，to的对象写法 -->\n   <router-link \n   \t:to=\"{\n   \t\tpath:'/home/message/detail',\n   \t\tquery:{\n   \t\t   id:666,\n               title:'你好'\n   \t\t}\n   \t}\"\n   >跳转</router-link>\n   ```\n\n2. 接收参数：\n\n   ```js\n   $route.query.id\n   $route.query.title\n   ```\n\n### 5.命名路由\n\n1. 作用：可以简化路由的跳转。\n\n2. 如何使用\n\n   1. 给路由命名：\n\n      ```js\n      {\n      \tpath:'/demo',\n      \tcomponent:Demo,\n      \tchildren:[\n      \t\t{\n      \t\t\tpath:'test',\n      \t\t\tcomponent:Test,\n      \t\t\tchildren:[\n      \t\t\t\t{\n                            name:'hello' //给路由命名\n      \t\t\t\t\tpath:'welcome',\n      \t\t\t\t\tcomponent:Hello,\n      \t\t\t\t}\n      \t\t\t]\n      \t\t}\n      \t]\n      }\n      ```\n\n   2. 简化跳转：\n\n      ```vue\n      <!--简化前，需要写完整的路径 -->\n      <router-link to=\"/demo/test/welcome\">跳转</router-link>\n      \n      <!--简化后，直接通过名字跳转 -->\n      <router-link :to=\"{name:'hello'}\">跳转</router-link>\n      \n      <!--简化写法配合传递参数 -->\n      <router-link \n      \t:to=\"{\n      \t\tname:'hello',\n      \t\tquery:{\n      \t\t   id:666,\n                  title:'你好'\n      \t\t}\n      \t}\"\n      >跳转</router-link>\n      ```\n\n### 6.路由的params参数\n\n1. 配置路由，声明接收params参数\n\n   ```js\n   {\n   \tpath:'/home',\n   \tcomponent:Home,\n   \tchildren:[\n   \t\t{\n   \t\t\tpath:'news',\n   \t\t\tcomponent:News\n   \t\t},\n   \t\t{\n   \t\t\tcomponent:Message,\n   \t\t\tchildren:[\n   \t\t\t\t{\n   \t\t\t\t\tname:'xiangqing',\n   \t\t\t\t\tpath:'detail/:id/:title', //使用占位符声明接收params参数\n   \t\t\t\t\tcomponent:Detail\n   \t\t\t\t}\n   \t\t\t]\n   \t\t}\n   \t]\n   }\n   ```\n\n2. 传递参数\n\n   ```vue\n   <!-- 跳转并携带params参数，to的字符串写法 -->\n   <router-link :to=\"/home/message/detail/666/你好\">跳转</router-link>\n   \t\t\t\t\n   <!-- 跳转并携带params参数，to的对象写法 -->\n   <router-link \n   \t:to=\"{\n   \t\tname:'xiangqing',\n   \t\tparams:{\n   \t\t   id:666,\n               title:'你好'\n   \t\t}\n   \t}\"\n   >跳转</router-link>\n   ```\n\n   > 特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！\n\n3. 接收参数：\n\n   ```js\n   $route.params.id\n   $route.params.title\n   ```\n\n### 7.路由的props配置\n\n​\t作用：让路由组件更方便的收到参数\n\n```js\n{\n\tname:'xiangqing',\n\tpath:'detail/:id',\n\tcomponent:Detail,\n\n\t//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件\n\t// props:{a:900}\n\n\t//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件\n\t// props:true\n\t\n\t//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件\n\tprops(route){\n\t\treturn {\n\t\t\tid:route.query.id,\n\t\t\ttitle:route.query.title\n\t\t}\n\t}\n}\n```\n\n### 8.```<router-link>```的replace属性\n\n1. 作用：控制路由跳转时操作浏览器历史记录的模式\n2. 浏览器的历史记录有两种写入方式：分别为```push```和```replace```，```push```是追加历史记录，```replace```是替换当前记录。路由跳转时候默认为```push```\n3. 如何开启```replace```模式：```<router-link replace .......>News</router-link>```\n\n### 9.编程式路由导航\n\n1. 作用：不借助```<router-link> ```实现路由跳转，让路由跳转更加灵活\n\n2. 具体编码：\n\n   ```js\n   //$router的两个API\n   this.$router.push({\n   \tname:'xiangqing',\n   \t\tparams:{\n   \t\t\tid:xxx,\n   \t\t\ttitle:xxx\n   \t\t}\n   })\n   \n   this.$router.replace({\n   \tname:'xiangqing',\n   \t\tparams:{\n   \t\t\tid:xxx,\n   \t\t\ttitle:xxx\n   \t\t}\n   })\n   this.$router.forward() //前进\n   this.$router.back() //后退\n   this.$router.go() //可前进也可后退\n   ```\n\n### 10.缓存路由组件\n\n1. 作用：让不展示的路由组件保持挂载，不被销毁。\n\n2. 具体编码：\n\n   ```vue\n   <keep-alive include=\"News\"> \n       <router-view></router-view>\n   </keep-alive>\n   ```\n\n### 11.两个新的生命周期钩子\n\n1. 作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。\n2. 具体名字：\n   1. ```activated```路由组件被激活时触发。\n   2. ```deactivated```路由组件失活时触发。\n\n### 12.路由守卫\n\n1. 作用：对路由进行权限控制\n\n2. 分类：全局守卫、独享守卫、组件内守卫\n\n3. 全局守卫:\n\n   ```js\n   //全局前置守卫：初始化时执行、每次路由切换前执行\n   router.beforeEach((to,from,next)=>{\n   \tconsole.log('beforeEach',to,from)\n   \tif(to.meta.isAuth){ //判断当前路由是否需要进行权限控制\n   \t\tif(localStorage.getItem('school') === 'atguigu'){ //权限控制的具体规则\n   \t\t\tnext() //放行\n   \t\t}else{\n   \t\t\talert('暂无权限查看')\n   \t\t\t// next({name:'guanyu'})\n   \t\t}\n   \t}else{\n   \t\tnext() //放行\n   \t}\n   })\n   \n   //全局后置守卫：初始化时执行、每次路由切换后执行\n   router.afterEach((to,from)=>{\n   \tconsole.log('afterEach',to,from)\n   \tif(to.meta.title){ \n   \t\tdocument.title = to.meta.title //修改网页的title\n   \t}else{\n   \t\tdocument.title = 'vue_test'\n   \t}\n   })\n   ```\n\n4. 独享守卫:\n\n   ```js\n   beforeEnter(to,from,next){\n   \tconsole.log('beforeEnter',to,from)\n   \tif(to.meta.isAuth){ //判断当前路由是否需要进行权限控制\n   \t\tif(localStorage.getItem('school') === 'atguigu'){\n   \t\t\tnext()\n   \t\t}else{\n   \t\t\talert('暂无权限查看')\n   \t\t\t// next({name:'guanyu'})\n   \t\t}\n   \t}else{\n   \t\tnext()\n   \t}\n   }\n   ```\n\n5. 组件内守卫：\n\n   ```js\n   //进入守卫：通过路由规则，进入该组件时被调用\n   beforeRouteEnter (to, from, next) {\n   },\n   //离开守卫：通过路由规则，离开该组件时被调用\n   beforeRouteLeave (to, from, next) {\n   }\n   ```\n\n### 13.路由器的两种工作模式\n\n\n\n1. 对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。\n\n2. hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。\n\n3. hash模式：\n\n   1. 地址中永远带着#号，不美观 。\n   2. 若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。\n   3. 兼容性较好。\n\n4. history模式：\n\n   1. 地址干净，美观 。\n   2. 兼容性和hash模式相比略差。\n   3. 应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题。\n\n    ","slug":"我的vue笔记","published":1,"updated":"2022-04-05T23:14:13.406Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cl1mygx61000060k5dns324gh","content":"<h1 id=\"笔记\"><a href=\"#笔记\" class=\"headerlink\" title=\"笔记\"></a>笔记</h1><h2 id=\"脚手架文件结构\"><a href=\"#脚手架文件结构\" class=\"headerlink\" title=\"脚手架文件结构\"></a>脚手架文件结构</h2><pre><code>├── node_modules \n├── public\n│   ├── favicon.ico: 页签图标\n│   └── index.html: 主页面\n├── src\n│   ├── assets: 存放静态资源\n│   │   └── logo.png\n│   │── component: 存放组件\n│   │   └── HelloWorld.vue\n│   │── App.vue: 汇总所有组件\n│   │── main.js: 入口文件\n├── .gitignore: git版本管制忽略的配置\n├── babel.config.js: babel的配置文件\n├── package.json: 应用包配置文件 \n├── README.md: 应用描述文件\n├── package-lock.json：包版本控制文件\n</code></pre>\n<h2 id=\"关于不同版本的Vue\"><a href=\"#关于不同版本的Vue\" class=\"headerlink\" title=\"关于不同版本的Vue\"></a>关于不同版本的Vue</h2><ol>\n<li>vue.js与vue.runtime.xxx.js的区别：<ol>\n<li>vue.js是完整版的Vue，包含：核心功能 + 模板解析器。</li>\n<li>vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。</li>\n</ol>\n</li>\n<li>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template这个配置项，需要使用render函数接收到的createElement函数去指定具体内容。</li>\n</ol>\n<h2 id=\"vue-config-js配置文件\"><a href=\"#vue-config-js配置文件\" class=\"headerlink\" title=\"vue.config.js配置文件\"></a>vue.config.js配置文件</h2><ol>\n<li>使用vue inspect &gt; output.js可以查看到Vue脚手架的默认配置。</li>\n<li>使用vue.config.js可以对脚手架进行个性化定制，详情见：<a href=\"https://cli.vuejs.org/zh\">https://cli.vuejs.org/zh</a></li>\n</ol>\n<h2 id=\"ref属性\"><a href=\"#ref属性\" class=\"headerlink\" title=\"ref属性\"></a>ref属性</h2><ol>\n<li>被用来给元素或子组件注册引用信息（id的替代者）</li>\n<li>应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象（vc）</li>\n<li>使用方式：<ol>\n<li>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;</code> 或 <code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li>\n<li>获取：<code>this.$refs.xxx</code></li>\n</ol>\n</li>\n</ol>\n<h2 id=\"props配置项\"><a href=\"#props配置项\" class=\"headerlink\" title=\"props配置项\"></a>props配置项</h2><ol>\n<li><p>功能：让组件接收外部传过来的数据</p>\n</li>\n<li><p>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p>\n</li>\n<li><p>接收数据：</p>\n<ol>\n<li><p>第一种方式（只接收）：<code>props:[&#39;name&#39;] </code></p>\n</li>\n<li><p>第二种方式（限制类型）：<code>props:&#123;name:String&#125;</code></p>\n</li>\n<li><p>第三种方式（限制类型、限制必要性、指定默认值）：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">props</span>:&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:&#123;</span><br><span class=\"line\">\t<span class=\"attr\">type</span>:<span class=\"title class_\">String</span>, <span class=\"comment\">//类型</span></span><br><span class=\"line\">\t<span class=\"attr\">required</span>:<span class=\"literal\">true</span>, <span class=\"comment\">//必要性</span></span><br><span class=\"line\">\t<span class=\"attr\">default</span>:<span class=\"string\">&#x27;老王&#x27;</span> <span class=\"comment\">//默认值</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。</p>\n</blockquote>\n</li>\n</ol>\n<h2 id=\"mixin-混入\"><a href=\"#mixin-混入\" class=\"headerlink\" title=\"mixin(混入)\"></a>mixin(混入)</h2><ol>\n<li><p>功能：可以把多个组件共用的配置提取成一个混入对象</p>\n</li>\n<li><p>使用方式：</p>\n<p>第一步定义混合：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    data()&#123;....&#125;,</span><br><span class=\"line\">    methods:&#123;....&#125;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>第二步使用混入：</p>\n<p>​    全局混入：<code>Vue.mixin(xxx)</code><br>​    局部混入：<code>mixins:[&#39;xxx&#39;]    </code></p>\n</li>\n</ol>\n<h2 id=\"插件\"><a href=\"#插件\" class=\"headerlink\" title=\"插件\"></a>插件</h2><ol>\n<li><p>功能：用于增强Vue</p>\n</li>\n<li><p>本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。</p>\n</li>\n<li><p>定义插件：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对象.<span class=\"property\">install</span> = <span class=\"keyword\">function</span> (<span class=\"params\">Vue, options</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1. 添加全局过滤器</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"title function_\">filter</span>(....)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2. 添加全局指令</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"title function_\">directive</span>(....)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3. 配置全局混入(合)</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"title function_\">mixin</span>(....)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4. 添加实例方法</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$myMethod</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;...&#125;</span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$myProperty</span> = xxxx</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用插件：<code>Vue.use()</code></p>\n</li>\n</ol>\n<h2 id=\"scoped样式\"><a href=\"#scoped样式\" class=\"headerlink\" title=\"scoped样式\"></a>scoped样式</h2><ol>\n<li>作用：让样式在局部生效，防止冲突。</li>\n<li>写法：<code>&lt;style scoped&gt;</code></li>\n</ol>\n<h2 id=\"总结TodoList案例\"><a href=\"#总结TodoList案例\" class=\"headerlink\" title=\"总结TodoList案例\"></a>总结TodoList案例</h2><ol>\n<li><p>组件化编码流程：</p>\n<p>​    (1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。</p>\n<p>​    (2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：</p>\n<p>​            1).一个组件在用：放在组件自身即可。</p>\n<p>​            2). 一些组件在用：放在他们共同的父组件上（<span style=\"color:red\">状态提升</span>）。</p>\n<p>​    (3).实现交互：从绑定事件开始。</p>\n</li>\n<li><p>props适用于：</p>\n<p>​    (1).父组件 &#x3D;&#x3D;&gt; 子组件 通信</p>\n<p>​    (2).子组件 &#x3D;&#x3D;&gt; 父组件 通信（要求父先给子一个函数）</p>\n</li>\n<li><p>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！</p>\n</li>\n<li><p>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。</p>\n</li>\n</ol>\n<h2 id=\"webStorage\"><a href=\"#webStorage\" class=\"headerlink\" title=\"webStorage\"></a>webStorage</h2><ol>\n<li><p>存储内容大小一般支持5MB左右（不同浏览器可能还不一样）</p>\n</li>\n<li><p>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。</p>\n</li>\n<li><p>相关API：</p>\n<ol>\n<li><p><code>xxxxxStorage.setItem(&#39;key&#39;, &#39;value&#39;);</code><br>该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。</p>\n</li>\n<li><p><code>xxxxxStorage.getItem(&#39;person&#39;);</code></p>\n<p>​        该方法接受一个键名作为参数，返回键名对应的值。</p>\n</li>\n<li><p><code>xxxxxStorage.removeItem(&#39;key&#39;);</code></p>\n<p>​        该方法接受一个键名作为参数，并把该键名从存储中删除。</p>\n</li>\n<li><p><code> xxxxxStorage.clear()</code></p>\n<p>​        该方法会清空存储中的所有数据。</p>\n</li>\n</ol>\n</li>\n<li><p>备注：</p>\n<ol>\n<li>SessionStorage存储的内容会随着浏览器窗口关闭而消失。</li>\n<li>LocalStorage存储的内容，需要手动清除才会消失。</li>\n<li><code>xxxxxStorage.getItem(xxx)</code>如果xxx对应的value获取不到，那么getItem的返回值是null。</li>\n<li><code>JSON.parse(null)</code>的结果依然是null。</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"组件的自定义事件\"><a href=\"#组件的自定义事件\" class=\"headerlink\" title=\"组件的自定义事件\"></a>组件的自定义事件</h2><ol>\n<li><p>一种组件间通信的方式，适用于：<strong style=\"color:red\">子组件 &#x3D;&#x3D;&#x3D;&gt; 父组件</strong></p>\n</li>\n<li><p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（<span style=\"color:red\">事件的回调在A中</span>）。</p>\n</li>\n<li><p>绑定自定义事件：</p>\n<ol>\n<li><p>第一种方式，在父组件中：<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code>  或 <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></p>\n</li>\n<li><p>第二种方式，在父组件中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Demo</span> ref=<span class=\"string\">&quot;demo&quot;</span>/&gt;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"title function_\">mounted</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">   <span class=\"variable language_\">this</span>.<span class=\"property\">$refs</span>.<span class=\"property\">xxx</span>.$on(<span class=\"string\">&#x27;atguigu&#x27;</span>,<span class=\"variable language_\">this</span>.<span class=\"property\">test</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</p>\n</li>\n</ol>\n</li>\n<li><p>触发自定义事件：<code>this.$emit(&#39;atguigu&#39;,数据)</code>        </p>\n</li>\n<li><p>解绑自定义事件<code>this.$off(&#39;atguigu&#39;)</code></p>\n</li>\n<li><p>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符。</p>\n</li>\n<li><p>注意：通过<code>this.$refs.xxx.$on(&#39;atguigu&#39;,回调)</code>绑定自定义事件时，回调<span style=\"color:red\">要么配置在methods中</span>，<span style=\"color:red\">要么用箭头函数</span>，否则this指向会出问题！</p>\n</li>\n</ol>\n<h2 id=\"全局事件总线（GlobalEventBus）\"><a href=\"#全局事件总线（GlobalEventBus）\" class=\"headerlink\" title=\"全局事件总线（GlobalEventBus）\"></a>全局事件总线（GlobalEventBus）</h2><ol>\n<li><p>一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。</p>\n</li>\n<li><p>安装全局事件总线：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">\t<span class=\"title function_\">beforeCreate</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$bus</span> = <span class=\"variable language_\">this</span> <span class=\"comment\">//安装全局事件总线，$bus就是当前应用的vm</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;) </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用事件总线：</p>\n<ol>\n<li><p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的<span style=\"color:red\">回调留在A组件自身。</span></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">methods</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"title function_\">demo</span>(<span class=\"params\">data</span>)&#123;......&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">$bus</span>.$on(<span class=\"string\">&#x27;xxxx&#x27;</span>,<span class=\"variable language_\">this</span>.<span class=\"property\">demo</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>提供数据：<code>this.$bus.$emit(&#39;xxxx&#39;,数据)</code></p>\n</li>\n</ol>\n</li>\n<li><p>最好在beforeDestroy钩子中，用$off去解绑<span style=\"color:red\">当前组件所用到的</span>事件。</p>\n</li>\n</ol>\n<h2 id=\"消息订阅与发布（pubsub）\"><a href=\"#消息订阅与发布（pubsub）\" class=\"headerlink\" title=\"消息订阅与发布（pubsub）\"></a>消息订阅与发布（pubsub）</h2><ol>\n<li><p>一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。</p>\n</li>\n<li><p>使用步骤：</p>\n<ol>\n<li><p>安装pubsub：<code>npm i pubsub-js</code></p>\n</li>\n<li><p>引入: <code>import pubsub from &#39;pubsub-js&#39;</code></p>\n</li>\n<li><p>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的<span style=\"color:red\">回调留在A组件自身。</span></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">methods</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"title function_\">demo</span>(<span class=\"params\">data</span>)&#123;......&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">pid</span> = pubsub.<span class=\"title function_\">subscribe</span>(<span class=\"string\">&#x27;xxx&#x27;</span>,<span class=\"variable language_\">this</span>.<span class=\"property\">demo</span>) <span class=\"comment\">//订阅消息</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>提供数据：<code>pubsub.publish(&#39;xxx&#39;,数据)</code></p>\n</li>\n<li><p>最好在beforeDestroy钩子中，用<code>PubSub.unsubscribe(pid)</code>去<span style=\"color:red\">取消订阅。</span></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"nextTick\"><a href=\"#nextTick\" class=\"headerlink\" title=\"nextTick\"></a>nextTick</h2><ol>\n<li>语法：<code>this.$nextTick(回调函数)</code></li>\n<li>作用：在下一次 DOM 更新结束后执行其指定的回调。</li>\n<li>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。</li>\n</ol>\n<h2 id=\"Vue封装的过度与动画\"><a href=\"#Vue封装的过度与动画\" class=\"headerlink\" title=\"Vue封装的过度与动画\"></a>Vue封装的过度与动画</h2><ol>\n<li><p>作用：在插入、更新或移除 DOM元素时，在合适的时候给元素添加样式类名。</p>\n</li>\n<li><p>图示：<img src=\"https://img04.sogoucdn.com/app/a/100520146/5990c1dff7dc7a8fb3b34b4462bd0105\" style=\"width:60%\" /></p>\n</li>\n<li><p>写法：</p>\n<ol>\n<li><p>准备好样式：</p>\n<ul>\n<li>元素进入的样式：<ol>\n<li>v-enter：进入的起点</li>\n<li>v-enter-active：进入过程中</li>\n<li>v-enter-to：进入的终点</li>\n</ol>\n</li>\n<li>元素离开的样式：<ol>\n<li>v-leave：离开的起点</li>\n<li>v-leave-active：离开过程中</li>\n<li>v-leave-to：离开的终点</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><p>使用<code>&lt;transition&gt;</code>包裹要过度的元素，并配置name属性：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;transition name=&quot;hello&quot;&gt;</span><br><span class=\"line\">\t&lt;h1 v-show=&quot;isShow&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class=\"line\">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>备注：若有多个元素需要过度，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值。</p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"vue脚手架配置代理服务器\"><a href=\"#vue脚手架配置代理服务器\" class=\"headerlink\" title=\"vue脚手架配置代理服务器\"></a>vue脚手架配置代理服务器</h2><h3 id=\"方法一\"><a href=\"#方法一\" class=\"headerlink\" title=\"方法一\"></a>方法一</h3><p>​    在vue.config.js中添加如下配置：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">devServer</span>:&#123;</span><br><span class=\"line\">  <span class=\"attr\">proxy</span>:<span class=\"string\">&quot;http://localhost:5000&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>说明：</p>\n<ol>\n<li>优点：配置简单，请求资源时直接发给前端（8080）即可。</li>\n<li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li>\n<li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）</li>\n</ol>\n<h3 id=\"方法二\"><a href=\"#方法二\" class=\"headerlink\" title=\"方法二\"></a>方法二</h3><p>​    编写vue.config.js配置具体代理规则：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">\t<span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">proxy</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;/api1&#x27;</span>: &#123;<span class=\"comment\">// 匹配所有以 &#x27;/api1&#x27;开头的请求路径</span></span><br><span class=\"line\">        <span class=\"attr\">target</span>: <span class=\"string\">&#x27;http://localhost:5000&#x27;</span>,<span class=\"comment\">// 代理目标的基础路径</span></span><br><span class=\"line\">        <span class=\"attr\">changeOrigin</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">pathRewrite</span>: &#123;<span class=\"string\">&#x27;^/api1&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>&#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"string\">&#x27;/api2&#x27;</span>: &#123;<span class=\"comment\">// 匹配所有以 &#x27;/api2&#x27;开头的请求路径</span></span><br><span class=\"line\">        <span class=\"attr\">target</span>: <span class=\"string\">&#x27;http://localhost:5001&#x27;</span>,<span class=\"comment\">// 代理目标的基础路径</span></span><br><span class=\"line\">        <span class=\"attr\">changeOrigin</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">pathRewrite</span>: &#123;<span class=\"string\">&#x27;^/api2&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>&#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class=\"line\"><span class=\"comment\">   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080</span></span><br><span class=\"line\"><span class=\"comment\">   changeOrigin默认值为true</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<p>说明：</p>\n<ol>\n<li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li>\n<li>缺点：配置略微繁琐，请求资源时必须加前缀。</li>\n</ol>\n<h2 id=\"插槽\"><a href=\"#插槽\" class=\"headerlink\" title=\"插槽\"></a>插槽</h2><ol>\n<li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong style=\"color:red\">父组件 &#x3D;&#x3D;&#x3D;&gt; 子组件</strong> 。</p>\n</li>\n<li><p>分类：默认插槽、具名插槽、作用域插槽</p>\n</li>\n<li><p>使用方式：</p>\n<ol>\n<li><p>默认插槽：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">父组件中：</span><br><span class=\"line\">        &lt;Category&gt;</span><br><span class=\"line\">           &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class=\"line\">        &lt;/Category&gt;</span><br><span class=\"line\">子组件中：</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;div&gt;</span><br><span class=\"line\">               &lt;!-- 定义插槽 --&gt;</span><br><span class=\"line\">               &lt;slot&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>具名插槽：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">父组件中：</span><br><span class=\"line\">        &lt;Category&gt;</span><br><span class=\"line\">            &lt;template slot=&quot;center&quot;&gt;</span><br><span class=\"line\">              &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class=\"line\">            &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;template v-slot:footer&gt;</span><br><span class=\"line\">               &lt;div&gt;html结构2&lt;/div&gt;</span><br><span class=\"line\">            &lt;/template&gt;</span><br><span class=\"line\">        &lt;/Category&gt;</span><br><span class=\"line\">子组件中：</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;div&gt;</span><br><span class=\"line\">               &lt;!-- 定义插槽 --&gt;</span><br><span class=\"line\">               &lt;slot name=&quot;center&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class=\"line\">               &lt;slot name=&quot;footer&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>作用域插槽：</p>\n<ol>\n<li><p>理解：<span style=\"color:red\">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）</p>\n</li>\n<li><p>具体编码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">父组件中：</span><br><span class=\"line\">\t\t&lt;Category&gt;</span><br><span class=\"line\">\t\t\t&lt;template scope=&quot;scopeData&quot;&gt;</span><br><span class=\"line\">\t\t\t\t&lt;!-- 生成的是ul列表 --&gt;</span><br><span class=\"line\">\t\t\t\t&lt;ul&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;</span><br><span class=\"line\">\t\t\t\t&lt;/ul&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t&lt;/Category&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&lt;Category&gt;</span><br><span class=\"line\">\t\t\t&lt;template slot-scope=&quot;scopeData&quot;&gt;</span><br><span class=\"line\">\t\t\t\t&lt;!-- 生成的是h4标题 --&gt;</span><br><span class=\"line\">\t\t\t\t&lt;h4 v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t&lt;/Category&gt;</span><br><span class=\"line\">子组件中：</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;div&gt;</span><br><span class=\"line\">                &lt;slot :games=&quot;games&quot;&gt;&lt;/slot&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;script&gt;</span><br><span class=\"line\">            export default &#123;</span><br><span class=\"line\">                name:&#x27;Category&#x27;,</span><br><span class=\"line\">                props:[&#x27;title&#x27;],</span><br><span class=\"line\">                //数据在子组件自身</span><br><span class=\"line\">                data() &#123;</span><br><span class=\"line\">                    return &#123;</span><br><span class=\"line\">                        games:[&#x27;红色警戒&#x27;,&#x27;穿越火线&#x27;,&#x27;劲舞团&#x27;,&#x27;超级玛丽&#x27;]</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;/script&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   </span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"Vuex\"><a href=\"#Vuex\" class=\"headerlink\" title=\"Vuex\"></a>Vuex</h2><h3 id=\"1-概念\"><a href=\"#1-概念\" class=\"headerlink\" title=\"1.概念\"></a>1.概念</h3><p>​        在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读&#x2F;写），也是一种组件间通信的方式，且适用于任意组件间通信。</p>\n<h3 id=\"2-何时使用？\"><a href=\"#2-何时使用？\" class=\"headerlink\" title=\"2.何时使用？\"></a>2.何时使用？</h3><p>​        多个组件需要共享数据时</p>\n<h3 id=\"3-搭建vuex环境\"><a href=\"#3-搭建vuex环境\" class=\"headerlink\" title=\"3.搭建vuex环境\"></a>3.搭建vuex环境</h3><ol>\n<li><p>创建文件：<code>src/store/index.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//引入Vue核心库</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引入Vuex</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vuex</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//应用Vuex插件</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">use</span>(<span class=\"title class_\">Vuex</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//准备actions对象——响应组件中用户的动作</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> actions = &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">//准备mutations对象——修改state中的数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mutations = &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">//准备state对象——保存具体的数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> state = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建并暴露store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">\tactions,</span><br><span class=\"line\">\tmutations,</span><br><span class=\"line\">\tstate</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>main.js</code>中创建vm时传入<code>store</code>配置项</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"><span class=\"comment\">//引入store</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./store&#x27;</span></span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建vm</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">el</span>:<span class=\"string\">&#x27;#app&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">render</span>: <span class=\"function\"><span class=\"params\">h</span> =&gt;</span> <span class=\"title function_\">h</span>(<span class=\"title class_\">App</span>),</span><br><span class=\"line\">\tstore</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"4-基本使用\"><a href=\"#4-基本使用\" class=\"headerlink\" title=\"4.基本使用\"></a>4.基本使用</h3><ol>\n<li><p>初始化数据、配置<code>actions</code>、配置<code>mutations</code>，操作文件<code>store.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//引入Vue核心库</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引入Vuex</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vuex</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引用Vuex</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">use</span>(<span class=\"title class_\">Vuex</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> actions = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//响应组件中加的动作</span></span><br><span class=\"line\">\t<span class=\"title function_\">jia</span>(<span class=\"params\">context,value</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(&#x27;actions中的jia被调用了&#x27;,miniStore,value)</span></span><br><span class=\"line\">\t\tcontext.<span class=\"title function_\">commit</span>(<span class=\"string\">&#x27;JIA&#x27;</span>,value)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> mutations = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行加</span></span><br><span class=\"line\">\t<span class=\"title function_\">JIA</span>(<span class=\"params\">state,value</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(&#x27;mutations中的JIA被调用了&#x27;,state,value)</span></span><br><span class=\"line\">\t\tstate.<span class=\"property\">sum</span> += value</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//初始化数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> state = &#123;</span><br><span class=\"line\">   <span class=\"attr\">sum</span>:<span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建并暴露store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">\tactions,</span><br><span class=\"line\">\tmutations,</span><br><span class=\"line\">\tstate,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>组件中读取vuex中的数据：<code>$store.state.sum</code></p>\n</li>\n<li><p>组件中修改vuex中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;,数据)</code> 或 <code>$store.commit(&#39;mutations中的方法名&#39;,数据)</code></p>\n<blockquote>\n<p> 备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写<code>dispatch</code>，直接编写<code>commit</code></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"5-getters的使用\"><a href=\"#5-getters的使用\" class=\"headerlink\" title=\"5.getters的使用\"></a>5.getters的使用</h3><ol>\n<li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。</p>\n</li>\n<li><p>在<code>store.js</code>中追加<code>getters</code>配置</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getters = &#123;</span><br><span class=\"line\">\t<span class=\"title function_\">bigSum</span>(<span class=\"params\">state</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> state.<span class=\"property\">sum</span> * <span class=\"number\">10</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建并暴露store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">\tgetters</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>组件中读取数据：<code>$store.getters.bigSum</code></p>\n</li>\n</ol>\n<h3 id=\"6-四个map方法的使用\"><a href=\"#6-四个map方法的使用\" class=\"headerlink\" title=\"6.四个map方法的使用\"></a>6.四个map方法的使用</h3><ol>\n<li><p><strong>mapState方法：</strong>用于帮助我们映射<code>state</code>中的数据为计算属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//借助mapState生成计算属性：sum、school、subject（对象写法）</span></span><br><span class=\"line\">     ...<span class=\"title function_\">mapState</span>(&#123;<span class=\"attr\">sum</span>:<span class=\"string\">&#x27;sum&#x27;</span>,<span class=\"attr\">school</span>:<span class=\"string\">&#x27;school&#x27;</span>,<span class=\"attr\">subject</span>:<span class=\"string\">&#x27;subject&#x27;</span>&#125;),</span><br><span class=\"line\">         </span><br><span class=\"line\">    <span class=\"comment\">//借助mapState生成计算属性：sum、school、subject（数组写法）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapState</span>([<span class=\"string\">&#x27;sum&#x27;</span>,<span class=\"string\">&#x27;school&#x27;</span>,<span class=\"string\">&#x27;subject&#x27;</span>]),</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>mapGetters方法：</strong>用于帮助我们映射<code>getters</code>中的数据为计算属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//借助mapGetters生成计算属性：bigSum（对象写法）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapGetters</span>(&#123;<span class=\"attr\">bigSum</span>:<span class=\"string\">&#x27;bigSum&#x27;</span>&#125;),</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//借助mapGetters生成计算属性：bigSum（数组写法）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapGetters</span>([<span class=\"string\">&#x27;bigSum&#x27;</span>])</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>mapActions方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">methods</span>:&#123;</span><br><span class=\"line\">    <span class=\"comment\">//靠mapActions生成：incrementOdd、incrementWait（对象形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapActions</span>(&#123;<span class=\"attr\">incrementOdd</span>:<span class=\"string\">&#x27;jiaOdd&#x27;</span>,<span class=\"attr\">incrementWait</span>:<span class=\"string\">&#x27;jiaWait&#x27;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//靠mapActions生成：incrementOdd、incrementWait（数组形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapActions</span>([<span class=\"string\">&#x27;jiaOdd&#x27;</span>,<span class=\"string\">&#x27;jiaWait&#x27;</span>])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>mapMutations方法：</strong>用于帮助我们生成与<code>mutations</code>对话的方法，即：包含<code>$store.commit(xxx)</code>的函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">methods</span>:&#123;</span><br><span class=\"line\">    <span class=\"comment\">//靠mapActions生成：increment、decrement（对象形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapMutations</span>(&#123;<span class=\"attr\">increment</span>:<span class=\"string\">&#x27;JIA&#x27;</span>,<span class=\"attr\">decrement</span>:<span class=\"string\">&#x27;JIAN&#x27;</span>&#125;),</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//靠mapMutations生成：JIA、JIAN（对象形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapMutations</span>([<span class=\"string\">&#x27;JIA&#x27;</span>,<span class=\"string\">&#x27;JIAN&#x27;</span>]),</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>备注：mapActions与mapMutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p>\n</blockquote>\n<h3 id=\"7-模块化-命名空间\"><a href=\"#7-模块化-命名空间\" class=\"headerlink\" title=\"7.模块化+命名空间\"></a>7.模块化+命名空间</h3><ol>\n<li><p>目的：让代码更好维护，让多种数据分类更加明确。</p>\n</li>\n<li><p>修改<code>store.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> countAbout = &#123;</span><br><span class=\"line\">  <span class=\"attr\">namespaced</span>:<span class=\"literal\">true</span>,<span class=\"comment\">//开启命名空间</span></span><br><span class=\"line\">  <span class=\"attr\">state</span>:&#123;<span class=\"attr\">x</span>:<span class=\"number\">1</span>&#125;,</span><br><span class=\"line\">  <span class=\"attr\">mutations</span>: &#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">getters</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">bigSum</span>(<span class=\"params\">state</span>)&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> state.<span class=\"property\">sum</span> * <span class=\"number\">10</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> personAbout = &#123;</span><br><span class=\"line\">  <span class=\"attr\">namespaced</span>:<span class=\"literal\">true</span>,<span class=\"comment\">//开启命名空间</span></span><br><span class=\"line\">  <span class=\"attr\">state</span>:&#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">mutations</span>: &#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123; ... &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">modules</span>: &#123;</span><br><span class=\"line\">    countAbout,</span><br><span class=\"line\">    personAbout</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中读取state数据：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接读取</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"property\">state</span>.<span class=\"property\">personAbout</span>.<span class=\"property\">list</span></span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapState读取：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapState</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,[<span class=\"string\">&#x27;sum&#x27;</span>,<span class=\"string\">&#x27;school&#x27;</span>,<span class=\"string\">&#x27;subject&#x27;</span>]),</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中读取getters数据：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接读取</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"property\">getters</span>[<span class=\"string\">&#x27;personAbout/firstPersonName&#x27;</span>]</span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapGetters读取：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapGetters</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,[<span class=\"string\">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中调用dispatch</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接dispatch</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"title function_\">dispatch</span>(<span class=\"string\">&#x27;personAbout/addPersonWang&#x27;</span>,person)</span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapActions：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapActions</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,&#123;<span class=\"attr\">incrementOdd</span>:<span class=\"string\">&#x27;jiaOdd&#x27;</span>,<span class=\"attr\">incrementWait</span>:<span class=\"string\">&#x27;jiaWait&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中调用commit</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接commit</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"title function_\">commit</span>(<span class=\"string\">&#x27;personAbout/ADD_PERSON&#x27;</span>,person)</span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapMutations：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapMutations</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,&#123;<span class=\"attr\">increment</span>:<span class=\"string\">&#x27;JIA&#x27;</span>,<span class=\"attr\">decrement</span>:<span class=\"string\">&#x27;JIAN&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h2><ol>\n<li>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</li>\n<li>前端路由：key是路径，value是组件。</li>\n</ol>\n<h3 id=\"1-基本使用\"><a href=\"#1-基本使用\" class=\"headerlink\" title=\"1.基本使用\"></a>1.基本使用</h3><ol>\n<li><p>安装vue-router，命令：<code>npm i vue-router</code></p>\n</li>\n<li><p>应用插件：<code>Vue.use(VueRouter)</code></p>\n</li>\n<li><p>编写router配置项:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//引入VueRouter</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">VueRouter</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-router&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引入Luyou 组件</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">About</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;../components/About&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Home</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;../components/Home&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建router实例对象，去管理一组一组的路由规则</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">VueRouter</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">routes</span>:[</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/about&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">About</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Home</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//暴露router</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> router</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>实现切换（active-class可配置高亮样式）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>指定展示位置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"2-几个注意点\"><a href=\"#2-几个注意点\" class=\"headerlink\" title=\"2.几个注意点\"></a>2.几个注意点</h3><ol>\n<li>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li>\n<li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li>\n<li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息。</li>\n<li>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到。</li>\n</ol>\n<h3 id=\"3-多级路由（多级路由）\"><a href=\"#3-多级路由（多级路由）\" class=\"headerlink\" title=\"3.多级路由（多级路由）\"></a>3.多级路由（多级路由）</h3><ol>\n<li><p>配置路由规则，使用children配置项：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">routes</span>:[</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/about&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">About</span>,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Home</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">children</span>:[ <span class=\"comment\">//通过children配置子级路由</span></span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;news&#x27;</span>, <span class=\"comment\">//此处一定不要写：/news</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">News</span></span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;message&#x27;</span>,<span class=\"comment\">//此处一定不要写：/message</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Message</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t]</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>跳转（要写完整路径）：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-link to=&quot;/home/news&quot;&gt;News&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"4-路由的query参数\"><a href=\"#4-路由的query参数\" class=\"headerlink\" title=\"4.路由的query参数\"></a>4.路由的query参数</h3><ol>\n<li><p>传递参数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 跳转并携带query参数，to的字符串写法 --&gt;</span><br><span class=\"line\">&lt;router-link :to=&quot;/home/message/detail?id=666&amp;title=你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;</span><br><span class=\"line\">&lt;router-link </span><br><span class=\"line\">\t:to=&quot;&#123;</span><br><span class=\"line\">\t\tpath:&#x27;/home/message/detail&#x27;,</span><br><span class=\"line\">\t\tquery:&#123;</span><br><span class=\"line\">\t\t   id:666,</span><br><span class=\"line\">            title:&#x27;你好&#x27;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;&quot;</span><br><span class=\"line\">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>接收参数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$route.<span class=\"property\">query</span>.<span class=\"property\">id</span></span><br><span class=\"line\">$route.<span class=\"property\">query</span>.<span class=\"property\">title</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"5-命名路由\"><a href=\"#5-命名路由\" class=\"headerlink\" title=\"5.命名路由\"></a>5.命名路由</h3><ol>\n<li><p>作用：可以简化路由的跳转。</p>\n</li>\n<li><p>如何使用</p>\n<ol>\n<li><p>给路由命名：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/demo&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">component</span>:<span class=\"title class_\">Demo</span>,</span><br><span class=\"line\">\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;test&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Test</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">                      <span class=\"attr\">name</span>:<span class=\"string\">&#x27;hello&#x27;</span> <span class=\"comment\">//给路由命名</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;welcome&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Hello</span>,</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>简化跳转：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--简化前，需要写完整的路径 --&gt;</span><br><span class=\"line\">&lt;router-link to=&quot;/demo/test/welcome&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--简化后，直接通过名字跳转 --&gt;</span><br><span class=\"line\">&lt;router-link :to=&quot;&#123;name:&#x27;hello&#x27;&#125;&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--简化写法配合传递参数 --&gt;</span><br><span class=\"line\">&lt;router-link </span><br><span class=\"line\">\t:to=&quot;&#123;</span><br><span class=\"line\">\t\tname:&#x27;hello&#x27;,</span><br><span class=\"line\">\t\tquery:&#123;</span><br><span class=\"line\">\t\t   id:666,</span><br><span class=\"line\">            title:&#x27;你好&#x27;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;&quot;</span><br><span class=\"line\">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ol>\n<h3 id=\"6-路由的params参数\"><a href=\"#6-路由的params参数\" class=\"headerlink\" title=\"6.路由的params参数\"></a>6.路由的params参数</h3><ol>\n<li><p>配置路由，声明接收params参数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">component</span>:<span class=\"title class_\">Home</span>,</span><br><span class=\"line\">\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;news&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">News</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Message</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;detail/:id/:title&#x27;</span>, <span class=\"comment\">//使用占位符声明接收params参数</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Detail</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>传递参数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;</span><br><span class=\"line\">&lt;router-link :to=&quot;/home/message/detail/666/你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;</span><br><span class=\"line\">&lt;router-link </span><br><span class=\"line\">\t:to=&quot;&#123;</span><br><span class=\"line\">\t\tname:&#x27;xiangqing&#x27;,</span><br><span class=\"line\">\t\tparams:&#123;</span><br><span class=\"line\">\t\t   id:666,</span><br><span class=\"line\">            title:&#x27;你好&#x27;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;&quot;</span><br><span class=\"line\">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</p>\n</blockquote>\n</li>\n<li><p>接收参数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$route.<span class=\"property\">params</span>.<span class=\"property\">id</span></span><br><span class=\"line\">$route.<span class=\"property\">params</span>.<span class=\"property\">title</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"7-路由的props配置\"><a href=\"#7-路由的props配置\" class=\"headerlink\" title=\"7.路由的props配置\"></a>7.路由的props配置</h3><p>​    作用：让路由组件更方便的收到参数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;detail/:id&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">component</span>:<span class=\"title class_\">Detail</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件</span></span><br><span class=\"line\">\t<span class=\"comment\">// props:&#123;a:900&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件</span></span><br><span class=\"line\">\t<span class=\"comment\">// props:true</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件</span></span><br><span class=\"line\">\t<span class=\"title function_\">props</span>(<span class=\"params\">route</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">id</span>:route.<span class=\"property\">query</span>.<span class=\"property\">id</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">title</span>:route.<span class=\"property\">query</span>.<span class=\"property\">title</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-lt-router-link-gt-的replace属性\"><a href=\"#8-lt-router-link-gt-的replace属性\" class=\"headerlink\" title=\"8.&lt;router-link&gt;的replace属性\"></a>8.<code>&lt;router-link&gt;</code>的replace属性</h3><ol>\n<li>作用：控制路由跳转时操作浏览器历史记录的模式</li>\n<li>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时候默认为<code>push</code></li>\n<li>如何开启<code>replace</code>模式：<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li>\n</ol>\n<h3 id=\"9-编程式路由导航\"><a href=\"#9-编程式路由导航\" class=\"headerlink\" title=\"9.编程式路由导航\"></a>9.编程式路由导航</h3><ol>\n<li><p>作用：不借助<code>&lt;router-link&gt; </code>实现路由跳转，让路由跳转更加灵活</p>\n</li>\n<li><p>具体编码：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//$router的两个API</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">push</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">params</span>:&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">id</span>:xxx,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">title</span>:xxx</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">replace</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">params</span>:&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">id</span>:xxx,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">title</span>:xxx</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">forward</span>() <span class=\"comment\">//前进</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">back</span>() <span class=\"comment\">//后退</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">go</span>() <span class=\"comment\">//可前进也可后退</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"10-缓存路由组件\"><a href=\"#10-缓存路由组件\" class=\"headerlink\" title=\"10.缓存路由组件\"></a>10.缓存路由组件</h3><ol>\n<li><p>作用：让不展示的路由组件保持挂载，不被销毁。</p>\n</li>\n<li><p>具体编码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;keep-alive include=&quot;News&quot;&gt; </span><br><span class=\"line\">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"11-两个新的生命周期钩子\"><a href=\"#11-两个新的生命周期钩子\" class=\"headerlink\" title=\"11.两个新的生命周期钩子\"></a>11.两个新的生命周期钩子</h3><ol>\n<li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li>\n<li>具体名字：<ol>\n<li><code>activated</code>路由组件被激活时触发。</li>\n<li><code>deactivated</code>路由组件失活时触发。</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"12-路由守卫\"><a href=\"#12-路由守卫\" class=\"headerlink\" title=\"12.路由守卫\"></a>12.路由守卫</h3><ol>\n<li><p>作用：对路由进行权限控制</p>\n</li>\n<li><p>分类：全局守卫、独享守卫、组件内守卫</p>\n</li>\n<li><p>全局守卫:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//全局前置守卫：初始化时执行、每次路由切换前执行</span></span><br><span class=\"line\">router.<span class=\"title function_\">beforeEach</span>(<span class=\"function\">(<span class=\"params\">to,<span class=\"keyword\">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;beforeEach&#x27;</span>,to,<span class=\"keyword\">from</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(to.<span class=\"property\">meta</span>.<span class=\"property\">isAuth</span>)&#123; <span class=\"comment\">//判断当前路由是否需要进行权限控制</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&#x27;school&#x27;</span>) === <span class=\"string\">&#x27;atguigu&#x27;</span>)&#123; <span class=\"comment\">//权限控制的具体规则</span></span><br><span class=\"line\">\t\t\t<span class=\"title function_\">next</span>() <span class=\"comment\">//放行</span></span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;暂无权限查看&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"title function_\">next</span>() <span class=\"comment\">//放行</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//全局后置守卫：初始化时执行、每次路由切换后执行</span></span><br><span class=\"line\">router.<span class=\"title function_\">afterEach</span>(<span class=\"function\">(<span class=\"params\">to,<span class=\"keyword\">from</span></span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;afterEach&#x27;</span>,to,<span class=\"keyword\">from</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(to.<span class=\"property\">meta</span>.<span class=\"property\">title</span>)&#123; </span><br><span class=\"line\">\t\t<span class=\"variable language_\">document</span>.<span class=\"property\">title</span> = to.<span class=\"property\">meta</span>.<span class=\"property\">title</span> <span class=\"comment\">//修改网页的title</span></span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"variable language_\">document</span>.<span class=\"property\">title</span> = <span class=\"string\">&#x27;vue_test&#x27;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>独享守卫:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">beforeEnter</span>(<span class=\"params\">to,<span class=\"keyword\">from</span>,next</span>)&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;beforeEnter&#x27;</span>,to,<span class=\"keyword\">from</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(to.<span class=\"property\">meta</span>.<span class=\"property\">isAuth</span>)&#123; <span class=\"comment\">//判断当前路由是否需要进行权限控制</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&#x27;school&#x27;</span>) === <span class=\"string\">&#x27;atguigu&#x27;</span>)&#123;</span><br><span class=\"line\">\t\t\t<span class=\"title function_\">next</span>()</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;暂无权限查看&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"title function_\">next</span>()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>组件内守卫：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//进入守卫：通过路由规则，进入该组件时被调用</span></span><br><span class=\"line\">beforeRouteEnter (to, <span class=\"keyword\">from</span>, next) &#123;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">//离开守卫：通过路由规则，离开该组件时被调用</span></span><br><span class=\"line\">beforeRouteLeave (to, <span class=\"keyword\">from</span>, next) &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"13-路由器的两种工作模式\"><a href=\"#13-路由器的两种工作模式\" class=\"headerlink\" title=\"13.路由器的两种工作模式\"></a>13.路由器的两种工作模式</h3><ol>\n<li><p>对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。</p>\n</li>\n<li><p>hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。</p>\n</li>\n<li><p>hash模式：</p>\n<ol>\n<li>地址中永远带着#号，不美观 。</li>\n<li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。</li>\n<li>兼容性较好。</li>\n</ol>\n</li>\n<li><p>history模式：</p>\n<ol>\n<li>地址干净，美观 。</li>\n<li>兼容性和hash模式相比略差。</li>\n<li>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题。</li>\n</ol>\n</li>\n</ol>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"笔记\"><a href=\"#笔记\" class=\"headerlink\" title=\"笔记\"></a>笔记</h1><h2 id=\"脚手架文件结构\"><a href=\"#脚手架文件结构\" class=\"headerlink\" title=\"脚手架文件结构\"></a>脚手架文件结构</h2><pre><code>├── node_modules \n├── public\n│   ├── favicon.ico: 页签图标\n│   └── index.html: 主页面\n├── src\n│   ├── assets: 存放静态资源\n│   │   └── logo.png\n│   │── component: 存放组件\n│   │   └── HelloWorld.vue\n│   │── App.vue: 汇总所有组件\n│   │── main.js: 入口文件\n├── .gitignore: git版本管制忽略的配置\n├── babel.config.js: babel的配置文件\n├── package.json: 应用包配置文件 \n├── README.md: 应用描述文件\n├── package-lock.json：包版本控制文件\n</code></pre>\n<h2 id=\"关于不同版本的Vue\"><a href=\"#关于不同版本的Vue\" class=\"headerlink\" title=\"关于不同版本的Vue\"></a>关于不同版本的Vue</h2><ol>\n<li>vue.js与vue.runtime.xxx.js的区别：<ol>\n<li>vue.js是完整版的Vue，包含：核心功能 + 模板解析器。</li>\n<li>vue.runtime.xxx.js是运行版的Vue，只包含：核心功能；没有模板解析器。</li>\n</ol>\n</li>\n<li>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template这个配置项，需要使用render函数接收到的createElement函数去指定具体内容。</li>\n</ol>\n<h2 id=\"vue-config-js配置文件\"><a href=\"#vue-config-js配置文件\" class=\"headerlink\" title=\"vue.config.js配置文件\"></a>vue.config.js配置文件</h2><ol>\n<li>使用vue inspect &gt; output.js可以查看到Vue脚手架的默认配置。</li>\n<li>使用vue.config.js可以对脚手架进行个性化定制，详情见：<a href=\"https://cli.vuejs.org/zh\">https://cli.vuejs.org/zh</a></li>\n</ol>\n<h2 id=\"ref属性\"><a href=\"#ref属性\" class=\"headerlink\" title=\"ref属性\"></a>ref属性</h2><ol>\n<li>被用来给元素或子组件注册引用信息（id的替代者）</li>\n<li>应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象（vc）</li>\n<li>使用方式：<ol>\n<li>打标识：<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;</code> 或 <code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li>\n<li>获取：<code>this.$refs.xxx</code></li>\n</ol>\n</li>\n</ol>\n<h2 id=\"props配置项\"><a href=\"#props配置项\" class=\"headerlink\" title=\"props配置项\"></a>props配置项</h2><ol>\n<li><p>功能：让组件接收外部传过来的数据</p>\n</li>\n<li><p>传递数据：<code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></p>\n</li>\n<li><p>接收数据：</p>\n<ol>\n<li><p>第一种方式（只接收）：<code>props:[&#39;name&#39;] </code></p>\n</li>\n<li><p>第二种方式（限制类型）：<code>props:&#123;name:String&#125;</code></p>\n</li>\n<li><p>第三种方式（限制类型、限制必要性、指定默认值）：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">props</span>:&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:&#123;</span><br><span class=\"line\">\t<span class=\"attr\">type</span>:<span class=\"title class_\">String</span>, <span class=\"comment\">//类型</span></span><br><span class=\"line\">\t<span class=\"attr\">required</span>:<span class=\"literal\">true</span>, <span class=\"comment\">//必要性</span></span><br><span class=\"line\">\t<span class=\"attr\">default</span>:<span class=\"string\">&#x27;老王&#x27;</span> <span class=\"comment\">//默认值</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。</p>\n</blockquote>\n</li>\n</ol>\n<h2 id=\"mixin-混入\"><a href=\"#mixin-混入\" class=\"headerlink\" title=\"mixin(混入)\"></a>mixin(混入)</h2><ol>\n<li><p>功能：可以把多个组件共用的配置提取成一个混入对象</p>\n</li>\n<li><p>使用方式：</p>\n<p>第一步定义混合：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    data()&#123;....&#125;,</span><br><span class=\"line\">    methods:&#123;....&#125;</span><br><span class=\"line\">    ....</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>第二步使用混入：</p>\n<p>​    全局混入：<code>Vue.mixin(xxx)</code><br>​    局部混入：<code>mixins:[&#39;xxx&#39;]    </code></p>\n</li>\n</ol>\n<h2 id=\"插件\"><a href=\"#插件\" class=\"headerlink\" title=\"插件\"></a>插件</h2><ol>\n<li><p>功能：用于增强Vue</p>\n</li>\n<li><p>本质：包含install方法的一个对象，install的第一个参数是Vue，第二个以后的参数是插件使用者传递的数据。</p>\n</li>\n<li><p>定义插件：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">对象.<span class=\"property\">install</span> = <span class=\"keyword\">function</span> (<span class=\"params\">Vue, options</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1. 添加全局过滤器</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"title function_\">filter</span>(....)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 2. 添加全局指令</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"title function_\">directive</span>(....)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 3. 配置全局混入(合)</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"title function_\">mixin</span>(....)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 4. 添加实例方法</span></span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$myMethod</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;...&#125;</span><br><span class=\"line\">    <span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$myProperty</span> = xxxx</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用插件：<code>Vue.use()</code></p>\n</li>\n</ol>\n<h2 id=\"scoped样式\"><a href=\"#scoped样式\" class=\"headerlink\" title=\"scoped样式\"></a>scoped样式</h2><ol>\n<li>作用：让样式在局部生效，防止冲突。</li>\n<li>写法：<code>&lt;style scoped&gt;</code></li>\n</ol>\n<h2 id=\"总结TodoList案例\"><a href=\"#总结TodoList案例\" class=\"headerlink\" title=\"总结TodoList案例\"></a>总结TodoList案例</h2><ol>\n<li><p>组件化编码流程：</p>\n<p>​    (1).拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突。</p>\n<p>​    (2).实现动态组件：考虑好数据的存放位置，数据是一个组件在用，还是一些组件在用：</p>\n<p>​            1).一个组件在用：放在组件自身即可。</p>\n<p>​            2). 一些组件在用：放在他们共同的父组件上（<span style=\"color:red\">状态提升</span>）。</p>\n<p>​    (3).实现交互：从绑定事件开始。</p>\n</li>\n<li><p>props适用于：</p>\n<p>​    (1).父组件 &#x3D;&#x3D;&gt; 子组件 通信</p>\n<p>​    (2).子组件 &#x3D;&#x3D;&gt; 父组件 通信（要求父先给子一个函数）</p>\n</li>\n<li><p>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以修改的！</p>\n</li>\n<li><p>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这样做。</p>\n</li>\n</ol>\n<h2 id=\"webStorage\"><a href=\"#webStorage\" class=\"headerlink\" title=\"webStorage\"></a>webStorage</h2><ol>\n<li><p>存储内容大小一般支持5MB左右（不同浏览器可能还不一样）</p>\n</li>\n<li><p>浏览器端通过 Window.sessionStorage 和 Window.localStorage 属性来实现本地存储机制。</p>\n</li>\n<li><p>相关API：</p>\n<ol>\n<li><p><code>xxxxxStorage.setItem(&#39;key&#39;, &#39;value&#39;);</code><br>该方法接受一个键和值作为参数，会把键值对添加到存储中，如果键名存在，则更新其对应的值。</p>\n</li>\n<li><p><code>xxxxxStorage.getItem(&#39;person&#39;);</code></p>\n<p>​        该方法接受一个键名作为参数，返回键名对应的值。</p>\n</li>\n<li><p><code>xxxxxStorage.removeItem(&#39;key&#39;);</code></p>\n<p>​        该方法接受一个键名作为参数，并把该键名从存储中删除。</p>\n</li>\n<li><p><code> xxxxxStorage.clear()</code></p>\n<p>​        该方法会清空存储中的所有数据。</p>\n</li>\n</ol>\n</li>\n<li><p>备注：</p>\n<ol>\n<li>SessionStorage存储的内容会随着浏览器窗口关闭而消失。</li>\n<li>LocalStorage存储的内容，需要手动清除才会消失。</li>\n<li><code>xxxxxStorage.getItem(xxx)</code>如果xxx对应的value获取不到，那么getItem的返回值是null。</li>\n<li><code>JSON.parse(null)</code>的结果依然是null。</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"组件的自定义事件\"><a href=\"#组件的自定义事件\" class=\"headerlink\" title=\"组件的自定义事件\"></a>组件的自定义事件</h2><ol>\n<li><p>一种组件间通信的方式，适用于：<strong style=\"color:red\">子组件 &#x3D;&#x3D;&#x3D;&gt; 父组件</strong></p>\n</li>\n<li><p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（<span style=\"color:red\">事件的回调在A中</span>）。</p>\n</li>\n<li><p>绑定自定义事件：</p>\n<ol>\n<li><p>第一种方式，在父组件中：<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code>  或 <code>&lt;Demo v-on:atguigu=&quot;test&quot;/&gt;</code></p>\n</li>\n<li><p>第二种方式，在父组件中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;<span class=\"title class_\">Demo</span> ref=<span class=\"string\">&quot;demo&quot;</span>/&gt;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"title function_\">mounted</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">   <span class=\"variable language_\">this</span>.<span class=\"property\">$refs</span>.<span class=\"property\">xxx</span>.$on(<span class=\"string\">&#x27;atguigu&#x27;</span>,<span class=\"variable language_\">this</span>.<span class=\"property\">test</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>若想让自定义事件只能触发一次，可以使用<code>once</code>修饰符，或<code>$once</code>方法。</p>\n</li>\n</ol>\n</li>\n<li><p>触发自定义事件：<code>this.$emit(&#39;atguigu&#39;,数据)</code>        </p>\n</li>\n<li><p>解绑自定义事件<code>this.$off(&#39;atguigu&#39;)</code></p>\n</li>\n<li><p>组件上也可以绑定原生DOM事件，需要使用<code>native</code>修饰符。</p>\n</li>\n<li><p>注意：通过<code>this.$refs.xxx.$on(&#39;atguigu&#39;,回调)</code>绑定自定义事件时，回调<span style=\"color:red\">要么配置在methods中</span>，<span style=\"color:red\">要么用箭头函数</span>，否则this指向会出问题！</p>\n</li>\n</ol>\n<h2 id=\"全局事件总线（GlobalEventBus）\"><a href=\"#全局事件总线（GlobalEventBus）\" class=\"headerlink\" title=\"全局事件总线（GlobalEventBus）\"></a>全局事件总线（GlobalEventBus）</h2><ol>\n<li><p>一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。</p>\n</li>\n<li><p>安装全局事件总线：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">\t<span class=\"title function_\">beforeCreate</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">\t\t<span class=\"title class_\">Vue</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">$bus</span> = <span class=\"variable language_\">this</span> <span class=\"comment\">//安装全局事件总线，$bus就是当前应用的vm</span></span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;) </span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用事件总线：</p>\n<ol>\n<li><p>接收数据：A组件想接收数据，则在A组件中给$bus绑定自定义事件，事件的<span style=\"color:red\">回调留在A组件自身。</span></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">methods</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"title function_\">demo</span>(<span class=\"params\">data</span>)&#123;......&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">$bus</span>.$on(<span class=\"string\">&#x27;xxxx&#x27;</span>,<span class=\"variable language_\">this</span>.<span class=\"property\">demo</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>提供数据：<code>this.$bus.$emit(&#39;xxxx&#39;,数据)</code></p>\n</li>\n</ol>\n</li>\n<li><p>最好在beforeDestroy钩子中，用$off去解绑<span style=\"color:red\">当前组件所用到的</span>事件。</p>\n</li>\n</ol>\n<h2 id=\"消息订阅与发布（pubsub）\"><a href=\"#消息订阅与发布（pubsub）\" class=\"headerlink\" title=\"消息订阅与发布（pubsub）\"></a>消息订阅与发布（pubsub）</h2><ol>\n<li><p>一种组件间通信的方式，适用于<span style=\"color:red\">任意组件间通信</span>。</p>\n</li>\n<li><p>使用步骤：</p>\n<ol>\n<li><p>安装pubsub：<code>npm i pubsub-js</code></p>\n</li>\n<li><p>引入: <code>import pubsub from &#39;pubsub-js&#39;</code></p>\n</li>\n<li><p>接收数据：A组件想接收数据，则在A组件中订阅消息，订阅的<span style=\"color:red\">回调留在A组件自身。</span></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">methods</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"title function_\">demo</span>(<span class=\"params\">data</span>)&#123;......&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">......</span><br><span class=\"line\"><span class=\"title function_\">mounted</span>(<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">  <span class=\"variable language_\">this</span>.<span class=\"property\">pid</span> = pubsub.<span class=\"title function_\">subscribe</span>(<span class=\"string\">&#x27;xxx&#x27;</span>,<span class=\"variable language_\">this</span>.<span class=\"property\">demo</span>) <span class=\"comment\">//订阅消息</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>提供数据：<code>pubsub.publish(&#39;xxx&#39;,数据)</code></p>\n</li>\n<li><p>最好在beforeDestroy钩子中，用<code>PubSub.unsubscribe(pid)</code>去<span style=\"color:red\">取消订阅。</span></p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"nextTick\"><a href=\"#nextTick\" class=\"headerlink\" title=\"nextTick\"></a>nextTick</h2><ol>\n<li>语法：<code>this.$nextTick(回调函数)</code></li>\n<li>作用：在下一次 DOM 更新结束后执行其指定的回调。</li>\n<li>什么时候用：当改变数据后，要基于更新后的新DOM进行某些操作时，要在nextTick所指定的回调函数中执行。</li>\n</ol>\n<h2 id=\"Vue封装的过度与动画\"><a href=\"#Vue封装的过度与动画\" class=\"headerlink\" title=\"Vue封装的过度与动画\"></a>Vue封装的过度与动画</h2><ol>\n<li><p>作用：在插入、更新或移除 DOM元素时，在合适的时候给元素添加样式类名。</p>\n</li>\n<li><p>图示：<img src=\"https://img04.sogoucdn.com/app/a/100520146/5990c1dff7dc7a8fb3b34b4462bd0105\" style=\"width:60%\" /></p>\n</li>\n<li><p>写法：</p>\n<ol>\n<li><p>准备好样式：</p>\n<ul>\n<li>元素进入的样式：<ol>\n<li>v-enter：进入的起点</li>\n<li>v-enter-active：进入过程中</li>\n<li>v-enter-to：进入的终点</li>\n</ol>\n</li>\n<li>元素离开的样式：<ol>\n<li>v-leave：离开的起点</li>\n<li>v-leave-active：离开过程中</li>\n<li>v-leave-to：离开的终点</li>\n</ol>\n</li>\n</ul>\n</li>\n<li><p>使用<code>&lt;transition&gt;</code>包裹要过度的元素，并配置name属性：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;transition name=&quot;hello&quot;&gt;</span><br><span class=\"line\">\t&lt;h1 v-show=&quot;isShow&quot;&gt;你好啊！&lt;/h1&gt;</span><br><span class=\"line\">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>备注：若有多个元素需要过度，则需要使用：<code>&lt;transition-group&gt;</code>，且每个元素都要指定<code>key</code>值。</p>\n</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"vue脚手架配置代理服务器\"><a href=\"#vue脚手架配置代理服务器\" class=\"headerlink\" title=\"vue脚手架配置代理服务器\"></a>vue脚手架配置代理服务器</h2><h3 id=\"方法一\"><a href=\"#方法一\" class=\"headerlink\" title=\"方法一\"></a>方法一</h3><p>​    在vue.config.js中添加如下配置：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">devServer</span>:&#123;</span><br><span class=\"line\">  <span class=\"attr\">proxy</span>:<span class=\"string\">&quot;http://localhost:5000&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>说明：</p>\n<ol>\n<li>优点：配置简单，请求资源时直接发给前端（8080）即可。</li>\n<li>缺点：不能配置多个代理，不能灵活的控制请求是否走代理。</li>\n<li>工作方式：若按照上述配置代理，当请求了前端不存在的资源时，那么该请求会转发给服务器 （优先匹配前端资源）</li>\n</ol>\n<h3 id=\"方法二\"><a href=\"#方法二\" class=\"headerlink\" title=\"方法二\"></a>方法二</h3><p>​    编写vue.config.js配置具体代理规则：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">\t<span class=\"attr\">devServer</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">proxy</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">&#x27;/api1&#x27;</span>: &#123;<span class=\"comment\">// 匹配所有以 &#x27;/api1&#x27;开头的请求路径</span></span><br><span class=\"line\">        <span class=\"attr\">target</span>: <span class=\"string\">&#x27;http://localhost:5000&#x27;</span>,<span class=\"comment\">// 代理目标的基础路径</span></span><br><span class=\"line\">        <span class=\"attr\">changeOrigin</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">pathRewrite</span>: &#123;<span class=\"string\">&#x27;^/api1&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>&#125;</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      <span class=\"string\">&#x27;/api2&#x27;</span>: &#123;<span class=\"comment\">// 匹配所有以 &#x27;/api2&#x27;开头的请求路径</span></span><br><span class=\"line\">        <span class=\"attr\">target</span>: <span class=\"string\">&#x27;http://localhost:5001&#x27;</span>,<span class=\"comment\">// 代理目标的基础路径</span></span><br><span class=\"line\">        <span class=\"attr\">changeOrigin</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">pathRewrite</span>: &#123;<span class=\"string\">&#x27;^/api2&#x27;</span>: <span class=\"string\">&#x27;&#x27;</span>&#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">   changeOrigin设置为true时，服务器收到的请求头中的host为：localhost:5000</span></span><br><span class=\"line\"><span class=\"comment\">   changeOrigin设置为false时，服务器收到的请求头中的host为：localhost:8080</span></span><br><span class=\"line\"><span class=\"comment\">   changeOrigin默认值为true</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<p>说明：</p>\n<ol>\n<li>优点：可以配置多个代理，且可以灵活的控制请求是否走代理。</li>\n<li>缺点：配置略微繁琐，请求资源时必须加前缀。</li>\n</ol>\n<h2 id=\"插槽\"><a href=\"#插槽\" class=\"headerlink\" title=\"插槽\"></a>插槽</h2><ol>\n<li><p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信的方式，适用于 <strong style=\"color:red\">父组件 &#x3D;&#x3D;&#x3D;&gt; 子组件</strong> 。</p>\n</li>\n<li><p>分类：默认插槽、具名插槽、作用域插槽</p>\n</li>\n<li><p>使用方式：</p>\n<ol>\n<li><p>默认插槽：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">父组件中：</span><br><span class=\"line\">        &lt;Category&gt;</span><br><span class=\"line\">           &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class=\"line\">        &lt;/Category&gt;</span><br><span class=\"line\">子组件中：</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;div&gt;</span><br><span class=\"line\">               &lt;!-- 定义插槽 --&gt;</span><br><span class=\"line\">               &lt;slot&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>具名插槽：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">父组件中：</span><br><span class=\"line\">        &lt;Category&gt;</span><br><span class=\"line\">            &lt;template slot=&quot;center&quot;&gt;</span><br><span class=\"line\">              &lt;div&gt;html结构1&lt;/div&gt;</span><br><span class=\"line\">            &lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">            &lt;template v-slot:footer&gt;</span><br><span class=\"line\">               &lt;div&gt;html结构2&lt;/div&gt;</span><br><span class=\"line\">            &lt;/template&gt;</span><br><span class=\"line\">        &lt;/Category&gt;</span><br><span class=\"line\">子组件中：</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;div&gt;</span><br><span class=\"line\">               &lt;!-- 定义插槽 --&gt;</span><br><span class=\"line\">               &lt;slot name=&quot;center&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class=\"line\">               &lt;slot name=&quot;footer&quot;&gt;插槽默认内容...&lt;/slot&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>作用域插槽：</p>\n<ol>\n<li><p>理解：<span style=\"color:red\">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（games数据在Category组件中，但使用数据所遍历出来的结构由App组件决定）</p>\n</li>\n<li><p>具体编码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">父组件中：</span><br><span class=\"line\">\t\t&lt;Category&gt;</span><br><span class=\"line\">\t\t\t&lt;template scope=&quot;scopeData&quot;&gt;</span><br><span class=\"line\">\t\t\t\t&lt;!-- 生成的是ul列表 --&gt;</span><br><span class=\"line\">\t\t\t\t&lt;ul&gt;</span><br><span class=\"line\">\t\t\t\t\t&lt;li v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/li&gt;</span><br><span class=\"line\">\t\t\t\t&lt;/ul&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t&lt;/Category&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&lt;Category&gt;</span><br><span class=\"line\">\t\t\t&lt;template slot-scope=&quot;scopeData&quot;&gt;</span><br><span class=\"line\">\t\t\t\t&lt;!-- 生成的是h4标题 --&gt;</span><br><span class=\"line\">\t\t\t\t&lt;h4 v-for=&quot;g in scopeData.games&quot; :key=&quot;g&quot;&gt;&#123;&#123;g&#125;&#125;&lt;/h4&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t&lt;/Category&gt;</span><br><span class=\"line\">子组件中：</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;div&gt;</span><br><span class=\"line\">                &lt;slot :games=&quot;games&quot;&gt;&lt;/slot&gt;</span><br><span class=\"line\">            &lt;/div&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        &lt;script&gt;</span><br><span class=\"line\">            export default &#123;</span><br><span class=\"line\">                name:&#x27;Category&#x27;,</span><br><span class=\"line\">                props:[&#x27;title&#x27;],</span><br><span class=\"line\">                //数据在子组件自身</span><br><span class=\"line\">                data() &#123;</span><br><span class=\"line\">                    return &#123;</span><br><span class=\"line\">                        games:[&#x27;红色警戒&#x27;,&#x27;穿越火线&#x27;,&#x27;劲舞团&#x27;,&#x27;超级玛丽&#x27;]</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &lt;/script&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   </span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"Vuex\"><a href=\"#Vuex\" class=\"headerlink\" title=\"Vuex\"></a>Vuex</h2><h3 id=\"1-概念\"><a href=\"#1-概念\" class=\"headerlink\" title=\"1.概念\"></a>1.概念</h3><p>​        在Vue中实现集中式状态（数据）管理的一个Vue插件，对vue应用中多个组件的共享状态进行集中式的管理（读&#x2F;写），也是一种组件间通信的方式，且适用于任意组件间通信。</p>\n<h3 id=\"2-何时使用？\"><a href=\"#2-何时使用？\" class=\"headerlink\" title=\"2.何时使用？\"></a>2.何时使用？</h3><p>​        多个组件需要共享数据时</p>\n<h3 id=\"3-搭建vuex环境\"><a href=\"#3-搭建vuex环境\" class=\"headerlink\" title=\"3.搭建vuex环境\"></a>3.搭建vuex环境</h3><ol>\n<li><p>创建文件：<code>src/store/index.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//引入Vue核心库</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引入Vuex</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vuex</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//应用Vuex插件</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">use</span>(<span class=\"title class_\">Vuex</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//准备actions对象——响应组件中用户的动作</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> actions = &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">//准备mutations对象——修改state中的数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mutations = &#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">//准备state对象——保存具体的数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> state = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建并暴露store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">\tactions,</span><br><span class=\"line\">\tmutations,</span><br><span class=\"line\">\tstate</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>main.js</code>中创建vm时传入<code>store</code>配置项</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"><span class=\"comment\">//引入store</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./store&#x27;</span></span><br><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建vm</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Vue</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">el</span>:<span class=\"string\">&#x27;#app&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">render</span>: <span class=\"function\"><span class=\"params\">h</span> =&gt;</span> <span class=\"title function_\">h</span>(<span class=\"title class_\">App</span>),</span><br><span class=\"line\">\tstore</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"4-基本使用\"><a href=\"#4-基本使用\" class=\"headerlink\" title=\"4.基本使用\"></a>4.基本使用</h3><ol>\n<li><p>初始化数据、配置<code>actions</code>、配置<code>mutations</code>，操作文件<code>store.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//引入Vue核心库</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vue</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引入Vuex</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Vuex</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vuex&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引用Vuex</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">use</span>(<span class=\"title class_\">Vuex</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> actions = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//响应组件中加的动作</span></span><br><span class=\"line\">\t<span class=\"title function_\">jia</span>(<span class=\"params\">context,value</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(&#x27;actions中的jia被调用了&#x27;,miniStore,value)</span></span><br><span class=\"line\">\t\tcontext.<span class=\"title function_\">commit</span>(<span class=\"string\">&#x27;JIA&#x27;</span>,value)</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> mutations = &#123;</span><br><span class=\"line\">    <span class=\"comment\">//执行加</span></span><br><span class=\"line\">\t<span class=\"title function_\">JIA</span>(<span class=\"params\">state,value</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// console.log(&#x27;mutations中的JIA被调用了&#x27;,state,value)</span></span><br><span class=\"line\">\t\tstate.<span class=\"property\">sum</span> += value</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//初始化数据</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> state = &#123;</span><br><span class=\"line\">   <span class=\"attr\">sum</span>:<span class=\"number\">0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建并暴露store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">\tactions,</span><br><span class=\"line\">\tmutations,</span><br><span class=\"line\">\tstate,</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>组件中读取vuex中的数据：<code>$store.state.sum</code></p>\n</li>\n<li><p>组件中修改vuex中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;,数据)</code> 或 <code>$store.commit(&#39;mutations中的方法名&#39;,数据)</code></p>\n<blockquote>\n<p> 备注：若没有网络请求或其他业务逻辑，组件中也可以越过actions，即不写<code>dispatch</code>，直接编写<code>commit</code></p>\n</blockquote>\n</li>\n</ol>\n<h3 id=\"5-getters的使用\"><a href=\"#5-getters的使用\" class=\"headerlink\" title=\"5.getters的使用\"></a>5.getters的使用</h3><ol>\n<li><p>概念：当state中的数据需要经过加工后再使用时，可以使用getters加工。</p>\n</li>\n<li><p>在<code>store.js</code>中追加<code>getters</code>配置</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">......</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getters = &#123;</span><br><span class=\"line\">\t<span class=\"title function_\">bigSum</span>(<span class=\"params\">state</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> state.<span class=\"property\">sum</span> * <span class=\"number\">10</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建并暴露store</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">\tgetters</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>组件中读取数据：<code>$store.getters.bigSum</code></p>\n</li>\n</ol>\n<h3 id=\"6-四个map方法的使用\"><a href=\"#6-四个map方法的使用\" class=\"headerlink\" title=\"6.四个map方法的使用\"></a>6.四个map方法的使用</h3><ol>\n<li><p><strong>mapState方法：</strong>用于帮助我们映射<code>state</code>中的数据为计算属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//借助mapState生成计算属性：sum、school、subject（对象写法）</span></span><br><span class=\"line\">     ...<span class=\"title function_\">mapState</span>(&#123;<span class=\"attr\">sum</span>:<span class=\"string\">&#x27;sum&#x27;</span>,<span class=\"attr\">school</span>:<span class=\"string\">&#x27;school&#x27;</span>,<span class=\"attr\">subject</span>:<span class=\"string\">&#x27;subject&#x27;</span>&#125;),</span><br><span class=\"line\">         </span><br><span class=\"line\">    <span class=\"comment\">//借助mapState生成计算属性：sum、school、subject（数组写法）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapState</span>([<span class=\"string\">&#x27;sum&#x27;</span>,<span class=\"string\">&#x27;school&#x27;</span>,<span class=\"string\">&#x27;subject&#x27;</span>]),</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>mapGetters方法：</strong>用于帮助我们映射<code>getters</code>中的数据为计算属性</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">computed</span>: &#123;</span><br><span class=\"line\">    <span class=\"comment\">//借助mapGetters生成计算属性：bigSum（对象写法）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapGetters</span>(&#123;<span class=\"attr\">bigSum</span>:<span class=\"string\">&#x27;bigSum&#x27;</span>&#125;),</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//借助mapGetters生成计算属性：bigSum（数组写法）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapGetters</span>([<span class=\"string\">&#x27;bigSum&#x27;</span>])</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>mapActions方法：</strong>用于帮助我们生成与<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>的函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">methods</span>:&#123;</span><br><span class=\"line\">    <span class=\"comment\">//靠mapActions生成：incrementOdd、incrementWait（对象形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapActions</span>(&#123;<span class=\"attr\">incrementOdd</span>:<span class=\"string\">&#x27;jiaOdd&#x27;</span>,<span class=\"attr\">incrementWait</span>:<span class=\"string\">&#x27;jiaWait&#x27;</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//靠mapActions生成：incrementOdd、incrementWait（数组形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapActions</span>([<span class=\"string\">&#x27;jiaOdd&#x27;</span>,<span class=\"string\">&#x27;jiaWait&#x27;</span>])</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><strong>mapMutations方法：</strong>用于帮助我们生成与<code>mutations</code>对话的方法，即：包含<code>$store.commit(xxx)</code>的函数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">methods</span>:&#123;</span><br><span class=\"line\">    <span class=\"comment\">//靠mapActions生成：increment、decrement（对象形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapMutations</span>(&#123;<span class=\"attr\">increment</span>:<span class=\"string\">&#x27;JIA&#x27;</span>,<span class=\"attr\">decrement</span>:<span class=\"string\">&#x27;JIAN&#x27;</span>&#125;),</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//靠mapMutations生成：JIA、JIAN（对象形式）</span></span><br><span class=\"line\">    ...<span class=\"title function_\">mapMutations</span>([<span class=\"string\">&#x27;JIA&#x27;</span>,<span class=\"string\">&#x27;JIAN&#x27;</span>]),</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<blockquote>\n<p>备注：mapActions与mapMutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象。</p>\n</blockquote>\n<h3 id=\"7-模块化-命名空间\"><a href=\"#7-模块化-命名空间\" class=\"headerlink\" title=\"7.模块化+命名空间\"></a>7.模块化+命名空间</h3><ol>\n<li><p>目的：让代码更好维护，让多种数据分类更加明确。</p>\n</li>\n<li><p>修改<code>store.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> countAbout = &#123;</span><br><span class=\"line\">  <span class=\"attr\">namespaced</span>:<span class=\"literal\">true</span>,<span class=\"comment\">//开启命名空间</span></span><br><span class=\"line\">  <span class=\"attr\">state</span>:&#123;<span class=\"attr\">x</span>:<span class=\"number\">1</span>&#125;,</span><br><span class=\"line\">  <span class=\"attr\">mutations</span>: &#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">getters</span>: &#123;</span><br><span class=\"line\">    <span class=\"title function_\">bigSum</span>(<span class=\"params\">state</span>)&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> state.<span class=\"property\">sum</span> * <span class=\"number\">10</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> personAbout = &#123;</span><br><span class=\"line\">  <span class=\"attr\">namespaced</span>:<span class=\"literal\">true</span>,<span class=\"comment\">//开启命名空间</span></span><br><span class=\"line\">  <span class=\"attr\">state</span>:&#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">mutations</span>: &#123; ... &#125;,</span><br><span class=\"line\">  <span class=\"attr\">actions</span>: &#123; ... &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = <span class=\"keyword\">new</span> <span class=\"title class_\">Vuex</span>.<span class=\"title class_\">Store</span>(&#123;</span><br><span class=\"line\">  <span class=\"attr\">modules</span>: &#123;</span><br><span class=\"line\">    countAbout,</span><br><span class=\"line\">    personAbout</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中读取state数据：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接读取</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"property\">state</span>.<span class=\"property\">personAbout</span>.<span class=\"property\">list</span></span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapState读取：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapState</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,[<span class=\"string\">&#x27;sum&#x27;</span>,<span class=\"string\">&#x27;school&#x27;</span>,<span class=\"string\">&#x27;subject&#x27;</span>]),</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中读取getters数据：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接读取</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"property\">getters</span>[<span class=\"string\">&#x27;personAbout/firstPersonName&#x27;</span>]</span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapGetters读取：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapGetters</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,[<span class=\"string\">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中调用dispatch</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接dispatch</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"title function_\">dispatch</span>(<span class=\"string\">&#x27;personAbout/addPersonWang&#x27;</span>,person)</span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapActions：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapActions</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,&#123;<span class=\"attr\">incrementOdd</span>:<span class=\"string\">&#x27;jiaOdd&#x27;</span>,<span class=\"attr\">incrementWait</span>:<span class=\"string\">&#x27;jiaWait&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>开启命名空间后，组件中调用commit</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//方式一：自己直接commit</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$store</span>.<span class=\"title function_\">commit</span>(<span class=\"string\">&#x27;personAbout/ADD_PERSON&#x27;</span>,person)</span><br><span class=\"line\"><span class=\"comment\">//方式二：借助mapMutations：</span></span><br><span class=\"line\">...<span class=\"title function_\">mapMutations</span>(<span class=\"string\">&#x27;countAbout&#x27;</span>,&#123;<span class=\"attr\">increment</span>:<span class=\"string\">&#x27;JIA&#x27;</span>,<span class=\"attr\">decrement</span>:<span class=\"string\">&#x27;JIAN&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"路由\"><a href=\"#路由\" class=\"headerlink\" title=\"路由\"></a>路由</h2><ol>\n<li>理解： 一个路由（route）就是一组映射关系（key - value），多个路由需要路由器（router）进行管理。</li>\n<li>前端路由：key是路径，value是组件。</li>\n</ol>\n<h3 id=\"1-基本使用\"><a href=\"#1-基本使用\" class=\"headerlink\" title=\"1.基本使用\"></a>1.基本使用</h3><ol>\n<li><p>安装vue-router，命令：<code>npm i vue-router</code></p>\n</li>\n<li><p>应用插件：<code>Vue.use(VueRouter)</code></p>\n</li>\n<li><p>编写router配置项:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//引入VueRouter</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">VueRouter</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue-router&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">//引入Luyou 组件</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">About</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;../components/About&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"title class_\">Home</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;../components/Home&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//创建router实例对象，去管理一组一组的路由规则</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = <span class=\"keyword\">new</span> <span class=\"title class_\">VueRouter</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">routes</span>:[</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/about&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">About</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Home</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//暴露router</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> router</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>实现切换（active-class可配置高亮样式）</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>指定展示位置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"2-几个注意点\"><a href=\"#2-几个注意点\" class=\"headerlink\" title=\"2.几个注意点\"></a>2.几个注意点</h3><ol>\n<li>路由组件通常存放在<code>pages</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li>\n<li>通过切换，“隐藏”了的路由组件，默认是被销毁掉的，需要的时候再去挂载。</li>\n<li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息。</li>\n<li>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到。</li>\n</ol>\n<h3 id=\"3-多级路由（多级路由）\"><a href=\"#3-多级路由（多级路由）\" class=\"headerlink\" title=\"3.多级路由（多级路由）\"></a>3.多级路由（多级路由）</h3><ol>\n<li><p>配置路由规则，使用children配置项：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">routes</span>:[</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/about&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">About</span>,</span><br><span class=\"line\">\t&#125;,</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Home</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">children</span>:[ <span class=\"comment\">//通过children配置子级路由</span></span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;news&#x27;</span>, <span class=\"comment\">//此处一定不要写：/news</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">News</span></span><br><span class=\"line\">\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;message&#x27;</span>,<span class=\"comment\">//此处一定不要写：/message</span></span><br><span class=\"line\">\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Message</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t]</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>跳转（要写完整路径）：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;router-link to=&quot;/home/news&quot;&gt;News&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"4-路由的query参数\"><a href=\"#4-路由的query参数\" class=\"headerlink\" title=\"4.路由的query参数\"></a>4.路由的query参数</h3><ol>\n<li><p>传递参数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 跳转并携带query参数，to的字符串写法 --&gt;</span><br><span class=\"line\">&lt;router-link :to=&quot;/home/message/detail?id=666&amp;title=你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">&lt;!-- 跳转并携带query参数，to的对象写法 --&gt;</span><br><span class=\"line\">&lt;router-link </span><br><span class=\"line\">\t:to=&quot;&#123;</span><br><span class=\"line\">\t\tpath:&#x27;/home/message/detail&#x27;,</span><br><span class=\"line\">\t\tquery:&#123;</span><br><span class=\"line\">\t\t   id:666,</span><br><span class=\"line\">            title:&#x27;你好&#x27;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;&quot;</span><br><span class=\"line\">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>接收参数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$route.<span class=\"property\">query</span>.<span class=\"property\">id</span></span><br><span class=\"line\">$route.<span class=\"property\">query</span>.<span class=\"property\">title</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"5-命名路由\"><a href=\"#5-命名路由\" class=\"headerlink\" title=\"5.命名路由\"></a>5.命名路由</h3><ol>\n<li><p>作用：可以简化路由的跳转。</p>\n</li>\n<li><p>如何使用</p>\n<ol>\n<li><p>给路由命名：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/demo&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">component</span>:<span class=\"title class_\">Demo</span>,</span><br><span class=\"line\">\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;test&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Test</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">                      <span class=\"attr\">name</span>:<span class=\"string\">&#x27;hello&#x27;</span> <span class=\"comment\">//给路由命名</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;welcome&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Hello</span>,</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>简化跳转：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!--简化前，需要写完整的路径 --&gt;</span><br><span class=\"line\">&lt;router-link to=&quot;/demo/test/welcome&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--简化后，直接通过名字跳转 --&gt;</span><br><span class=\"line\">&lt;router-link :to=&quot;&#123;name:&#x27;hello&#x27;&#125;&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--简化写法配合传递参数 --&gt;</span><br><span class=\"line\">&lt;router-link </span><br><span class=\"line\">\t:to=&quot;&#123;</span><br><span class=\"line\">\t\tname:&#x27;hello&#x27;,</span><br><span class=\"line\">\t\tquery:&#123;</span><br><span class=\"line\">\t\t   id:666,</span><br><span class=\"line\">            title:&#x27;你好&#x27;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;&quot;</span><br><span class=\"line\">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ol>\n<h3 id=\"6-路由的params参数\"><a href=\"#6-路由的params参数\" class=\"headerlink\" title=\"6.路由的params参数\"></a>6.路由的params参数</h3><ol>\n<li><p>配置路由，声明接收params参数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;/home&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">component</span>:<span class=\"title class_\">Home</span>,</span><br><span class=\"line\">\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;news&#x27;</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">News</span></span><br><span class=\"line\">\t\t&#125;,</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Message</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">children</span>:[</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;detail/:id/:title&#x27;</span>, <span class=\"comment\">//使用占位符声明接收params参数</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"attr\">component</span>:<span class=\"title class_\">Detail</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t]</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>传递参数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 跳转并携带params参数，to的字符串写法 --&gt;</span><br><span class=\"line\">&lt;router-link :to=&quot;/home/message/detail/666/你好&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">&lt;!-- 跳转并携带params参数，to的对象写法 --&gt;</span><br><span class=\"line\">&lt;router-link </span><br><span class=\"line\">\t:to=&quot;&#123;</span><br><span class=\"line\">\t\tname:&#x27;xiangqing&#x27;,</span><br><span class=\"line\">\t\tparams:&#123;</span><br><span class=\"line\">\t\t   id:666,</span><br><span class=\"line\">            title:&#x27;你好&#x27;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;&quot;</span><br><span class=\"line\">&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>特别注意：路由携带params参数时，若使用to的对象写法，则不能使用path配置项，必须使用name配置！</p>\n</blockquote>\n</li>\n<li><p>接收参数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$route.<span class=\"property\">params</span>.<span class=\"property\">id</span></span><br><span class=\"line\">$route.<span class=\"property\">params</span>.<span class=\"property\">title</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"7-路由的props配置\"><a href=\"#7-路由的props配置\" class=\"headerlink\" title=\"7.路由的props配置\"></a>7.路由的props配置</h3><p>​    作用：让路由组件更方便的收到参数</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">path</span>:<span class=\"string\">&#x27;detail/:id&#x27;</span>,</span><br><span class=\"line\">\t<span class=\"attr\">component</span>:<span class=\"title class_\">Detail</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//第一种写法：props值为对象，该对象中所有的key-value的组合最终都会通过props传给Detail组件</span></span><br><span class=\"line\">\t<span class=\"comment\">// props:&#123;a:900&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">//第二种写法：props值为布尔值，布尔值为true，则把路由收到的所有params参数通过props传给Detail组件</span></span><br><span class=\"line\">\t<span class=\"comment\">// props:true</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//第三种写法：props值为函数，该函数返回的对象中每一组key-value都会通过props传给Detail组件</span></span><br><span class=\"line\">\t<span class=\"title function_\">props</span>(<span class=\"params\">route</span>)&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">id</span>:route.<span class=\"property\">query</span>.<span class=\"property\">id</span>,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">title</span>:route.<span class=\"property\">query</span>.<span class=\"property\">title</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-lt-router-link-gt-的replace属性\"><a href=\"#8-lt-router-link-gt-的replace属性\" class=\"headerlink\" title=\"8.&lt;router-link&gt;的replace属性\"></a>8.<code>&lt;router-link&gt;</code>的replace属性</h3><ol>\n<li>作用：控制路由跳转时操作浏览器历史记录的模式</li>\n<li>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>，<code>push</code>是追加历史记录，<code>replace</code>是替换当前记录。路由跳转时候默认为<code>push</code></li>\n<li>如何开启<code>replace</code>模式：<code>&lt;router-link replace .......&gt;News&lt;/router-link&gt;</code></li>\n</ol>\n<h3 id=\"9-编程式路由导航\"><a href=\"#9-编程式路由导航\" class=\"headerlink\" title=\"9.编程式路由导航\"></a>9.编程式路由导航</h3><ol>\n<li><p>作用：不借助<code>&lt;router-link&gt; </code>实现路由跳转，让路由跳转更加灵活</p>\n</li>\n<li><p>具体编码：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//$router的两个API</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">push</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">params</span>:&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">id</span>:xxx,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">title</span>:xxx</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">replace</span>(&#123;</span><br><span class=\"line\">\t<span class=\"attr\">name</span>:<span class=\"string\">&#x27;xiangqing&#x27;</span>,</span><br><span class=\"line\">\t\t<span class=\"attr\">params</span>:&#123;</span><br><span class=\"line\">\t\t\t<span class=\"attr\">id</span>:xxx,</span><br><span class=\"line\">\t\t\t<span class=\"attr\">title</span>:xxx</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">forward</span>() <span class=\"comment\">//前进</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">back</span>() <span class=\"comment\">//后退</span></span><br><span class=\"line\"><span class=\"variable language_\">this</span>.<span class=\"property\">$router</span>.<span class=\"title function_\">go</span>() <span class=\"comment\">//可前进也可后退</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"10-缓存路由组件\"><a href=\"#10-缓存路由组件\" class=\"headerlink\" title=\"10.缓存路由组件\"></a>10.缓存路由组件</h3><ol>\n<li><p>作用：让不展示的路由组件保持挂载，不被销毁。</p>\n</li>\n<li><p>具体编码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;keep-alive include=&quot;News&quot;&gt; </span><br><span class=\"line\">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class=\"line\">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"11-两个新的生命周期钩子\"><a href=\"#11-两个新的生命周期钩子\" class=\"headerlink\" title=\"11.两个新的生命周期钩子\"></a>11.两个新的生命周期钩子</h3><ol>\n<li>作用：路由组件所独有的两个钩子，用于捕获路由组件的激活状态。</li>\n<li>具体名字：<ol>\n<li><code>activated</code>路由组件被激活时触发。</li>\n<li><code>deactivated</code>路由组件失活时触发。</li>\n</ol>\n</li>\n</ol>\n<h3 id=\"12-路由守卫\"><a href=\"#12-路由守卫\" class=\"headerlink\" title=\"12.路由守卫\"></a>12.路由守卫</h3><ol>\n<li><p>作用：对路由进行权限控制</p>\n</li>\n<li><p>分类：全局守卫、独享守卫、组件内守卫</p>\n</li>\n<li><p>全局守卫:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//全局前置守卫：初始化时执行、每次路由切换前执行</span></span><br><span class=\"line\">router.<span class=\"title function_\">beforeEach</span>(<span class=\"function\">(<span class=\"params\">to,<span class=\"keyword\">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;beforeEach&#x27;</span>,to,<span class=\"keyword\">from</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(to.<span class=\"property\">meta</span>.<span class=\"property\">isAuth</span>)&#123; <span class=\"comment\">//判断当前路由是否需要进行权限控制</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&#x27;school&#x27;</span>) === <span class=\"string\">&#x27;atguigu&#x27;</span>)&#123; <span class=\"comment\">//权限控制的具体规则</span></span><br><span class=\"line\">\t\t\t<span class=\"title function_\">next</span>() <span class=\"comment\">//放行</span></span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;暂无权限查看&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"title function_\">next</span>() <span class=\"comment\">//放行</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//全局后置守卫：初始化时执行、每次路由切换后执行</span></span><br><span class=\"line\">router.<span class=\"title function_\">afterEach</span>(<span class=\"function\">(<span class=\"params\">to,<span class=\"keyword\">from</span></span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;afterEach&#x27;</span>,to,<span class=\"keyword\">from</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(to.<span class=\"property\">meta</span>.<span class=\"property\">title</span>)&#123; </span><br><span class=\"line\">\t\t<span class=\"variable language_\">document</span>.<span class=\"property\">title</span> = to.<span class=\"property\">meta</span>.<span class=\"property\">title</span> <span class=\"comment\">//修改网页的title</span></span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"variable language_\">document</span>.<span class=\"property\">title</span> = <span class=\"string\">&#x27;vue_test&#x27;</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>独享守卫:</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">beforeEnter</span>(<span class=\"params\">to,<span class=\"keyword\">from</span>,next</span>)&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;beforeEnter&#x27;</span>,to,<span class=\"keyword\">from</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(to.<span class=\"property\">meta</span>.<span class=\"property\">isAuth</span>)&#123; <span class=\"comment\">//判断当前路由是否需要进行权限控制</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span>(<span class=\"variable language_\">localStorage</span>.<span class=\"title function_\">getItem</span>(<span class=\"string\">&#x27;school&#x27;</span>) === <span class=\"string\">&#x27;atguigu&#x27;</span>)&#123;</span><br><span class=\"line\">\t\t\t<span class=\"title function_\">next</span>()</span><br><span class=\"line\">\t\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"title function_\">alert</span>(<span class=\"string\">&#x27;暂无权限查看&#x27;</span>)</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// next(&#123;name:&#x27;guanyu&#x27;&#125;)</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">\t\t<span class=\"title function_\">next</span>()</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>组件内守卫：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//进入守卫：通过路由规则，进入该组件时被调用</span></span><br><span class=\"line\">beforeRouteEnter (to, <span class=\"keyword\">from</span>, next) &#123;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\"><span class=\"comment\">//离开守卫：通过路由规则，离开该组件时被调用</span></span><br><span class=\"line\">beforeRouteLeave (to, <span class=\"keyword\">from</span>, next) &#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"13-路由器的两种工作模式\"><a href=\"#13-路由器的两种工作模式\" class=\"headerlink\" title=\"13.路由器的两种工作模式\"></a>13.路由器的两种工作模式</h3><ol>\n<li><p>对于一个url来说，什么是hash值？—— #及其后面的内容就是hash值。</p>\n</li>\n<li><p>hash值不会包含在 HTTP 请求中，即：hash值不会带给服务器。</p>\n</li>\n<li><p>hash模式：</p>\n<ol>\n<li>地址中永远带着#号，不美观 。</li>\n<li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法。</li>\n<li>兼容性较好。</li>\n</ol>\n</li>\n<li><p>history模式：</p>\n<ol>\n<li>地址干净，美观 。</li>\n<li>兼容性和hash模式相比略差。</li>\n<li>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题。</li>\n</ol>\n</li>\n</ol>\n"},{"title":"vue3快速上手","date":"2022-04-06T02:44:32.000Z","_content":"\n# Vue3快速上手\n\n<img src=\"https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png\" style=\"width:200px\" />\n\n\n\n## 1.Vue3简介\n\n- 2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）\n- 耗时2年多、[2600+次提交](https://github.com/vuejs/vue-next/graphs/commit-activity)、[30+个RFC](https://github.com/vuejs/rfcs/tree/master/active-rfcs)、[600+次PR](https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+)、[99位贡献者](https://github.com/vuejs/vue-next/graphs/contributors) \n- github上的tags地址：https://github.com/vuejs/vue-next/releases/tag/v3.0.0\n\n## 2.Vue3带来了什么\n\n### 1.性能的提升\n\n- 打包大小减少41%\n\n- 初次渲染快55%, 更新渲染快133%\n\n- 内存减少54%\n\n  ......\n\n### 2.源码的升级\n\n- 使用Proxy代替defineProperty实现响应式\n\n- 重写虚拟DOM的实现和Tree-Shaking\n\n  ......\n\n### 3.拥抱TypeScript\n\n- Vue3可以更好的支持TypeScript\n\n### 4.新的特性\n\n1. Composition API（组合API）\n\n   - setup配置\n   - ref与reactive\n   - watch与watchEffect\n   - provide与inject\n   - ......\n2. 新的内置组件\n   - Fragment \n   - Teleport\n   - Suspense\n3. 其他改变\n\n   - 新的生命周期钩子\n   - data 选项应始终被声明为一个函数\n   - 移除keyCode支持作为 v-on 的修饰符\n   - ......\n\n# 一、创建Vue3.0工程\n\n## 1.使用 vue-cli 创建\n\n官方文档：https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create\n\n```bash\n## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上\nvue --version\n## 安装或者升级你的@vue/cli\nnpm install -g @vue/cli\n## 创建\nvue create vue_test\n## 启动\ncd vue_test\nnpm run serve\n```\n\n## 2.使用 vite 创建\n\n官方文档：https://v3.cn.vuejs.org/guide/installation.html#vite\n\nvite官网：https://vitejs.cn\n\n- 什么是vite？—— 新一代前端构建工具。\n- 优势如下：\n  - 开发环境中，无需打包操作，可快速的冷启动。\n  - 轻量快速的热重载（HMR）。\n  - 真正的按需编译，不再等待整个应用编译完成。\n- 传统构建 与 vite构建对比图\n\n<img src=\"https://cn.vitejs.dev/assets/bundler.37740380.png\" style=\"width:500px;height:280px;float:left\" /><img src=\"https://cn.vitejs.dev/assets/esm.3070012d.png\" style=\"width:480px;height:280px\" />\n\n```bash\n## 创建工程\nnpm init vite-app <project-name>\n## 进入工程目录\ncd <project-name>\n## 安装依赖\nnpm install\n## 运行\nnpm run dev\n```\n\n# 二、常用 Composition API\n\n官方文档: https://v3.cn.vuejs.org/guide/composition-api-introduction.html\n\n## 1.拉开序幕的setup\n\n1. 理解：Vue3.0中一个新的配置项，值为一个函数。\n2. setup是所有<strong style=\"color:#DD5145\">Composition API（组合API）</strong><i style=\"color:gray;font-weight:bold\">“ 表演的舞台 ”</i>。\n3. 组件中所用到的：数据、方法等等，均要配置在setup中。\n4. setup函数的两种返回值：\n   1. 若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）\n   2. <span style=\"color:#aad\">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span>\n5. 注意点：\n   1. 尽量不要与Vue2.x配置混用\n      - Vue2.x配置（data、methos、computed...）中<strong style=\"color:#DD5145\">可以访问到</strong>setup中的属性、方法。\n      - 但在setup中<strong style=\"color:#DD5145\">不能访问到</strong>Vue2.x配置（data、methos、computed...）。\n      - 如果有重名, setup优先。\n   2. setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）\n\n##  2.ref函数\n\n- 作用: 定义一个响应式的数据\n- 语法: ```const xxx = ref(initValue)``` \n  - 创建一个包含响应式数据的<strong style=\"color:#DD5145\">引用对象（reference对象，简称ref对象）</strong>。\n  - JS中操作数据： ```xxx.value```\n  - 模板中读取数据: 不需要.value，直接：```<div>{{xxx}}</div>```\n- 备注：\n  - 接收的数据可以是：基本类型、也可以是对象类型。\n  - 基本类型的数据：响应式依然是靠``Object.defineProperty()``的```get```与```set```完成的。\n  - 对象类型的数据：内部 <i style=\"color:gray;font-weight:bold\">“ 求助 ”</i> 了Vue3.0中的一个新函数—— ```reactive```函数。\n\n## 3.reactive函数\n\n- 作用: 定义一个<strong style=\"color:#DD5145\">对象类型</strong>的响应式数据（基本类型不要用它，要用```ref```函数）\n- 语法：```const 代理对象= reactive(源对象)```接收一个对象（或数组），返回一个<strong style=\"color:#DD5145\">代理对象（Proxy的实例对象，简称proxy对象）</strong>\n- reactive定义的响应式数据是“深层次的”。\n- 内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。\n\n## 4.Vue3.0中的响应式原理\n\n### vue2.x的响应式\n\n- 实现原理：\n\n  - 对象类型：通过```Object.defineProperty()```对属性的读取、修改进行拦截（数据劫持）。\n\n  - 数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。\n\n    ```js\n    Object.defineProperty(data, 'count', {\n        get () {}, \n        set () {}\n    })\n    ```\n\n- 存在问题：\n\n  - 新增属性、删除属性, 界面不会更新。\n  - 直接通过下标修改数组, 界面不会自动更新。\n\n### Vue3.0的响应式\n\n- 实现原理: \n\n  - 通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。\n\n  - 通过Reflect（反射）:  对源对象的属性进行操作。\n\n  - MDN文档中描述的Proxy与Reflect：\n\n    - Proxy：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\n\n    - Reflect：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect\n\n      ```js\n      new Proxy(data, {\n      \t// 拦截读取属性值\n          get (target, prop) {\n          \treturn Reflect.get(target, prop)\n          },\n          // 拦截设置属性值或添加新属性\n          set (target, prop, value) {\n          \treturn Reflect.set(target, prop, value)\n          },\n          // 拦截删除属性\n          deleteProperty (target, prop) {\n          \treturn Reflect.deleteProperty(target, prop)\n          }\n      })\n      \n      proxy.name = 'tom'   \n      ```\n\n## 5.reactive对比ref\n\n-  从定义数据角度对比：\n   -  ref用来定义：<strong style=\"color:#DD5145\">基本类型数据</strong>。\n   -  reactive用来定义：<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>。\n   -  备注：ref也可以用来定义<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>, 它内部会自动通过```reactive```转为<strong style=\"color:#DD5145\">代理对象</strong>。\n-  从原理角度对比：\n   -  ref通过``Object.defineProperty()``的```get```与```set```来实现响应式（数据劫持）。\n   -  reactive通过使用<strong style=\"color:#DD5145\">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style=\"color:#DD5145\">Reflect</strong>操作<strong style=\"color:orange\">源对象</strong>内部的数据。\n-  从使用角度对比：\n   -  ref定义的数据：操作数据<strong style=\"color:#DD5145\">需要</strong>```.value```，读取数据时模板中直接读取<strong style=\"color:#DD5145\">不需要</strong>```.value```。\n   -  reactive定义的数据：操作数据与读取数据：<strong style=\"color:#DD5145\">均不需要</strong>```.value```。\n\n## 6.setup的两个注意点\n\n- setup执行的时机\n  - 在beforeCreate之前执行一次，this是undefined。\n\n- setup的参数\n  - props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。\n  - context：上下文对象\n    - attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 ```this.$attrs```。\n    - slots: 收到的插槽内容, 相当于 ```this.$slots```。\n    - emit: 分发自定义事件的函数, 相当于 ```this.$emit```。\n\n\n## 7.计算属性与监视\n\n### 1.computed函数\n\n- 与Vue2.x中computed配置功能一致\n\n- 写法\n\n  ```js\n  import {computed} from 'vue'\n  \n  setup(){\n      ...\n  \t//计算属性——简写\n      let fullName = computed(()=>{\n          return person.firstName + '-' + person.lastName\n      })\n      //计算属性——完整\n      let fullName = computed({\n          get(){\n              return person.firstName + '-' + person.lastName\n          },\n          set(value){\n              const nameArr = value.split('-')\n              person.firstName = nameArr[0]\n              person.lastName = nameArr[1]\n          }\n      })\n  }\n  ```\n\n### 2.watch函数\n\n- 与Vue2.x中watch配置功能一致\n\n- 两个小“坑”：\n\n  - 监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。\n  - 监视reactive定义的响应式数据中某个属性时：deep配置有效。\n\n  ```js\n  //情况一：监视ref定义的响应式数据\n  watch(sum,(newValue,oldValue)=>{\n  \tconsole.log('sum变化了',newValue,oldValue)\n  },{immediate:true})\n  \n  //情况二：监视多个ref定义的响应式数据\n  watch([sum,msg],(newValue,oldValue)=>{\n  \tconsole.log('sum或msg变化了',newValue,oldValue)\n  }) \n  \n  /* 情况三：监视reactive定义的响应式数据\n  \t\t\t若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！\n  \t\t\t若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 \n  */\n  watch(person,(newValue,oldValue)=>{\n  \tconsole.log('person变化了',newValue,oldValue)\n  },{immediate:true,deep:false}) //此处的deep配置不再奏效\n  \n  //情况四：监视reactive定义的响应式数据中的某个属性\n  watch(()=>person.job,(newValue,oldValue)=>{\n  \tconsole.log('person的job变化了',newValue,oldValue)\n  },{immediate:true,deep:true}) \n  \n  //情况五：监视reactive定义的响应式数据中的某些属性\n  watch([()=>person.job,()=>person.name],(newValue,oldValue)=>{\n  \tconsole.log('person的job变化了',newValue,oldValue)\n  },{immediate:true,deep:true})\n  \n  //特殊情况\n  watch(()=>person.job,(newValue,oldValue)=>{\n      console.log('person的job变化了',newValue,oldValue)\n  },{deep:true}) //此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效\n  ```\n\n### 3.watchEffect函数\n\n- watch的套路是：既要指明监视的属性，也要指明监视的回调。\n\n- watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。\n\n- watchEffect有点像computed：\n\n  - 但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。\n  - 而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。\n\n  ```js\n  //watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。\n  watchEffect(()=>{\n      const x1 = sum.value\n      const x2 = person.age\n      console.log('watchEffect配置的回调执行了')\n  })\n  ```\n\n## 8.生命周期\n\n<div style=\"border:1px solid black;width:380px;float:left;margin-right:20px;\"><strong>vue2.x的生命周期</strong><img src=\"https://cn.vuejs.org/images/lifecycle.png\" alt=\"lifecycle_2\" style=\"zoom:33%;width:1200px\" /></div><div style=\"border:1px solid black;width:510px;height:985px;float:left\"><strong>vue3.0的生命周期</strong><img src=\"https://v3.cn.vuejs.org/images/lifecycle.svg\" alt=\"lifecycle_2\" style=\"zoom:33%;width:2500px\" /></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1\n\n- Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：\n  - ```beforeDestroy```改名为 ```beforeUnmount```\n  - ```destroyed```改名为 ```unmounted```\n- Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：\n  - `beforeCreate`===>`setup()`\n  - `created`=======>`setup()`\n  - `beforeMount` ===>`onBeforeMount`\n  - `mounted`=======>`onMounted`\n  - `beforeUpdate`===>`onBeforeUpdate`\n  - `updated` =======>`onUpdated`\n  - `beforeUnmount` ==>`onBeforeUnmount`\n  - `unmounted` =====>`onUnmounted`\n\n## 9.自定义hook函数\n\n- 什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。\n\n- 类似于vue2.x中的mixin。\n\n- 自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。\n\n\n\n## 10.toRef\n\n- 作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。\n- 语法：```const name = toRef(person,'name')```\n- 应用:   要将响应式对象中的某个属性单独提供给外部使用时。\n\n\n- 扩展：```toRefs``` 与```toRef```功能一致，但可以批量创建多个 ref 对象，语法：```toRefs(person)```\n\n\n# 三、其它 Composition API\n\n## 1.shallowReactive 与 shallowRef\n\n- shallowReactive：只处理对象最外层属性的响应式（浅响应式）。\n- shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。\n\n- 什么时候使用?\n  -  如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 ===> shallowReactive。\n  -  如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 ===> shallowRef。\n\n## 2.readonly 与 shallowReadonly\n\n- readonly: 让一个响应式数据变为只读的（深只读）。\n- shallowReadonly：让一个响应式数据变为只读的（浅只读）。\n- 应用场景: 不希望数据被修改时。\n\n## 3.toRaw 与 markRaw\n\n- toRaw：\n  - 作用：将一个由```reactive```生成的<strong style=\"color:orange\">响应式对象</strong>转为<strong style=\"color:orange\">普通对象</strong>。\n  - 使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。\n- markRaw：\n  - 作用：标记一个对象，使其永远不会再成为响应式对象。\n  - 应用场景:\n    1. 有些值不应被设置为响应式的，例如复杂的第三方类库等。\n    2. 当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。\n\n## 4.customRef\n\n- 作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。\n\n- 实现防抖效果：\n\n  ```vue\n  <template>\n  \t<input type=\"text\" v-model=\"keyword\">\n  \t<h3>{{keyword}}</h3>\n  </template>\n  \n  <script>\n  \timport {ref,customRef} from 'vue'\n  \texport default {\n  \t\tname:'Demo',\n  \t\tsetup(){\n  \t\t\t// let keyword = ref('hello') //使用Vue准备好的内置ref\n  \t\t\t//自定义一个myRef\n  \t\t\tfunction myRef(value,delay){\n  \t\t\t\tlet timer\n  \t\t\t\t//通过customRef去实现自定义\n  \t\t\t\treturn customRef((track,trigger)=>{\n  \t\t\t\t\treturn{\n  \t\t\t\t\t\tget(){\n  \t\t\t\t\t\t\ttrack() //告诉Vue这个value值是需要被“追踪”的\n  \t\t\t\t\t\t\treturn value\n  \t\t\t\t\t\t},\n  \t\t\t\t\t\tset(newValue){\n  \t\t\t\t\t\t\tclearTimeout(timer)\n  \t\t\t\t\t\t\ttimer = setTimeout(()=>{\n  \t\t\t\t\t\t\t\tvalue = newValue\n  \t\t\t\t\t\t\t\ttrigger() //告诉Vue去更新界面\n  \t\t\t\t\t\t\t},delay)\n  \t\t\t\t\t\t}\n  \t\t\t\t\t}\n  \t\t\t\t})\n  \t\t\t}\n  \t\t\tlet keyword = myRef('hello',500) //使用程序员自定义的ref\n  \t\t\treturn {\n  \t\t\t\tkeyword\n  \t\t\t}\n  \t\t}\n  \t}\n  </script>\n  ```\n\n  \n\n## 5.provide 与 inject\n\n<img src=\"https://v3.cn.vuejs.org/images/components_provide.png\" style=\"width:300px\" />\n\n- 作用：实现<strong style=\"color:#DD5145\">祖与后代组件间</strong>通信\n\n- 套路：父组件有一个 `provide` 选项来提供数据，后代组件有一个 `inject` 选项来开始使用这些数据\n\n- 具体写法：\n\n  1. 祖组件中：\n\n     ```js\n     setup(){\n     \t......\n         let car = reactive({name:'奔驰',price:'40万'})\n         provide('car',car)\n         ......\n     }\n     ```\n\n  2. 后代组件中：\n\n     ```js\n     setup(props,context){\n     \t......\n         const car = inject('car')\n         return {car}\n     \t......\n     }\n     ```\n\n## 6.响应式数据的判断\n\n- isRef: 检查一个值是否为一个 ref 对象\n- isReactive: 检查一个对象是否是由 `reactive` 创建的响应式代理\n- isReadonly: 检查一个对象是否是由 `readonly` 创建的只读代理\n- isProxy: 检查一个对象是否是由 `reactive` 或者 `readonly` 方法创建的代理\n\n# 四、Composition API 的优势\n\n## 1.Options API 存在的问题\n\n使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。\n\n<div style=\"width:600px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image\" style=\"width:600px;float:left\" />\n</div>\n<div style=\"width:300px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image\" style=\"zoom:50%;width:560px;left\" /> \n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## 2.Composition API 的优势\n\n我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。\n\n<div style=\"width:500px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n<div style=\"width:430px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# 五、新的组件\n\n## 1.Fragment\n\n- 在Vue2中: 组件必须有一个根标签\n- 在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中\n- 好处: 减少标签层级, 减小内存占用\n\n## 2.Teleport\n\n- 什么是Teleport？—— `Teleport` 是一种能够将我们的<strong style=\"color:#DD5145\">组件html结构</strong>移动到指定位置的技术。\n\n  ```vue\n  <teleport to=\"移动位置\">\n  \t<div v-if=\"isShow\" class=\"mask\">\n  \t\t<div class=\"dialog\">\n  \t\t\t<h3>我是一个弹窗</h3>\n  \t\t\t<button @click=\"isShow = false\">关闭弹窗</button>\n  \t\t</div>\n  \t</div>\n  </teleport>\n  ```\n\n## 3.Suspense\n\n- 等待异步组件时渲染一些额外内容，让应用有更好的用户体验\n\n- 使用步骤：\n\n  - 异步引入组件\n\n    ```js\n    import {defineAsyncComponent} from 'vue'\n    const Child = defineAsyncComponent(()=>import('./components/Child.vue'))\n    ```\n\n  - 使用```Suspense```包裹组件，并配置好```default``` 与 ```fallback```\n\n    ```vue\n    <template>\n    \t<div class=\"app\">\n    \t\t<h3>我是App组件</h3>\n    \t\t<Suspense>\n    \t\t\t<template v-slot:default>\n    \t\t\t\t<Child/>\n    \t\t\t</template>\n    \t\t\t<template v-slot:fallback>\n    \t\t\t\t<h3>加载中.....</h3>\n    \t\t\t</template>\n    \t\t</Suspense>\n    \t</div>\n    </template>\n    ```\n\n# 六、其他\n\n## 1.全局API的转移\n\n- Vue 2.x 有许多全局 API 和配置。\n\n  - 例如：注册全局组件、注册全局指令等。\n\n    ```js\n    //注册全局组件\n    Vue.component('MyButton', {\n      data: () => ({\n        count: 0\n      }),\n      template: '<button @click=\"count++\">Clicked {{ count }} times.</button>'\n    })\n    \n    //注册全局指令\n    Vue.directive('focus', {\n      inserted: el => el.focus()\n    }\n    ```\n\n- Vue3.0中对这些API做出了调整：\n\n  - 将全局的API，即：```Vue.xxx```调整到应用实例（```app```）上\n\n    | 2.x 全局 API（```Vue```） | 3.x 实例 API (`app`)                        |\n    | ------------------------- | ------------------------------------------- |\n    | Vue.config.xxxx           | app.config.xxxx                             |\n    | Vue.config.productionTip  | <strong style=\"color:#DD5145\">移除</strong> |\n    | Vue.component             | app.component                               |\n    | Vue.directive             | app.directive                               |\n    | Vue.mixin                 | app.mixin                                   |\n    | Vue.use                   | app.use                                     |\n    | Vue.prototype             | app.config.globalProperties                 |\n\n## 2.其他改变\n\n- data选项应始终被声明为一个函数。\n\n- 过度类名的更改：\n\n  - Vue2.x写法\n\n    ```css\n    .v-enter,\n    .v-leave-to {\n      opacity: 0;\n    }\n    .v-leave,\n    .v-enter-to {\n      opacity: 1;\n    }\n    ```\n\n  - Vue3.x写法\n\n    ```css\n    .v-enter-from,\n    .v-leave-to {\n      opacity: 0;\n    }\n    \n    .v-leave-from,\n    .v-enter-to {\n      opacity: 1;\n    }\n    ```\n\n- <strong style=\"color:#DD5145\">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持```config.keyCodes```\n\n- <strong style=\"color:#DD5145\">移除</strong>```v-on.native```修饰符\n\n  - 父组件中绑定事件\n\n    ```vue\n    <my-component\n      v-on:close=\"handleComponentEvent\"\n      v-on:click=\"handleNativeClickEvent\"\n    />\n    ```\n\n  - 子组件中声明自定义事件\n\n    ```vue\n    <script>\n      export default {\n        emits: ['close']\n      }\n    </script>\n    ```\n\n- <strong style=\"color:#DD5145\">移除</strong>过滤器（filter）\n\n  > 过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。\n\n- ......\n","source":"_posts/vue3快速上手.md","raw":"---\ntitle: vue3快速上手\ndate: 2022-04-06 10:44:32\ntags: \thexo vue3\n---\n\n# Vue3快速上手\n\n<img src=\"https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png\" style=\"width:200px\" />\n\n\n\n## 1.Vue3简介\n\n- 2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）\n- 耗时2年多、[2600+次提交](https://github.com/vuejs/vue-next/graphs/commit-activity)、[30+个RFC](https://github.com/vuejs/rfcs/tree/master/active-rfcs)、[600+次PR](https://github.com/vuejs/vue-next/pulls?q=is%3Apr+is%3Amerged+-author%3Aapp%2Fdependabot-preview+)、[99位贡献者](https://github.com/vuejs/vue-next/graphs/contributors) \n- github上的tags地址：https://github.com/vuejs/vue-next/releases/tag/v3.0.0\n\n## 2.Vue3带来了什么\n\n### 1.性能的提升\n\n- 打包大小减少41%\n\n- 初次渲染快55%, 更新渲染快133%\n\n- 内存减少54%\n\n  ......\n\n### 2.源码的升级\n\n- 使用Proxy代替defineProperty实现响应式\n\n- 重写虚拟DOM的实现和Tree-Shaking\n\n  ......\n\n### 3.拥抱TypeScript\n\n- Vue3可以更好的支持TypeScript\n\n### 4.新的特性\n\n1. Composition API（组合API）\n\n   - setup配置\n   - ref与reactive\n   - watch与watchEffect\n   - provide与inject\n   - ......\n2. 新的内置组件\n   - Fragment \n   - Teleport\n   - Suspense\n3. 其他改变\n\n   - 新的生命周期钩子\n   - data 选项应始终被声明为一个函数\n   - 移除keyCode支持作为 v-on 的修饰符\n   - ......\n\n# 一、创建Vue3.0工程\n\n## 1.使用 vue-cli 创建\n\n官方文档：https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create\n\n```bash\n## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上\nvue --version\n## 安装或者升级你的@vue/cli\nnpm install -g @vue/cli\n## 创建\nvue create vue_test\n## 启动\ncd vue_test\nnpm run serve\n```\n\n## 2.使用 vite 创建\n\n官方文档：https://v3.cn.vuejs.org/guide/installation.html#vite\n\nvite官网：https://vitejs.cn\n\n- 什么是vite？—— 新一代前端构建工具。\n- 优势如下：\n  - 开发环境中，无需打包操作，可快速的冷启动。\n  - 轻量快速的热重载（HMR）。\n  - 真正的按需编译，不再等待整个应用编译完成。\n- 传统构建 与 vite构建对比图\n\n<img src=\"https://cn.vitejs.dev/assets/bundler.37740380.png\" style=\"width:500px;height:280px;float:left\" /><img src=\"https://cn.vitejs.dev/assets/esm.3070012d.png\" style=\"width:480px;height:280px\" />\n\n```bash\n## 创建工程\nnpm init vite-app <project-name>\n## 进入工程目录\ncd <project-name>\n## 安装依赖\nnpm install\n## 运行\nnpm run dev\n```\n\n# 二、常用 Composition API\n\n官方文档: https://v3.cn.vuejs.org/guide/composition-api-introduction.html\n\n## 1.拉开序幕的setup\n\n1. 理解：Vue3.0中一个新的配置项，值为一个函数。\n2. setup是所有<strong style=\"color:#DD5145\">Composition API（组合API）</strong><i style=\"color:gray;font-weight:bold\">“ 表演的舞台 ”</i>。\n3. 组件中所用到的：数据、方法等等，均要配置在setup中。\n4. setup函数的两种返回值：\n   1. 若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）\n   2. <span style=\"color:#aad\">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span>\n5. 注意点：\n   1. 尽量不要与Vue2.x配置混用\n      - Vue2.x配置（data、methos、computed...）中<strong style=\"color:#DD5145\">可以访问到</strong>setup中的属性、方法。\n      - 但在setup中<strong style=\"color:#DD5145\">不能访问到</strong>Vue2.x配置（data、methos、computed...）。\n      - 如果有重名, setup优先。\n   2. setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）\n\n##  2.ref函数\n\n- 作用: 定义一个响应式的数据\n- 语法: ```const xxx = ref(initValue)``` \n  - 创建一个包含响应式数据的<strong style=\"color:#DD5145\">引用对象（reference对象，简称ref对象）</strong>。\n  - JS中操作数据： ```xxx.value```\n  - 模板中读取数据: 不需要.value，直接：```<div>{{xxx}}</div>```\n- 备注：\n  - 接收的数据可以是：基本类型、也可以是对象类型。\n  - 基本类型的数据：响应式依然是靠``Object.defineProperty()``的```get```与```set```完成的。\n  - 对象类型的数据：内部 <i style=\"color:gray;font-weight:bold\">“ 求助 ”</i> 了Vue3.0中的一个新函数—— ```reactive```函数。\n\n## 3.reactive函数\n\n- 作用: 定义一个<strong style=\"color:#DD5145\">对象类型</strong>的响应式数据（基本类型不要用它，要用```ref```函数）\n- 语法：```const 代理对象= reactive(源对象)```接收一个对象（或数组），返回一个<strong style=\"color:#DD5145\">代理对象（Proxy的实例对象，简称proxy对象）</strong>\n- reactive定义的响应式数据是“深层次的”。\n- 内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。\n\n## 4.Vue3.0中的响应式原理\n\n### vue2.x的响应式\n\n- 实现原理：\n\n  - 对象类型：通过```Object.defineProperty()```对属性的读取、修改进行拦截（数据劫持）。\n\n  - 数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。\n\n    ```js\n    Object.defineProperty(data, 'count', {\n        get () {}, \n        set () {}\n    })\n    ```\n\n- 存在问题：\n\n  - 新增属性、删除属性, 界面不会更新。\n  - 直接通过下标修改数组, 界面不会自动更新。\n\n### Vue3.0的响应式\n\n- 实现原理: \n\n  - 通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。\n\n  - 通过Reflect（反射）:  对源对象的属性进行操作。\n\n  - MDN文档中描述的Proxy与Reflect：\n\n    - Proxy：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\n\n    - Reflect：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect\n\n      ```js\n      new Proxy(data, {\n      \t// 拦截读取属性值\n          get (target, prop) {\n          \treturn Reflect.get(target, prop)\n          },\n          // 拦截设置属性值或添加新属性\n          set (target, prop, value) {\n          \treturn Reflect.set(target, prop, value)\n          },\n          // 拦截删除属性\n          deleteProperty (target, prop) {\n          \treturn Reflect.deleteProperty(target, prop)\n          }\n      })\n      \n      proxy.name = 'tom'   \n      ```\n\n## 5.reactive对比ref\n\n-  从定义数据角度对比：\n   -  ref用来定义：<strong style=\"color:#DD5145\">基本类型数据</strong>。\n   -  reactive用来定义：<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>。\n   -  备注：ref也可以用来定义<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>, 它内部会自动通过```reactive```转为<strong style=\"color:#DD5145\">代理对象</strong>。\n-  从原理角度对比：\n   -  ref通过``Object.defineProperty()``的```get```与```set```来实现响应式（数据劫持）。\n   -  reactive通过使用<strong style=\"color:#DD5145\">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style=\"color:#DD5145\">Reflect</strong>操作<strong style=\"color:orange\">源对象</strong>内部的数据。\n-  从使用角度对比：\n   -  ref定义的数据：操作数据<strong style=\"color:#DD5145\">需要</strong>```.value```，读取数据时模板中直接读取<strong style=\"color:#DD5145\">不需要</strong>```.value```。\n   -  reactive定义的数据：操作数据与读取数据：<strong style=\"color:#DD5145\">均不需要</strong>```.value```。\n\n## 6.setup的两个注意点\n\n- setup执行的时机\n  - 在beforeCreate之前执行一次，this是undefined。\n\n- setup的参数\n  - props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。\n  - context：上下文对象\n    - attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 ```this.$attrs```。\n    - slots: 收到的插槽内容, 相当于 ```this.$slots```。\n    - emit: 分发自定义事件的函数, 相当于 ```this.$emit```。\n\n\n## 7.计算属性与监视\n\n### 1.computed函数\n\n- 与Vue2.x中computed配置功能一致\n\n- 写法\n\n  ```js\n  import {computed} from 'vue'\n  \n  setup(){\n      ...\n  \t//计算属性——简写\n      let fullName = computed(()=>{\n          return person.firstName + '-' + person.lastName\n      })\n      //计算属性——完整\n      let fullName = computed({\n          get(){\n              return person.firstName + '-' + person.lastName\n          },\n          set(value){\n              const nameArr = value.split('-')\n              person.firstName = nameArr[0]\n              person.lastName = nameArr[1]\n          }\n      })\n  }\n  ```\n\n### 2.watch函数\n\n- 与Vue2.x中watch配置功能一致\n\n- 两个小“坑”：\n\n  - 监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。\n  - 监视reactive定义的响应式数据中某个属性时：deep配置有效。\n\n  ```js\n  //情况一：监视ref定义的响应式数据\n  watch(sum,(newValue,oldValue)=>{\n  \tconsole.log('sum变化了',newValue,oldValue)\n  },{immediate:true})\n  \n  //情况二：监视多个ref定义的响应式数据\n  watch([sum,msg],(newValue,oldValue)=>{\n  \tconsole.log('sum或msg变化了',newValue,oldValue)\n  }) \n  \n  /* 情况三：监视reactive定义的响应式数据\n  \t\t\t若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！\n  \t\t\t若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 \n  */\n  watch(person,(newValue,oldValue)=>{\n  \tconsole.log('person变化了',newValue,oldValue)\n  },{immediate:true,deep:false}) //此处的deep配置不再奏效\n  \n  //情况四：监视reactive定义的响应式数据中的某个属性\n  watch(()=>person.job,(newValue,oldValue)=>{\n  \tconsole.log('person的job变化了',newValue,oldValue)\n  },{immediate:true,deep:true}) \n  \n  //情况五：监视reactive定义的响应式数据中的某些属性\n  watch([()=>person.job,()=>person.name],(newValue,oldValue)=>{\n  \tconsole.log('person的job变化了',newValue,oldValue)\n  },{immediate:true,deep:true})\n  \n  //特殊情况\n  watch(()=>person.job,(newValue,oldValue)=>{\n      console.log('person的job变化了',newValue,oldValue)\n  },{deep:true}) //此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效\n  ```\n\n### 3.watchEffect函数\n\n- watch的套路是：既要指明监视的属性，也要指明监视的回调。\n\n- watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。\n\n- watchEffect有点像computed：\n\n  - 但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。\n  - 而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。\n\n  ```js\n  //watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。\n  watchEffect(()=>{\n      const x1 = sum.value\n      const x2 = person.age\n      console.log('watchEffect配置的回调执行了')\n  })\n  ```\n\n## 8.生命周期\n\n<div style=\"border:1px solid black;width:380px;float:left;margin-right:20px;\"><strong>vue2.x的生命周期</strong><img src=\"https://cn.vuejs.org/images/lifecycle.png\" alt=\"lifecycle_2\" style=\"zoom:33%;width:1200px\" /></div><div style=\"border:1px solid black;width:510px;height:985px;float:left\"><strong>vue3.0的生命周期</strong><img src=\"https://v3.cn.vuejs.org/images/lifecycle.svg\" alt=\"lifecycle_2\" style=\"zoom:33%;width:2500px\" /></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1\n\n- Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：\n  - ```beforeDestroy```改名为 ```beforeUnmount```\n  - ```destroyed```改名为 ```unmounted```\n- Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：\n  - `beforeCreate`===>`setup()`\n  - `created`=======>`setup()`\n  - `beforeMount` ===>`onBeforeMount`\n  - `mounted`=======>`onMounted`\n  - `beforeUpdate`===>`onBeforeUpdate`\n  - `updated` =======>`onUpdated`\n  - `beforeUnmount` ==>`onBeforeUnmount`\n  - `unmounted` =====>`onUnmounted`\n\n## 9.自定义hook函数\n\n- 什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。\n\n- 类似于vue2.x中的mixin。\n\n- 自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。\n\n\n\n## 10.toRef\n\n- 作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。\n- 语法：```const name = toRef(person,'name')```\n- 应用:   要将响应式对象中的某个属性单独提供给外部使用时。\n\n\n- 扩展：```toRefs``` 与```toRef```功能一致，但可以批量创建多个 ref 对象，语法：```toRefs(person)```\n\n\n# 三、其它 Composition API\n\n## 1.shallowReactive 与 shallowRef\n\n- shallowReactive：只处理对象最外层属性的响应式（浅响应式）。\n- shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。\n\n- 什么时候使用?\n  -  如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 ===> shallowReactive。\n  -  如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 ===> shallowRef。\n\n## 2.readonly 与 shallowReadonly\n\n- readonly: 让一个响应式数据变为只读的（深只读）。\n- shallowReadonly：让一个响应式数据变为只读的（浅只读）。\n- 应用场景: 不希望数据被修改时。\n\n## 3.toRaw 与 markRaw\n\n- toRaw：\n  - 作用：将一个由```reactive```生成的<strong style=\"color:orange\">响应式对象</strong>转为<strong style=\"color:orange\">普通对象</strong>。\n  - 使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。\n- markRaw：\n  - 作用：标记一个对象，使其永远不会再成为响应式对象。\n  - 应用场景:\n    1. 有些值不应被设置为响应式的，例如复杂的第三方类库等。\n    2. 当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。\n\n## 4.customRef\n\n- 作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。\n\n- 实现防抖效果：\n\n  ```vue\n  <template>\n  \t<input type=\"text\" v-model=\"keyword\">\n  \t<h3>{{keyword}}</h3>\n  </template>\n  \n  <script>\n  \timport {ref,customRef} from 'vue'\n  \texport default {\n  \t\tname:'Demo',\n  \t\tsetup(){\n  \t\t\t// let keyword = ref('hello') //使用Vue准备好的内置ref\n  \t\t\t//自定义一个myRef\n  \t\t\tfunction myRef(value,delay){\n  \t\t\t\tlet timer\n  \t\t\t\t//通过customRef去实现自定义\n  \t\t\t\treturn customRef((track,trigger)=>{\n  \t\t\t\t\treturn{\n  \t\t\t\t\t\tget(){\n  \t\t\t\t\t\t\ttrack() //告诉Vue这个value值是需要被“追踪”的\n  \t\t\t\t\t\t\treturn value\n  \t\t\t\t\t\t},\n  \t\t\t\t\t\tset(newValue){\n  \t\t\t\t\t\t\tclearTimeout(timer)\n  \t\t\t\t\t\t\ttimer = setTimeout(()=>{\n  \t\t\t\t\t\t\t\tvalue = newValue\n  \t\t\t\t\t\t\t\ttrigger() //告诉Vue去更新界面\n  \t\t\t\t\t\t\t},delay)\n  \t\t\t\t\t\t}\n  \t\t\t\t\t}\n  \t\t\t\t})\n  \t\t\t}\n  \t\t\tlet keyword = myRef('hello',500) //使用程序员自定义的ref\n  \t\t\treturn {\n  \t\t\t\tkeyword\n  \t\t\t}\n  \t\t}\n  \t}\n  </script>\n  ```\n\n  \n\n## 5.provide 与 inject\n\n<img src=\"https://v3.cn.vuejs.org/images/components_provide.png\" style=\"width:300px\" />\n\n- 作用：实现<strong style=\"color:#DD5145\">祖与后代组件间</strong>通信\n\n- 套路：父组件有一个 `provide` 选项来提供数据，后代组件有一个 `inject` 选项来开始使用这些数据\n\n- 具体写法：\n\n  1. 祖组件中：\n\n     ```js\n     setup(){\n     \t......\n         let car = reactive({name:'奔驰',price:'40万'})\n         provide('car',car)\n         ......\n     }\n     ```\n\n  2. 后代组件中：\n\n     ```js\n     setup(props,context){\n     \t......\n         const car = inject('car')\n         return {car}\n     \t......\n     }\n     ```\n\n## 6.响应式数据的判断\n\n- isRef: 检查一个值是否为一个 ref 对象\n- isReactive: 检查一个对象是否是由 `reactive` 创建的响应式代理\n- isReadonly: 检查一个对象是否是由 `readonly` 创建的只读代理\n- isProxy: 检查一个对象是否是由 `reactive` 或者 `readonly` 方法创建的代理\n\n# 四、Composition API 的优势\n\n## 1.Options API 存在的问题\n\n使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。\n\n<div style=\"width:600px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image\" style=\"width:600px;float:left\" />\n</div>\n<div style=\"width:300px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image\" style=\"zoom:50%;width:560px;left\" /> \n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n## 2.Composition API 的优势\n\n我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。\n\n<div style=\"width:500px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n<div style=\"width:430px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# 五、新的组件\n\n## 1.Fragment\n\n- 在Vue2中: 组件必须有一个根标签\n- 在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中\n- 好处: 减少标签层级, 减小内存占用\n\n## 2.Teleport\n\n- 什么是Teleport？—— `Teleport` 是一种能够将我们的<strong style=\"color:#DD5145\">组件html结构</strong>移动到指定位置的技术。\n\n  ```vue\n  <teleport to=\"移动位置\">\n  \t<div v-if=\"isShow\" class=\"mask\">\n  \t\t<div class=\"dialog\">\n  \t\t\t<h3>我是一个弹窗</h3>\n  \t\t\t<button @click=\"isShow = false\">关闭弹窗</button>\n  \t\t</div>\n  \t</div>\n  </teleport>\n  ```\n\n## 3.Suspense\n\n- 等待异步组件时渲染一些额外内容，让应用有更好的用户体验\n\n- 使用步骤：\n\n  - 异步引入组件\n\n    ```js\n    import {defineAsyncComponent} from 'vue'\n    const Child = defineAsyncComponent(()=>import('./components/Child.vue'))\n    ```\n\n  - 使用```Suspense```包裹组件，并配置好```default``` 与 ```fallback```\n\n    ```vue\n    <template>\n    \t<div class=\"app\">\n    \t\t<h3>我是App组件</h3>\n    \t\t<Suspense>\n    \t\t\t<template v-slot:default>\n    \t\t\t\t<Child/>\n    \t\t\t</template>\n    \t\t\t<template v-slot:fallback>\n    \t\t\t\t<h3>加载中.....</h3>\n    \t\t\t</template>\n    \t\t</Suspense>\n    \t</div>\n    </template>\n    ```\n\n# 六、其他\n\n## 1.全局API的转移\n\n- Vue 2.x 有许多全局 API 和配置。\n\n  - 例如：注册全局组件、注册全局指令等。\n\n    ```js\n    //注册全局组件\n    Vue.component('MyButton', {\n      data: () => ({\n        count: 0\n      }),\n      template: '<button @click=\"count++\">Clicked {{ count }} times.</button>'\n    })\n    \n    //注册全局指令\n    Vue.directive('focus', {\n      inserted: el => el.focus()\n    }\n    ```\n\n- Vue3.0中对这些API做出了调整：\n\n  - 将全局的API，即：```Vue.xxx```调整到应用实例（```app```）上\n\n    | 2.x 全局 API（```Vue```） | 3.x 实例 API (`app`)                        |\n    | ------------------------- | ------------------------------------------- |\n    | Vue.config.xxxx           | app.config.xxxx                             |\n    | Vue.config.productionTip  | <strong style=\"color:#DD5145\">移除</strong> |\n    | Vue.component             | app.component                               |\n    | Vue.directive             | app.directive                               |\n    | Vue.mixin                 | app.mixin                                   |\n    | Vue.use                   | app.use                                     |\n    | Vue.prototype             | app.config.globalProperties                 |\n\n## 2.其他改变\n\n- data选项应始终被声明为一个函数。\n\n- 过度类名的更改：\n\n  - Vue2.x写法\n\n    ```css\n    .v-enter,\n    .v-leave-to {\n      opacity: 0;\n    }\n    .v-leave,\n    .v-enter-to {\n      opacity: 1;\n    }\n    ```\n\n  - Vue3.x写法\n\n    ```css\n    .v-enter-from,\n    .v-leave-to {\n      opacity: 0;\n    }\n    \n    .v-leave-from,\n    .v-enter-to {\n      opacity: 1;\n    }\n    ```\n\n- <strong style=\"color:#DD5145\">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持```config.keyCodes```\n\n- <strong style=\"color:#DD5145\">移除</strong>```v-on.native```修饰符\n\n  - 父组件中绑定事件\n\n    ```vue\n    <my-component\n      v-on:close=\"handleComponentEvent\"\n      v-on:click=\"handleNativeClickEvent\"\n    />\n    ```\n\n  - 子组件中声明自定义事件\n\n    ```vue\n    <script>\n      export default {\n        emits: ['close']\n      }\n    </script>\n    ```\n\n- <strong style=\"color:#DD5145\">移除</strong>过滤器（filter）\n\n  > 过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。\n\n- ......\n","slug":"vue3快速上手","published":1,"updated":"2022-04-06T02:45:44.012Z","_id":"cl1mygx6f000160k51j38b7a0","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"Vue3快速上手\"><a href=\"#Vue3快速上手\" class=\"headerlink\" title=\"Vue3快速上手\"></a>Vue3快速上手</h1><img src=\"https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png\" style=\"width:200px\" />\n\n\n\n<h2 id=\"1-Vue3简介\"><a href=\"#1-Vue3简介\" class=\"headerlink\" title=\"1.Vue3简介\"></a>1.Vue3简介</h2><ul>\n<li>2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）</li>\n<li>耗时2年多、<a href=\"https://github.com/vuejs/vue-next/graphs/commit-activity\">2600+次提交</a>、<a href=\"https://github.com/vuejs/rfcs/tree/master/active-rfcs\">30+个RFC</a>、<a href=\"https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+\">600+次PR</a>、<a href=\"https://github.com/vuejs/vue-next/graphs/contributors\">99位贡献者</a> </li>\n<li>github上的tags地址：<a href=\"https://github.com/vuejs/vue-next/releases/tag/v3.0.0\">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li>\n</ul>\n<h2 id=\"2-Vue3带来了什么\"><a href=\"#2-Vue3带来了什么\" class=\"headerlink\" title=\"2.Vue3带来了什么\"></a>2.Vue3带来了什么</h2><h3 id=\"1-性能的提升\"><a href=\"#1-性能的提升\" class=\"headerlink\" title=\"1.性能的提升\"></a>1.性能的提升</h3><ul>\n<li><p>打包大小减少41%</p>\n</li>\n<li><p>初次渲染快55%, 更新渲染快133%</p>\n</li>\n<li><p>内存减少54%</p>\n<p>……</p>\n</li>\n</ul>\n<h3 id=\"2-源码的升级\"><a href=\"#2-源码的升级\" class=\"headerlink\" title=\"2.源码的升级\"></a>2.源码的升级</h3><ul>\n<li><p>使用Proxy代替defineProperty实现响应式</p>\n</li>\n<li><p>重写虚拟DOM的实现和Tree-Shaking</p>\n<p>……</p>\n</li>\n</ul>\n<h3 id=\"3-拥抱TypeScript\"><a href=\"#3-拥抱TypeScript\" class=\"headerlink\" title=\"3.拥抱TypeScript\"></a>3.拥抱TypeScript</h3><ul>\n<li>Vue3可以更好的支持TypeScript</li>\n</ul>\n<h3 id=\"4-新的特性\"><a href=\"#4-新的特性\" class=\"headerlink\" title=\"4.新的特性\"></a>4.新的特性</h3><ol>\n<li><p>Composition API（组合API）</p>\n<ul>\n<li>setup配置</li>\n<li>ref与reactive</li>\n<li>watch与watchEffect</li>\n<li>provide与inject</li>\n<li>……</li>\n</ul>\n</li>\n<li><p>新的内置组件</p>\n<ul>\n<li>Fragment </li>\n<li>Teleport</li>\n<li>Suspense</li>\n</ul>\n</li>\n<li><p>其他改变</p>\n<ul>\n<li>新的生命周期钩子</li>\n<li>data 选项应始终被声明为一个函数</li>\n<li>移除keyCode支持作为 v-on 的修饰符</li>\n<li>……</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"一、创建Vue3-0工程\"><a href=\"#一、创建Vue3-0工程\" class=\"headerlink\" title=\"一、创建Vue3.0工程\"></a>一、创建Vue3.0工程</h1><h2 id=\"1-使用-vue-cli-创建\"><a href=\"#1-使用-vue-cli-创建\" class=\"headerlink\" title=\"1.使用 vue-cli 创建\"></a>1.使用 vue-cli 创建</h2><p>官方文档：<a href=\"https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create\">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class=\"line\">vue --version</span><br><span class=\"line\"><span class=\"comment\">## 安装或者升级你的@vue/cli</span></span><br><span class=\"line\">npm install -g @vue/cli</span><br><span class=\"line\"><span class=\"comment\">## 创建</span></span><br><span class=\"line\">vue create vue_test</span><br><span class=\"line\"><span class=\"comment\">## 启动</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> vue_test</span><br><span class=\"line\">npm run serve</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-使用-vite-创建\"><a href=\"#2-使用-vite-创建\" class=\"headerlink\" title=\"2.使用 vite 创建\"></a>2.使用 vite 创建</h2><p>官方文档：<a href=\"https://v3.cn.vuejs.org/guide/installation.html#vite\">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>\n<p>vite官网：<a href=\"https://vitejs.cn/\">https://vitejs.cn</a></p>\n<ul>\n<li>什么是vite？—— 新一代前端构建工具。</li>\n<li>优势如下：<ul>\n<li>开发环境中，无需打包操作，可快速的冷启动。</li>\n<li>轻量快速的热重载（HMR）。</li>\n<li>真正的按需编译，不再等待整个应用编译完成。</li>\n</ul>\n</li>\n<li>传统构建 与 vite构建对比图</li>\n</ul>\n<p><img src=\"https://cn.vitejs.dev/assets/bundler.37740380.png\" style=\"width:500px;height:280px;float:left\" /><img src=\"https://cn.vitejs.dev/assets/esm.3070012d.png\" style=\"width:480px;height:280px\" /></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 创建工程</span></span><br><span class=\"line\">npm init vite-app &lt;project-name&gt;</span><br><span class=\"line\"><span class=\"comment\">## 进入工程目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> &lt;project-name&gt;</span><br><span class=\"line\"><span class=\"comment\">## 安装依赖</span></span><br><span class=\"line\">npm install</span><br><span class=\"line\"><span class=\"comment\">## 运行</span></span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"二、常用-Composition-API\"><a href=\"#二、常用-Composition-API\" class=\"headerlink\" title=\"二、常用 Composition API\"></a>二、常用 Composition API</h1><p>官方文档: <a href=\"https://v3.cn.vuejs.org/guide/composition-api-introduction.html\">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p>\n<h2 id=\"1-拉开序幕的setup\"><a href=\"#1-拉开序幕的setup\" class=\"headerlink\" title=\"1.拉开序幕的setup\"></a>1.拉开序幕的setup</h2><ol>\n<li>理解：Vue3.0中一个新的配置项，值为一个函数。</li>\n<li>setup是所有<strong style=\"color:#DD5145\">Composition API（组合API）</strong><i style=\"color:gray;font-weight:bold\">“ 表演的舞台 ”</i>。</li>\n<li>组件中所用到的：数据、方法等等，均要配置在setup中。</li>\n<li>setup函数的两种返回值：<ol>\n<li>若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）</li>\n<li><span style=\"color:#aad\">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span></li>\n</ol>\n</li>\n<li>注意点：<ol>\n<li>尽量不要与Vue2.x配置混用<ul>\n<li>Vue2.x配置（data、methos、computed…）中<strong style=\"color:#DD5145\">可以访问到</strong>setup中的属性、方法。</li>\n<li>但在setup中<strong style=\"color:#DD5145\">不能访问到</strong>Vue2.x配置（data、methos、computed…）。</li>\n<li>如果有重名, setup优先。</li>\n</ul>\n</li>\n<li>setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"2-ref函数\"><a href=\"#2-ref函数\" class=\"headerlink\" title=\"2.ref函数\"></a>2.ref函数</h2><ul>\n<li>作用: 定义一个响应式的数据</li>\n<li>语法: <code>const xxx = ref(initValue)</code> <ul>\n<li>创建一个包含响应式数据的<strong style=\"color:#DD5145\">引用对象（reference对象，简称ref对象）</strong>。</li>\n<li>JS中操作数据： <code>xxx.value</code></li>\n<li>模板中读取数据: 不需要.value，直接：<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li>\n</ul>\n</li>\n<li>备注：<ul>\n<li>接收的数据可以是：基本类型、也可以是对象类型。</li>\n<li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的。</li>\n<li>对象类型的数据：内部 <i style=\"color:gray;font-weight:bold\">“ 求助 ”</i> 了Vue3.0中的一个新函数—— <code>reactive</code>函数。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-reactive函数\"><a href=\"#3-reactive函数\" class=\"headerlink\" title=\"3.reactive函数\"></a>3.reactive函数</h2><ul>\n<li>作用: 定义一个<strong style=\"color:#DD5145\">对象类型</strong>的响应式数据（基本类型不要用它，要用<code>ref</code>函数）</li>\n<li>语法：<code>const 代理对象= reactive(源对象)</code>接收一个对象（或数组），返回一个<strong style=\"color:#DD5145\">代理对象（Proxy的实例对象，简称proxy对象）</strong></li>\n<li>reactive定义的响应式数据是“深层次的”。</li>\n<li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。</li>\n</ul>\n<h2 id=\"4-Vue3-0中的响应式原理\"><a href=\"#4-Vue3-0中的响应式原理\" class=\"headerlink\" title=\"4.Vue3.0中的响应式原理\"></a>4.Vue3.0中的响应式原理</h2><h3 id=\"vue2-x的响应式\"><a href=\"#vue2-x的响应式\" class=\"headerlink\" title=\"vue2.x的响应式\"></a>vue2.x的响应式</h3><ul>\n<li><p>实现原理：</p>\n<ul>\n<li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）。</p>\n</li>\n<li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(data, <span class=\"string\">&#x27;count&#x27;</span>, &#123;</span><br><span class=\"line\">    get () &#123;&#125;, </span><br><span class=\"line\">    set () &#123;&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>存在问题：</p>\n<ul>\n<li>新增属性、删除属性, 界面不会更新。</li>\n<li>直接通过下标修改数组, 界面不会自动更新。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Vue3-0的响应式\"><a href=\"#Vue3-0的响应式\" class=\"headerlink\" title=\"Vue3.0的响应式\"></a>Vue3.0的响应式</h3><ul>\n<li><p>实现原理: </p>\n<ul>\n<li><p>通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。</p>\n</li>\n<li><p>通过Reflect（反射）:  对源对象的属性进行操作。</p>\n</li>\n<li><p>MDN文档中描述的Proxy与Reflect：</p>\n<ul>\n<li><p>Proxy：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p>\n</li>\n<li><p>Reflect：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect\">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Proxy</span>(data, &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 拦截读取属性值</span></span><br><span class=\"line\">    get (target, prop) &#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">get</span>(target, prop)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 拦截设置属性值或添加新属性</span></span><br><span class=\"line\">    set (target, prop, value) &#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">set</span>(target, prop, value)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 拦截删除属性</span></span><br><span class=\"line\">    deleteProperty (target, prop) &#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">deleteProperty</span>(target, prop)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">proxy.<span class=\"property\">name</span> = <span class=\"string\">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"5-reactive对比ref\"><a href=\"#5-reactive对比ref\" class=\"headerlink\" title=\"5.reactive对比ref\"></a>5.reactive对比ref</h2><ul>\n<li>从定义数据角度对比：<ul>\n<li>ref用来定义：<strong style=\"color:#DD5145\">基本类型数据</strong>。</li>\n<li>reactive用来定义：<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>。</li>\n<li>备注：ref也可以用来定义<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>, 它内部会自动通过<code>reactive</code>转为<strong style=\"color:#DD5145\">代理对象</strong>。</li>\n</ul>\n</li>\n<li>从原理角度对比：<ul>\n<li>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）。</li>\n<li>reactive通过使用<strong style=\"color:#DD5145\">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style=\"color:#DD5145\">Reflect</strong>操作<strong style=\"color:orange\">源对象</strong>内部的数据。</li>\n</ul>\n</li>\n<li>从使用角度对比：<ul>\n<li>ref定义的数据：操作数据<strong style=\"color:#DD5145\">需要</strong><code>.value</code>，读取数据时模板中直接读取<strong style=\"color:#DD5145\">不需要</strong><code>.value</code>。</li>\n<li>reactive定义的数据：操作数据与读取数据：<strong style=\"color:#DD5145\">均不需要</strong><code>.value</code>。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"6-setup的两个注意点\"><a href=\"#6-setup的两个注意点\" class=\"headerlink\" title=\"6.setup的两个注意点\"></a>6.setup的两个注意点</h2><ul>\n<li><p>setup执行的时机</p>\n<ul>\n<li>在beforeCreate之前执行一次，this是undefined。</li>\n</ul>\n</li>\n<li><p>setup的参数</p>\n<ul>\n<li>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。</li>\n<li>context：上下文对象<ul>\n<li>attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 <code>this.$attrs</code>。</li>\n<li>slots: 收到的插槽内容, 相当于 <code>this.$slots</code>。</li>\n<li>emit: 分发自定义事件的函数, 相当于 <code>this.$emit</code>。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"7-计算属性与监视\"><a href=\"#7-计算属性与监视\" class=\"headerlink\" title=\"7.计算属性与监视\"></a>7.计算属性与监视</h2><h3 id=\"1-computed函数\"><a href=\"#1-computed函数\" class=\"headerlink\" title=\"1.computed函数\"></a>1.computed函数</h3><ul>\n<li><p>与Vue2.x中computed配置功能一致</p>\n</li>\n<li><p>写法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;computed&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">setup</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">\t<span class=\"comment\">//计算属性——简写</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fullName = <span class=\"title function_\">computed</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> person.<span class=\"property\">firstName</span> + <span class=\"string\">&#x27;-&#x27;</span> + person.<span class=\"property\">lastName</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">//计算属性——完整</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fullName = <span class=\"title function_\">computed</span>(&#123;</span><br><span class=\"line\">        <span class=\"title function_\">get</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> person.<span class=\"property\">firstName</span> + <span class=\"string\">&#x27;-&#x27;</span> + person.<span class=\"property\">lastName</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"title function_\">set</span>(<span class=\"params\">value</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> nameArr = value.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;-&#x27;</span>)</span><br><span class=\"line\">            person.<span class=\"property\">firstName</span> = nameArr[<span class=\"number\">0</span>]</span><br><span class=\"line\">            person.<span class=\"property\">lastName</span> = nameArr[<span class=\"number\">1</span>]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"2-watch函数\"><a href=\"#2-watch函数\" class=\"headerlink\" title=\"2.watch函数\"></a>2.watch函数</h3><ul>\n<li><p>与Vue2.x中watch配置功能一致</p>\n</li>\n<li><p>两个小“坑”：</p>\n<ul>\n<li>监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。</li>\n<li>监视reactive定义的响应式数据中某个属性时：deep配置有效。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//情况一：监视ref定义的响应式数据</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(sum,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;sum变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//情况二：监视多个ref定义的响应式数据</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>([sum,msg],<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;sum或msg变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 情况三：监视reactive定义的响应式数据</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(person,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>,<span class=\"attr\">deep</span>:<span class=\"literal\">false</span>&#125;) <span class=\"comment\">//此处的deep配置不再奏效</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//情况四：监视reactive定义的响应式数据中的某个属性</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(<span class=\"function\">()=&gt;</span>person.<span class=\"property\">job</span>,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>,<span class=\"attr\">deep</span>:<span class=\"literal\">true</span>&#125;) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//情况五：监视reactive定义的响应式数据中的某些属性</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>([<span class=\"function\">()=&gt;</span>person.<span class=\"property\">job</span>,<span class=\"function\">()=&gt;</span>person.<span class=\"property\">name</span>],<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>,<span class=\"attr\">deep</span>:<span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//特殊情况</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(<span class=\"function\">()=&gt;</span>person.<span class=\"property\">job</span>,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">deep</span>:<span class=\"literal\">true</span>&#125;) <span class=\"comment\">//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-watchEffect函数\"><a href=\"#3-watchEffect函数\" class=\"headerlink\" title=\"3.watchEffect函数\"></a>3.watchEffect函数</h3><ul>\n<li><p>watch的套路是：既要指明监视的属性，也要指明监视的回调。</p>\n</li>\n<li><p>watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。</p>\n</li>\n<li><p>watchEffect有点像computed：</p>\n<ul>\n<li>但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。</li>\n<li>而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。</span></span><br><span class=\"line\"><span class=\"title function_\">watchEffect</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> x1 = sum.<span class=\"property\">value</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> x2 = person.<span class=\"property\">age</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;watchEffect配置的回调执行了&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"8-生命周期\"><a href=\"#8-生命周期\" class=\"headerlink\" title=\"8.生命周期\"></a>8.生命周期</h2><div style=\"border:1px solid black;width:380px;float:left;margin-right:20px;\"><strong>vue2.x的生命周期</strong><img src=\"https://cn.vuejs.org/images/lifecycle.png\" alt=\"lifecycle_2\" style=\"zoom:33%;width:1200px\" /></div><div style=\"border:1px solid black;width:510px;height:985px;float:left\"><strong>vue3.0的生命周期</strong><img src=\"https://v3.cn.vuejs.org/images/lifecycle.svg\" alt=\"lifecycle_2\" style=\"zoom:33%;width:2500px\" /></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<p>1</p>\n<ul>\n<li>Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：<ul>\n<li><code>beforeDestroy</code>改名为 <code>beforeUnmount</code></li>\n<li><code>destroyed</code>改名为 <code>unmounted</code></li>\n</ul>\n</li>\n<li>Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：<ul>\n<li><code>beforeCreate</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>\n<li><code>created</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>\n<li><code>beforeMount</code> &#x3D;&#x3D;&#x3D;&gt;<code>onBeforeMount</code></li>\n<li><code>mounted</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onMounted</code></li>\n<li><code>beforeUpdate</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUpdate</code></li>\n<li><code>updated</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUpdated</code></li>\n<li><code>beforeUnmount</code> &#x3D;&#x3D;&gt;<code>onBeforeUnmount</code></li>\n<li><code>unmounted</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUnmounted</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"9-自定义hook函数\"><a href=\"#9-自定义hook函数\" class=\"headerlink\" title=\"9.自定义hook函数\"></a>9.自定义hook函数</h2><ul>\n<li><p>什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。</p>\n</li>\n<li><p>类似于vue2.x中的mixin。</p>\n</li>\n<li><p>自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。</p>\n</li>\n</ul>\n<h2 id=\"10-toRef\"><a href=\"#10-toRef\" class=\"headerlink\" title=\"10.toRef\"></a>10.toRef</h2><ul>\n<li><p>作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。</p>\n</li>\n<li><p>语法：<code>const name = toRef(person,&#39;name&#39;)</code></p>\n</li>\n<li><p>应用:   要将响应式对象中的某个属性单独提供给外部使用时。</p>\n</li>\n<li><p>扩展：<code>toRefs</code> 与<code>toRef</code>功能一致，但可以批量创建多个 ref 对象，语法：<code>toRefs(person)</code></p>\n</li>\n</ul>\n<h1 id=\"三、其它-Composition-API\"><a href=\"#三、其它-Composition-API\" class=\"headerlink\" title=\"三、其它 Composition API\"></a>三、其它 Composition API</h1><h2 id=\"1-shallowReactive-与-shallowRef\"><a href=\"#1-shallowReactive-与-shallowRef\" class=\"headerlink\" title=\"1.shallowReactive 与 shallowRef\"></a>1.shallowReactive 与 shallowRef</h2><ul>\n<li><p>shallowReactive：只处理对象最外层属性的响应式（浅响应式）。</p>\n</li>\n<li><p>shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。</p>\n</li>\n<li><p>什么时候使用?</p>\n<ul>\n<li>如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 &#x3D;&#x3D;&#x3D;&gt; shallowReactive。</li>\n<li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 &#x3D;&#x3D;&#x3D;&gt; shallowRef。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-readonly-与-shallowReadonly\"><a href=\"#2-readonly-与-shallowReadonly\" class=\"headerlink\" title=\"2.readonly 与 shallowReadonly\"></a>2.readonly 与 shallowReadonly</h2><ul>\n<li>readonly: 让一个响应式数据变为只读的（深只读）。</li>\n<li>shallowReadonly：让一个响应式数据变为只读的（浅只读）。</li>\n<li>应用场景: 不希望数据被修改时。</li>\n</ul>\n<h2 id=\"3-toRaw-与-markRaw\"><a href=\"#3-toRaw-与-markRaw\" class=\"headerlink\" title=\"3.toRaw 与 markRaw\"></a>3.toRaw 与 markRaw</h2><ul>\n<li>toRaw：<ul>\n<li>作用：将一个由<code>reactive</code>生成的<strong style=\"color:orange\">响应式对象</strong>转为<strong style=\"color:orange\">普通对象</strong>。</li>\n<li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。</li>\n</ul>\n</li>\n<li>markRaw：<ul>\n<li>作用：标记一个对象，使其永远不会再成为响应式对象。</li>\n<li>应用场景:<ol>\n<li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li>\n<li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"4-customRef\"><a href=\"#4-customRef\" class=\"headerlink\" title=\"4.customRef\"></a>4.customRef</h2><ul>\n<li><p>作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。</p>\n</li>\n<li><p>实现防抖效果：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t&lt;input type=&quot;text&quot; v-model=&quot;keyword&quot;&gt;</span><br><span class=\"line\">\t&lt;h3&gt;&#123;&#123;keyword&#125;&#125;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">\timport &#123;ref,customRef&#125; from &#x27;vue&#x27;</span><br><span class=\"line\">\texport default &#123;</span><br><span class=\"line\">\t\tname:&#x27;Demo&#x27;,</span><br><span class=\"line\">\t\tsetup()&#123;</span><br><span class=\"line\">\t\t\t// let keyword = ref(&#x27;hello&#x27;) //使用Vue准备好的内置ref</span><br><span class=\"line\">\t\t\t//自定义一个myRef</span><br><span class=\"line\">\t\t\tfunction myRef(value,delay)&#123;</span><br><span class=\"line\">\t\t\t\tlet timer</span><br><span class=\"line\">\t\t\t\t//通过customRef去实现自定义</span><br><span class=\"line\">\t\t\t\treturn customRef((track,trigger)=&gt;&#123;</span><br><span class=\"line\">\t\t\t\t\treturn&#123;</span><br><span class=\"line\">\t\t\t\t\t\tget()&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\ttrack() //告诉Vue这个value值是需要被“追踪”的</span><br><span class=\"line\">\t\t\t\t\t\t\treturn value</span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\tset(newValue)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tclearTimeout(timer)</span><br><span class=\"line\">\t\t\t\t\t\t\ttimer = setTimeout(()=&gt;&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tvalue = newValue</span><br><span class=\"line\">\t\t\t\t\t\t\t\ttrigger() //告诉Vue去更新界面</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;,delay)</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tlet keyword = myRef(&#x27;hello&#x27;,500) //使用程序员自定义的ref</span><br><span class=\"line\">\t\t\treturn &#123;</span><br><span class=\"line\">\t\t\t\tkeyword</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"5-provide-与-inject\"><a href=\"#5-provide-与-inject\" class=\"headerlink\" title=\"5.provide 与 inject\"></a>5.provide 与 inject</h2><img src=\"https://v3.cn.vuejs.org/images/components_provide.png\" style=\"width:300px\" />\n\n<ul>\n<li><p>作用：实现<strong style=\"color:#DD5145\">祖与后代组件间</strong>通信</p>\n</li>\n<li><p>套路：父组件有一个 <code>provide</code> 选项来提供数据，后代组件有一个 <code>inject</code> 选项来开始使用这些数据</p>\n</li>\n<li><p>具体写法：</p>\n<ol>\n<li><p>祖组件中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">setup</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"keyword\">let</span> car = <span class=\"title function_\">reactive</span>(&#123;<span class=\"attr\">name</span>:<span class=\"string\">&#x27;奔驰&#x27;</span>,<span class=\"attr\">price</span>:<span class=\"string\">&#x27;40万&#x27;</span>&#125;)</span><br><span class=\"line\">    <span class=\"title function_\">provide</span>(<span class=\"string\">&#x27;car&#x27;</span>,car)</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>后代组件中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">setup</span>(<span class=\"params\">props,context</span>)&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"keyword\">const</span> car = <span class=\"title function_\">inject</span>(<span class=\"string\">&#x27;car&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;car&#125;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ul>\n<h2 id=\"6-响应式数据的判断\"><a href=\"#6-响应式数据的判断\" class=\"headerlink\" title=\"6.响应式数据的判断\"></a>6.响应式数据的判断</h2><ul>\n<li>isRef: 检查一个值是否为一个 ref 对象</li>\n<li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li>\n<li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li>\n<li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li>\n</ul>\n<h1 id=\"四、Composition-API-的优势\"><a href=\"#四、Composition-API-的优势\" class=\"headerlink\" title=\"四、Composition API 的优势\"></a>四、Composition API 的优势</h1><h2 id=\"1-Options-API-存在的问题\"><a href=\"#1-Options-API-存在的问题\" class=\"headerlink\" title=\"1.Options API 存在的问题\"></a>1.Options API 存在的问题</h2><p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。</p>\n<div style=\"width:600px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image\" style=\"width:600px;float:left\" />\n</div>\n<div style=\"width:300px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image\" style=\"zoom:50%;width:560px;left\" /> \n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<h2 id=\"2-Composition-API-的优势\"><a href=\"#2-Composition-API-的优势\" class=\"headerlink\" title=\"2.Composition API 的优势\"></a>2.Composition API 的优势</h2><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。</p>\n<div style=\"width:500px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n<div style=\"width:430px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<h1 id=\"五、新的组件\"><a href=\"#五、新的组件\" class=\"headerlink\" title=\"五、新的组件\"></a>五、新的组件</h1><h2 id=\"1-Fragment\"><a href=\"#1-Fragment\" class=\"headerlink\" title=\"1.Fragment\"></a>1.Fragment</h2><ul>\n<li>在Vue2中: 组件必须有一个根标签</li>\n<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>\n<li>好处: 减少标签层级, 减小内存占用</li>\n</ul>\n<h2 id=\"2-Teleport\"><a href=\"#2-Teleport\" class=\"headerlink\" title=\"2.Teleport\"></a>2.Teleport</h2><ul>\n<li><p>什么是Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style=\"color:#DD5145\">组件html结构</strong>移动到指定位置的技术。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;teleport to=&quot;移动位置&quot;&gt;</span><br><span class=\"line\">\t&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class=\"line\">\t\t&lt;div class=&quot;dialog&quot;&gt;</span><br><span class=\"line\">\t\t\t&lt;h3&gt;我是一个弹窗&lt;/h3&gt;</span><br><span class=\"line\">\t\t\t&lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"3-Suspense\"><a href=\"#3-Suspense\" class=\"headerlink\" title=\"3.Suspense\"></a>3.Suspense</h2><ul>\n<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>\n</li>\n<li><p>使用步骤：</p>\n<ul>\n<li><p>异步引入组件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;defineAsyncComponent&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Child</span> = <span class=\"title function_\">defineAsyncComponent</span>(<span class=\"function\">()=&gt;</span><span class=\"title function_\">import</span>(<span class=\"string\">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t&lt;div class=&quot;app&quot;&gt;</span><br><span class=\"line\">\t\t&lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class=\"line\">\t\t&lt;Suspense&gt;</span><br><span class=\"line\">\t\t\t&lt;template v-slot:default&gt;</span><br><span class=\"line\">\t\t\t\t&lt;Child/&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t\t&lt;template v-slot:fallback&gt;</span><br><span class=\"line\">\t\t\t\t&lt;h3&gt;加载中.....&lt;/h3&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t&lt;/Suspense&gt;</span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h1 id=\"六、其他\"><a href=\"#六、其他\" class=\"headerlink\" title=\"六、其他\"></a>六、其他</h1><h2 id=\"1-全局API的转移\"><a href=\"#1-全局API的转移\" class=\"headerlink\" title=\"1.全局API的转移\"></a>1.全局API的转移</h2><ul>\n<li><p>Vue 2.x 有许多全局 API 和配置。</p>\n<ul>\n<li><p>例如：注册全局组件、注册全局指令等。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//注册全局组件</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">component</span>(<span class=\"string\">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: <span class=\"function\">() =&gt;</span> (&#123;</span><br><span class=\"line\">    <span class=\"attr\">count</span>: <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">  <span class=\"attr\">template</span>: <span class=\"string\">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//注册全局指令</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">directive</span>(<span class=\"string\">&#x27;focus&#x27;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">inserted</span>: <span class=\"function\"><span class=\"params\">el</span> =&gt;</span> el.<span class=\"title function_\">focus</span>()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>Vue3.0中对这些API做出了调整：</p>\n<ul>\n<li><p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>\n<table>\n<thead>\n<tr>\n<th>2.x 全局 API（<code>Vue</code>）</th>\n<th>3.x 实例 API (<code>app</code>)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Vue.config.xxxx</td>\n<td>app.config.xxxx</td>\n</tr>\n<tr>\n<td>Vue.config.productionTip</td>\n<td><strong style=\"color:#DD5145\">移除</strong></td>\n</tr>\n<tr>\n<td>Vue.component</td>\n<td>app.component</td>\n</tr>\n<tr>\n<td>Vue.directive</td>\n<td>app.directive</td>\n</tr>\n<tr>\n<td>Vue.mixin</td>\n<td>app.mixin</td>\n</tr>\n<tr>\n<td>Vue.use</td>\n<td>app.use</td>\n</tr>\n<tr>\n<td>Vue.prototype</td>\n<td>app.config.globalProperties</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-其他改变\"><a href=\"#2-其他改变\" class=\"headerlink\" title=\"2.其他改变\"></a>2.其他改变</h2><ul>\n<li><p>data选项应始终被声明为一个函数。</p>\n</li>\n<li><p>过度类名的更改：</p>\n<ul>\n<li><p>Vue2.x写法</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.v-enter</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-leave-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.v-leave</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-enter-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Vue3.x写法</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.v-enter-from</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-leave-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.v-leave-from</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-enter-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><strong style=\"color:#DD5145\">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>\n</li>\n<li><p><strong style=\"color:#DD5145\">移除</strong><code>v-on.native</code>修饰符</p>\n<ul>\n<li><p>父组件中绑定事件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;my-component</span><br><span class=\"line\">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class=\"line\">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class=\"line\">/&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>子组件中声明自定义事件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  export default &#123;</span><br><span class=\"line\">    emits: [&#x27;close&#x27;]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><strong style=\"color:#DD5145\">移除</strong>过滤器（filter）</p>\n<blockquote>\n<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>\n</blockquote>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n","site":{"data":{}},"cover":"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","excerpt":"","more":"<h1 id=\"Vue3快速上手\"><a href=\"#Vue3快速上手\" class=\"headerlink\" title=\"Vue3快速上手\"></a>Vue3快速上手</h1><img src=\"https://user-images.githubusercontent.com/499550/93624428-53932780-f9ae-11ea-8d16-af949e16a09f.png\" style=\"width:200px\" />\n\n\n\n<h2 id=\"1-Vue3简介\"><a href=\"#1-Vue3简介\" class=\"headerlink\" title=\"1.Vue3简介\"></a>1.Vue3简介</h2><ul>\n<li>2020年9月18日，Vue.js发布3.0版本，代号：One Piece（海贼王）</li>\n<li>耗时2年多、<a href=\"https://github.com/vuejs/vue-next/graphs/commit-activity\">2600+次提交</a>、<a href=\"https://github.com/vuejs/rfcs/tree/master/active-rfcs\">30+个RFC</a>、<a href=\"https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+\">600+次PR</a>、<a href=\"https://github.com/vuejs/vue-next/graphs/contributors\">99位贡献者</a> </li>\n<li>github上的tags地址：<a href=\"https://github.com/vuejs/vue-next/releases/tag/v3.0.0\">https://github.com/vuejs/vue-next/releases/tag/v3.0.0</a></li>\n</ul>\n<h2 id=\"2-Vue3带来了什么\"><a href=\"#2-Vue3带来了什么\" class=\"headerlink\" title=\"2.Vue3带来了什么\"></a>2.Vue3带来了什么</h2><h3 id=\"1-性能的提升\"><a href=\"#1-性能的提升\" class=\"headerlink\" title=\"1.性能的提升\"></a>1.性能的提升</h3><ul>\n<li><p>打包大小减少41%</p>\n</li>\n<li><p>初次渲染快55%, 更新渲染快133%</p>\n</li>\n<li><p>内存减少54%</p>\n<p>……</p>\n</li>\n</ul>\n<h3 id=\"2-源码的升级\"><a href=\"#2-源码的升级\" class=\"headerlink\" title=\"2.源码的升级\"></a>2.源码的升级</h3><ul>\n<li><p>使用Proxy代替defineProperty实现响应式</p>\n</li>\n<li><p>重写虚拟DOM的实现和Tree-Shaking</p>\n<p>……</p>\n</li>\n</ul>\n<h3 id=\"3-拥抱TypeScript\"><a href=\"#3-拥抱TypeScript\" class=\"headerlink\" title=\"3.拥抱TypeScript\"></a>3.拥抱TypeScript</h3><ul>\n<li>Vue3可以更好的支持TypeScript</li>\n</ul>\n<h3 id=\"4-新的特性\"><a href=\"#4-新的特性\" class=\"headerlink\" title=\"4.新的特性\"></a>4.新的特性</h3><ol>\n<li><p>Composition API（组合API）</p>\n<ul>\n<li>setup配置</li>\n<li>ref与reactive</li>\n<li>watch与watchEffect</li>\n<li>provide与inject</li>\n<li>……</li>\n</ul>\n</li>\n<li><p>新的内置组件</p>\n<ul>\n<li>Fragment </li>\n<li>Teleport</li>\n<li>Suspense</li>\n</ul>\n</li>\n<li><p>其他改变</p>\n<ul>\n<li>新的生命周期钩子</li>\n<li>data 选项应始终被声明为一个函数</li>\n<li>移除keyCode支持作为 v-on 的修饰符</li>\n<li>……</li>\n</ul>\n</li>\n</ol>\n<h1 id=\"一、创建Vue3-0工程\"><a href=\"#一、创建Vue3-0工程\" class=\"headerlink\" title=\"一、创建Vue3.0工程\"></a>一、创建Vue3.0工程</h1><h2 id=\"1-使用-vue-cli-创建\"><a href=\"#1-使用-vue-cli-创建\" class=\"headerlink\" title=\"1.使用 vue-cli 创建\"></a>1.使用 vue-cli 创建</h2><p>官方文档：<a href=\"https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create\">https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 查看@vue/cli版本，确保@vue/cli版本在4.5.0以上</span></span><br><span class=\"line\">vue --version</span><br><span class=\"line\"><span class=\"comment\">## 安装或者升级你的@vue/cli</span></span><br><span class=\"line\">npm install -g @vue/cli</span><br><span class=\"line\"><span class=\"comment\">## 创建</span></span><br><span class=\"line\">vue create vue_test</span><br><span class=\"line\"><span class=\"comment\">## 启动</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> vue_test</span><br><span class=\"line\">npm run serve</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-使用-vite-创建\"><a href=\"#2-使用-vite-创建\" class=\"headerlink\" title=\"2.使用 vite 创建\"></a>2.使用 vite 创建</h2><p>官方文档：<a href=\"https://v3.cn.vuejs.org/guide/installation.html#vite\">https://v3.cn.vuejs.org/guide/installation.html#vite</a></p>\n<p>vite官网：<a href=\"https://vitejs.cn/\">https://vitejs.cn</a></p>\n<ul>\n<li>什么是vite？—— 新一代前端构建工具。</li>\n<li>优势如下：<ul>\n<li>开发环境中，无需打包操作，可快速的冷启动。</li>\n<li>轻量快速的热重载（HMR）。</li>\n<li>真正的按需编译，不再等待整个应用编译完成。</li>\n</ul>\n</li>\n<li>传统构建 与 vite构建对比图</li>\n</ul>\n<p><img src=\"https://cn.vitejs.dev/assets/bundler.37740380.png\" style=\"width:500px;height:280px;float:left\" /><img src=\"https://cn.vitejs.dev/assets/esm.3070012d.png\" style=\"width:480px;height:280px\" /></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">## 创建工程</span></span><br><span class=\"line\">npm init vite-app &lt;project-name&gt;</span><br><span class=\"line\"><span class=\"comment\">## 进入工程目录</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> &lt;project-name&gt;</span><br><span class=\"line\"><span class=\"comment\">## 安装依赖</span></span><br><span class=\"line\">npm install</span><br><span class=\"line\"><span class=\"comment\">## 运行</span></span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"二、常用-Composition-API\"><a href=\"#二、常用-Composition-API\" class=\"headerlink\" title=\"二、常用 Composition API\"></a>二、常用 Composition API</h1><p>官方文档: <a href=\"https://v3.cn.vuejs.org/guide/composition-api-introduction.html\">https://v3.cn.vuejs.org/guide/composition-api-introduction.html</a></p>\n<h2 id=\"1-拉开序幕的setup\"><a href=\"#1-拉开序幕的setup\" class=\"headerlink\" title=\"1.拉开序幕的setup\"></a>1.拉开序幕的setup</h2><ol>\n<li>理解：Vue3.0中一个新的配置项，值为一个函数。</li>\n<li>setup是所有<strong style=\"color:#DD5145\">Composition API（组合API）</strong><i style=\"color:gray;font-weight:bold\">“ 表演的舞台 ”</i>。</li>\n<li>组件中所用到的：数据、方法等等，均要配置在setup中。</li>\n<li>setup函数的两种返回值：<ol>\n<li>若返回一个对象，则对象中的属性、方法, 在模板中均可以直接使用。（重点关注！）</li>\n<li><span style=\"color:#aad\">若返回一个渲染函数：则可以自定义渲染内容。（了解）</span></li>\n</ol>\n</li>\n<li>注意点：<ol>\n<li>尽量不要与Vue2.x配置混用<ul>\n<li>Vue2.x配置（data、methos、computed…）中<strong style=\"color:#DD5145\">可以访问到</strong>setup中的属性、方法。</li>\n<li>但在setup中<strong style=\"color:#DD5145\">不能访问到</strong>Vue2.x配置（data、methos、computed…）。</li>\n<li>如果有重名, setup优先。</li>\n</ul>\n</li>\n<li>setup不能是一个async函数，因为返回值不再是return的对象, 而是promise, 模板看不到return对象中的属性。（后期也可以返回一个Promise实例，但需要Suspense和异步组件的配合）</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"2-ref函数\"><a href=\"#2-ref函数\" class=\"headerlink\" title=\"2.ref函数\"></a>2.ref函数</h2><ul>\n<li>作用: 定义一个响应式的数据</li>\n<li>语法: <code>const xxx = ref(initValue)</code> <ul>\n<li>创建一个包含响应式数据的<strong style=\"color:#DD5145\">引用对象（reference对象，简称ref对象）</strong>。</li>\n<li>JS中操作数据： <code>xxx.value</code></li>\n<li>模板中读取数据: 不需要.value，直接：<code>&lt;div&gt;&#123;&#123;xxx&#125;&#125;&lt;/div&gt;</code></li>\n</ul>\n</li>\n<li>备注：<ul>\n<li>接收的数据可以是：基本类型、也可以是对象类型。</li>\n<li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的。</li>\n<li>对象类型的数据：内部 <i style=\"color:gray;font-weight:bold\">“ 求助 ”</i> 了Vue3.0中的一个新函数—— <code>reactive</code>函数。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"3-reactive函数\"><a href=\"#3-reactive函数\" class=\"headerlink\" title=\"3.reactive函数\"></a>3.reactive函数</h2><ul>\n<li>作用: 定义一个<strong style=\"color:#DD5145\">对象类型</strong>的响应式数据（基本类型不要用它，要用<code>ref</code>函数）</li>\n<li>语法：<code>const 代理对象= reactive(源对象)</code>接收一个对象（或数组），返回一个<strong style=\"color:#DD5145\">代理对象（Proxy的实例对象，简称proxy对象）</strong></li>\n<li>reactive定义的响应式数据是“深层次的”。</li>\n<li>内部基于 ES6 的 Proxy 实现，通过代理对象操作源对象内部数据进行操作。</li>\n</ul>\n<h2 id=\"4-Vue3-0中的响应式原理\"><a href=\"#4-Vue3-0中的响应式原理\" class=\"headerlink\" title=\"4.Vue3.0中的响应式原理\"></a>4.Vue3.0中的响应式原理</h2><h3 id=\"vue2-x的响应式\"><a href=\"#vue2-x的响应式\" class=\"headerlink\" title=\"vue2.x的响应式\"></a>vue2.x的响应式</h3><ul>\n<li><p>实现原理：</p>\n<ul>\n<li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取、修改进行拦截（数据劫持）。</p>\n</li>\n<li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Object</span>.<span class=\"title function_\">defineProperty</span>(data, <span class=\"string\">&#x27;count&#x27;</span>, &#123;</span><br><span class=\"line\">    get () &#123;&#125;, </span><br><span class=\"line\">    set () &#123;&#125;</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>存在问题：</p>\n<ul>\n<li>新增属性、删除属性, 界面不会更新。</li>\n<li>直接通过下标修改数组, 界面不会自动更新。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Vue3-0的响应式\"><a href=\"#Vue3-0的响应式\" class=\"headerlink\" title=\"Vue3.0的响应式\"></a>Vue3.0的响应式</h3><ul>\n<li><p>实现原理: </p>\n<ul>\n<li><p>通过Proxy（代理）:  拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等。</p>\n</li>\n<li><p>通过Reflect（反射）:  对源对象的属性进行操作。</p>\n</li>\n<li><p>MDN文档中描述的Proxy与Reflect：</p>\n<ul>\n<li><p>Proxy：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy\">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</a></p>\n</li>\n<li><p>Reflect：<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect\">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"title class_\">Proxy</span>(data, &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// 拦截读取属性值</span></span><br><span class=\"line\">    get (target, prop) &#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">get</span>(target, prop)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 拦截设置属性值或添加新属性</span></span><br><span class=\"line\">    set (target, prop, value) &#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">set</span>(target, prop, value)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"comment\">// 拦截删除属性</span></span><br><span class=\"line\">    deleteProperty (target, prop) &#123;</span><br><span class=\"line\">    \t<span class=\"keyword\">return</span> <span class=\"title class_\">Reflect</span>.<span class=\"title function_\">deleteProperty</span>(target, prop)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">proxy.<span class=\"property\">name</span> = <span class=\"string\">&#x27;tom&#x27;</span>   </span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"5-reactive对比ref\"><a href=\"#5-reactive对比ref\" class=\"headerlink\" title=\"5.reactive对比ref\"></a>5.reactive对比ref</h2><ul>\n<li>从定义数据角度对比：<ul>\n<li>ref用来定义：<strong style=\"color:#DD5145\">基本类型数据</strong>。</li>\n<li>reactive用来定义：<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>。</li>\n<li>备注：ref也可以用来定义<strong style=\"color:#DD5145\">对象（或数组）类型数据</strong>, 它内部会自动通过<code>reactive</code>转为<strong style=\"color:#DD5145\">代理对象</strong>。</li>\n</ul>\n</li>\n<li>从原理角度对比：<ul>\n<li>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）。</li>\n<li>reactive通过使用<strong style=\"color:#DD5145\">Proxy</strong>来实现响应式（数据劫持）, 并通过<strong style=\"color:#DD5145\">Reflect</strong>操作<strong style=\"color:orange\">源对象</strong>内部的数据。</li>\n</ul>\n</li>\n<li>从使用角度对比：<ul>\n<li>ref定义的数据：操作数据<strong style=\"color:#DD5145\">需要</strong><code>.value</code>，读取数据时模板中直接读取<strong style=\"color:#DD5145\">不需要</strong><code>.value</code>。</li>\n<li>reactive定义的数据：操作数据与读取数据：<strong style=\"color:#DD5145\">均不需要</strong><code>.value</code>。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"6-setup的两个注意点\"><a href=\"#6-setup的两个注意点\" class=\"headerlink\" title=\"6.setup的两个注意点\"></a>6.setup的两个注意点</h2><ul>\n<li><p>setup执行的时机</p>\n<ul>\n<li>在beforeCreate之前执行一次，this是undefined。</li>\n</ul>\n</li>\n<li><p>setup的参数</p>\n<ul>\n<li>props：值为对象，包含：组件外部传递过来，且组件内部声明接收了的属性。</li>\n<li>context：上下文对象<ul>\n<li>attrs: 值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性, 相当于 <code>this.$attrs</code>。</li>\n<li>slots: 收到的插槽内容, 相当于 <code>this.$slots</code>。</li>\n<li>emit: 分发自定义事件的函数, 相当于 <code>this.$emit</code>。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"7-计算属性与监视\"><a href=\"#7-计算属性与监视\" class=\"headerlink\" title=\"7.计算属性与监视\"></a>7.计算属性与监视</h2><h3 id=\"1-computed函数\"><a href=\"#1-computed函数\" class=\"headerlink\" title=\"1.computed函数\"></a>1.computed函数</h3><ul>\n<li><p>与Vue2.x中computed配置功能一致</p>\n</li>\n<li><p>写法</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;computed&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title function_\">setup</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">\t<span class=\"comment\">//计算属性——简写</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fullName = <span class=\"title function_\">computed</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> person.<span class=\"property\">firstName</span> + <span class=\"string\">&#x27;-&#x27;</span> + person.<span class=\"property\">lastName</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">    <span class=\"comment\">//计算属性——完整</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> fullName = <span class=\"title function_\">computed</span>(&#123;</span><br><span class=\"line\">        <span class=\"title function_\">get</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> person.<span class=\"property\">firstName</span> + <span class=\"string\">&#x27;-&#x27;</span> + person.<span class=\"property\">lastName</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        <span class=\"title function_\">set</span>(<span class=\"params\">value</span>)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> nameArr = value.<span class=\"title function_\">split</span>(<span class=\"string\">&#x27;-&#x27;</span>)</span><br><span class=\"line\">            person.<span class=\"property\">firstName</span> = nameArr[<span class=\"number\">0</span>]</span><br><span class=\"line\">            person.<span class=\"property\">lastName</span> = nameArr[<span class=\"number\">1</span>]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"2-watch函数\"><a href=\"#2-watch函数\" class=\"headerlink\" title=\"2.watch函数\"></a>2.watch函数</h3><ul>\n<li><p>与Vue2.x中watch配置功能一致</p>\n</li>\n<li><p>两个小“坑”：</p>\n<ul>\n<li>监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。</li>\n<li>监视reactive定义的响应式数据中某个属性时：deep配置有效。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//情况一：监视ref定义的响应式数据</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(sum,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;sum变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//情况二：监视多个ref定义的响应式数据</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>([sum,msg],<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;sum或msg变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* 情况三：监视reactive定义的响应式数据</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t若watch监视的是reactive定义的响应式数据，则无法正确获得oldValue！！</span></span><br><span class=\"line\"><span class=\"comment\">\t\t\t若watch监视的是reactive定义的响应式数据，则强制开启了深度监视 </span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(person,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>,<span class=\"attr\">deep</span>:<span class=\"literal\">false</span>&#125;) <span class=\"comment\">//此处的deep配置不再奏效</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//情况四：监视reactive定义的响应式数据中的某个属性</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(<span class=\"function\">()=&gt;</span>person.<span class=\"property\">job</span>,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>,<span class=\"attr\">deep</span>:<span class=\"literal\">true</span>&#125;) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//情况五：监视reactive定义的响应式数据中的某些属性</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>([<span class=\"function\">()=&gt;</span>person.<span class=\"property\">job</span>,<span class=\"function\">()=&gt;</span>person.<span class=\"property\">name</span>],<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">\t<span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">immediate</span>:<span class=\"literal\">true</span>,<span class=\"attr\">deep</span>:<span class=\"literal\">true</span>&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//特殊情况</span></span><br><span class=\"line\"><span class=\"title function_\">watch</span>(<span class=\"function\">()=&gt;</span>person.<span class=\"property\">job</span>,<span class=\"function\">(<span class=\"params\">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;person的job变化了&#x27;</span>,newValue,oldValue)</span><br><span class=\"line\">&#125;,&#123;<span class=\"attr\">deep</span>:<span class=\"literal\">true</span>&#125;) <span class=\"comment\">//此处由于监视的是reactive素定义的对象中的某个属性，所以deep配置有效</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n<h3 id=\"3-watchEffect函数\"><a href=\"#3-watchEffect函数\" class=\"headerlink\" title=\"3.watchEffect函数\"></a>3.watchEffect函数</h3><ul>\n<li><p>watch的套路是：既要指明监视的属性，也要指明监视的回调。</p>\n</li>\n<li><p>watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性。</p>\n</li>\n<li><p>watchEffect有点像computed：</p>\n<ul>\n<li>但computed注重的计算出来的值（回调函数的返回值），所以必须要写返回值。</li>\n<li>而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//watchEffect所指定的回调中用到的数据只要发生变化，则直接重新执行回调。</span></span><br><span class=\"line\"><span class=\"title function_\">watchEffect</span>(<span class=\"function\">()=&gt;</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> x1 = sum.<span class=\"property\">value</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> x2 = person.<span class=\"property\">age</span></span><br><span class=\"line\">    <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">&#x27;watchEffect配置的回调执行了&#x27;</span>)</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"8-生命周期\"><a href=\"#8-生命周期\" class=\"headerlink\" title=\"8.生命周期\"></a>8.生命周期</h2><div style=\"border:1px solid black;width:380px;float:left;margin-right:20px;\"><strong>vue2.x的生命周期</strong><img src=\"https://cn.vuejs.org/images/lifecycle.png\" alt=\"lifecycle_2\" style=\"zoom:33%;width:1200px\" /></div><div style=\"border:1px solid black;width:510px;height:985px;float:left\"><strong>vue3.0的生命周期</strong><img src=\"https://v3.cn.vuejs.org/images/lifecycle.svg\" alt=\"lifecycle_2\" style=\"zoom:33%;width:2500px\" /></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<p>1</p>\n<ul>\n<li>Vue3.0中可以继续使用Vue2.x中的生命周期钩子，但有有两个被更名：<ul>\n<li><code>beforeDestroy</code>改名为 <code>beforeUnmount</code></li>\n<li><code>destroyed</code>改名为 <code>unmounted</code></li>\n</ul>\n</li>\n<li>Vue3.0也提供了 Composition API 形式的生命周期钩子，与Vue2.x中钩子对应关系如下：<ul>\n<li><code>beforeCreate</code>&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>\n<li><code>created</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>setup()</code></li>\n<li><code>beforeMount</code> &#x3D;&#x3D;&#x3D;&gt;<code>onBeforeMount</code></li>\n<li><code>mounted</code>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onMounted</code></li>\n<li><code>beforeUpdate</code>&#x3D;&#x3D;&#x3D;&gt;<code>onBeforeUpdate</code></li>\n<li><code>updated</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUpdated</code></li>\n<li><code>beforeUnmount</code> &#x3D;&#x3D;&gt;<code>onBeforeUnmount</code></li>\n<li><code>unmounted</code> &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt;<code>onUnmounted</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"9-自定义hook函数\"><a href=\"#9-自定义hook函数\" class=\"headerlink\" title=\"9.自定义hook函数\"></a>9.自定义hook函数</h2><ul>\n<li><p>什么是hook？—— 本质是一个函数，把setup函数中使用的Composition API进行了封装。</p>\n</li>\n<li><p>类似于vue2.x中的mixin。</p>\n</li>\n<li><p>自定义hook的优势: 复用代码, 让setup中的逻辑更清楚易懂。</p>\n</li>\n</ul>\n<h2 id=\"10-toRef\"><a href=\"#10-toRef\" class=\"headerlink\" title=\"10.toRef\"></a>10.toRef</h2><ul>\n<li><p>作用：创建一个 ref 对象，其value值指向另一个对象中的某个属性。</p>\n</li>\n<li><p>语法：<code>const name = toRef(person,&#39;name&#39;)</code></p>\n</li>\n<li><p>应用:   要将响应式对象中的某个属性单独提供给外部使用时。</p>\n</li>\n<li><p>扩展：<code>toRefs</code> 与<code>toRef</code>功能一致，但可以批量创建多个 ref 对象，语法：<code>toRefs(person)</code></p>\n</li>\n</ul>\n<h1 id=\"三、其它-Composition-API\"><a href=\"#三、其它-Composition-API\" class=\"headerlink\" title=\"三、其它 Composition API\"></a>三、其它 Composition API</h1><h2 id=\"1-shallowReactive-与-shallowRef\"><a href=\"#1-shallowReactive-与-shallowRef\" class=\"headerlink\" title=\"1.shallowReactive 与 shallowRef\"></a>1.shallowReactive 与 shallowRef</h2><ul>\n<li><p>shallowReactive：只处理对象最外层属性的响应式（浅响应式）。</p>\n</li>\n<li><p>shallowRef：只处理基本数据类型的响应式, 不进行对象的响应式处理。</p>\n</li>\n<li><p>什么时候使用?</p>\n<ul>\n<li>如果有一个对象数据，结构比较深, 但变化时只是外层属性变化 &#x3D;&#x3D;&#x3D;&gt; shallowReactive。</li>\n<li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生新的对象来替换 &#x3D;&#x3D;&#x3D;&gt; shallowRef。</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-readonly-与-shallowReadonly\"><a href=\"#2-readonly-与-shallowReadonly\" class=\"headerlink\" title=\"2.readonly 与 shallowReadonly\"></a>2.readonly 与 shallowReadonly</h2><ul>\n<li>readonly: 让一个响应式数据变为只读的（深只读）。</li>\n<li>shallowReadonly：让一个响应式数据变为只读的（浅只读）。</li>\n<li>应用场景: 不希望数据被修改时。</li>\n</ul>\n<h2 id=\"3-toRaw-与-markRaw\"><a href=\"#3-toRaw-与-markRaw\" class=\"headerlink\" title=\"3.toRaw 与 markRaw\"></a>3.toRaw 与 markRaw</h2><ul>\n<li>toRaw：<ul>\n<li>作用：将一个由<code>reactive</code>生成的<strong style=\"color:orange\">响应式对象</strong>转为<strong style=\"color:orange\">普通对象</strong>。</li>\n<li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的所有操作，不会引起页面更新。</li>\n</ul>\n</li>\n<li>markRaw：<ul>\n<li>作用：标记一个对象，使其永远不会再成为响应式对象。</li>\n<li>应用场景:<ol>\n<li>有些值不应被设置为响应式的，例如复杂的第三方类库等。</li>\n<li>当渲染具有不可变数据源的大列表时，跳过响应式转换可以提高性能。</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"4-customRef\"><a href=\"#4-customRef\" class=\"headerlink\" title=\"4.customRef\"></a>4.customRef</h2><ul>\n<li><p>作用：创建一个自定义的 ref，并对其依赖项跟踪和更新触发进行显式控制。</p>\n</li>\n<li><p>实现防抖效果：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t&lt;input type=&quot;text&quot; v-model=&quot;keyword&quot;&gt;</span><br><span class=\"line\">\t&lt;h3&gt;&#123;&#123;keyword&#125;&#125;&lt;/h3&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">\timport &#123;ref,customRef&#125; from &#x27;vue&#x27;</span><br><span class=\"line\">\texport default &#123;</span><br><span class=\"line\">\t\tname:&#x27;Demo&#x27;,</span><br><span class=\"line\">\t\tsetup()&#123;</span><br><span class=\"line\">\t\t\t// let keyword = ref(&#x27;hello&#x27;) //使用Vue准备好的内置ref</span><br><span class=\"line\">\t\t\t//自定义一个myRef</span><br><span class=\"line\">\t\t\tfunction myRef(value,delay)&#123;</span><br><span class=\"line\">\t\t\t\tlet timer</span><br><span class=\"line\">\t\t\t\t//通过customRef去实现自定义</span><br><span class=\"line\">\t\t\t\treturn customRef((track,trigger)=&gt;&#123;</span><br><span class=\"line\">\t\t\t\t\treturn&#123;</span><br><span class=\"line\">\t\t\t\t\t\tget()&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\ttrack() //告诉Vue这个value值是需要被“追踪”的</span><br><span class=\"line\">\t\t\t\t\t\t\treturn value</span><br><span class=\"line\">\t\t\t\t\t\t&#125;,</span><br><span class=\"line\">\t\t\t\t\t\tset(newValue)&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tclearTimeout(timer)</span><br><span class=\"line\">\t\t\t\t\t\t\ttimer = setTimeout(()=&gt;&#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tvalue = newValue</span><br><span class=\"line\">\t\t\t\t\t\t\t\ttrigger() //告诉Vue去更新界面</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;,delay)</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;)</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\tlet keyword = myRef(&#x27;hello&#x27;,500) //使用程序员自定义的ref</span><br><span class=\"line\">\t\t\treturn &#123;</span><br><span class=\"line\">\t\t\t\tkeyword</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"5-provide-与-inject\"><a href=\"#5-provide-与-inject\" class=\"headerlink\" title=\"5.provide 与 inject\"></a>5.provide 与 inject</h2><img src=\"https://v3.cn.vuejs.org/images/components_provide.png\" style=\"width:300px\" />\n\n<ul>\n<li><p>作用：实现<strong style=\"color:#DD5145\">祖与后代组件间</strong>通信</p>\n</li>\n<li><p>套路：父组件有一个 <code>provide</code> 选项来提供数据，后代组件有一个 <code>inject</code> 选项来开始使用这些数据</p>\n</li>\n<li><p>具体写法：</p>\n<ol>\n<li><p>祖组件中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">setup</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"keyword\">let</span> car = <span class=\"title function_\">reactive</span>(&#123;<span class=\"attr\">name</span>:<span class=\"string\">&#x27;奔驰&#x27;</span>,<span class=\"attr\">price</span>:<span class=\"string\">&#x27;40万&#x27;</span>&#125;)</span><br><span class=\"line\">    <span class=\"title function_\">provide</span>(<span class=\"string\">&#x27;car&#x27;</span>,car)</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>后代组件中：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title function_\">setup</span>(<span class=\"params\">props,context</span>)&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"keyword\">const</span> car = <span class=\"title function_\">inject</span>(<span class=\"string\">&#x27;car&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;car&#125;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n</li>\n</ul>\n<h2 id=\"6-响应式数据的判断\"><a href=\"#6-响应式数据的判断\" class=\"headerlink\" title=\"6.响应式数据的判断\"></a>6.响应式数据的判断</h2><ul>\n<li>isRef: 检查一个值是否为一个 ref 对象</li>\n<li>isReactive: 检查一个对象是否是由 <code>reactive</code> 创建的响应式代理</li>\n<li>isReadonly: 检查一个对象是否是由 <code>readonly</code> 创建的只读代理</li>\n<li>isProxy: 检查一个对象是否是由 <code>reactive</code> 或者 <code>readonly</code> 方法创建的代理</li>\n</ul>\n<h1 id=\"四、Composition-API-的优势\"><a href=\"#四、Composition-API-的优势\" class=\"headerlink\" title=\"四、Composition API 的优势\"></a>四、Composition API 的优势</h1><h2 id=\"1-Options-API-存在的问题\"><a href=\"#1-Options-API-存在的问题\" class=\"headerlink\" title=\"1.Options API 存在的问题\"></a>1.Options API 存在的问题</h2><p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。</p>\n<div style=\"width:600px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f84e4e2c02424d9a99862ade0a2e4114~tplv-k3u1fbpfcp-watermark.image\" style=\"width:600px;float:left\" />\n</div>\n<div style=\"width:300px;height:370px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5ac7e20d1784887a826f6360768a368~tplv-k3u1fbpfcp-watermark.image\" style=\"zoom:50%;width:560px;left\" /> \n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<h2 id=\"2-Composition-API-的优势\"><a href=\"#2-Composition-API-的优势\" class=\"headerlink\" title=\"2.Composition API 的优势\"></a>2.Composition API 的优势</h2><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。</p>\n<div style=\"width:500px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc0be8211fc54b6c941c036791ba4efe~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n<div style=\"width:430px;height:340px;overflow:hidden;float:left\">\n    <img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6cc55165c0e34069a75fe36f8712eb80~tplv-k3u1fbpfcp-watermark.image\"style=\"height:360px\"/>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<h1 id=\"五、新的组件\"><a href=\"#五、新的组件\" class=\"headerlink\" title=\"五、新的组件\"></a>五、新的组件</h1><h2 id=\"1-Fragment\"><a href=\"#1-Fragment\" class=\"headerlink\" title=\"1.Fragment\"></a>1.Fragment</h2><ul>\n<li>在Vue2中: 组件必须有一个根标签</li>\n<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>\n<li>好处: 减少标签层级, 减小内存占用</li>\n</ul>\n<h2 id=\"2-Teleport\"><a href=\"#2-Teleport\" class=\"headerlink\" title=\"2.Teleport\"></a>2.Teleport</h2><ul>\n<li><p>什么是Teleport？—— <code>Teleport</code> 是一种能够将我们的<strong style=\"color:#DD5145\">组件html结构</strong>移动到指定位置的技术。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;teleport to=&quot;移动位置&quot;&gt;</span><br><span class=\"line\">\t&lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class=\"line\">\t\t&lt;div class=&quot;dialog&quot;&gt;</span><br><span class=\"line\">\t\t\t&lt;h3&gt;我是一个弹窗&lt;/h3&gt;</span><br><span class=\"line\">\t\t\t&lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;</span><br><span class=\"line\">\t\t&lt;/div&gt;</span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"3-Suspense\"><a href=\"#3-Suspense\" class=\"headerlink\" title=\"3.Suspense\"></a>3.Suspense</h2><ul>\n<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>\n</li>\n<li><p>使用步骤：</p>\n<ul>\n<li><p>异步引入组件</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123;defineAsyncComponent&#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;vue&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"title class_\">Child</span> = <span class=\"title function_\">defineAsyncComponent</span>(<span class=\"function\">()=&gt;</span><span class=\"title function_\">import</span>(<span class=\"string\">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">\t&lt;div class=&quot;app&quot;&gt;</span><br><span class=\"line\">\t\t&lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class=\"line\">\t\t&lt;Suspense&gt;</span><br><span class=\"line\">\t\t\t&lt;template v-slot:default&gt;</span><br><span class=\"line\">\t\t\t\t&lt;Child/&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t\t&lt;template v-slot:fallback&gt;</span><br><span class=\"line\">\t\t\t\t&lt;h3&gt;加载中.....&lt;/h3&gt;</span><br><span class=\"line\">\t\t\t&lt;/template&gt;</span><br><span class=\"line\">\t\t&lt;/Suspense&gt;</span><br><span class=\"line\">\t&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<h1 id=\"六、其他\"><a href=\"#六、其他\" class=\"headerlink\" title=\"六、其他\"></a>六、其他</h1><h2 id=\"1-全局API的转移\"><a href=\"#1-全局API的转移\" class=\"headerlink\" title=\"1.全局API的转移\"></a>1.全局API的转移</h2><ul>\n<li><p>Vue 2.x 有许多全局 API 和配置。</p>\n<ul>\n<li><p>例如：注册全局组件、注册全局指令等。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//注册全局组件</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">component</span>(<span class=\"string\">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">data</span>: <span class=\"function\">() =&gt;</span> (&#123;</span><br><span class=\"line\">    <span class=\"attr\">count</span>: <span class=\"number\">0</span></span><br><span class=\"line\">  &#125;),</span><br><span class=\"line\">  <span class=\"attr\">template</span>: <span class=\"string\">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//注册全局指令</span></span><br><span class=\"line\"><span class=\"title class_\">Vue</span>.<span class=\"title function_\">directive</span>(<span class=\"string\">&#x27;focus&#x27;</span>, &#123;</span><br><span class=\"line\">  <span class=\"attr\">inserted</span>: <span class=\"function\"><span class=\"params\">el</span> =&gt;</span> el.<span class=\"title function_\">focus</span>()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p>Vue3.0中对这些API做出了调整：</p>\n<ul>\n<li><p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>\n<table>\n<thead>\n<tr>\n<th>2.x 全局 API（<code>Vue</code>）</th>\n<th>3.x 实例 API (<code>app</code>)</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Vue.config.xxxx</td>\n<td>app.config.xxxx</td>\n</tr>\n<tr>\n<td>Vue.config.productionTip</td>\n<td><strong style=\"color:#DD5145\">移除</strong></td>\n</tr>\n<tr>\n<td>Vue.component</td>\n<td>app.component</td>\n</tr>\n<tr>\n<td>Vue.directive</td>\n<td>app.directive</td>\n</tr>\n<tr>\n<td>Vue.mixin</td>\n<td>app.mixin</td>\n</tr>\n<tr>\n<td>Vue.use</td>\n<td>app.use</td>\n</tr>\n<tr>\n<td>Vue.prototype</td>\n<td>app.config.globalProperties</td>\n</tr>\n</tbody></table>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-其他改变\"><a href=\"#2-其他改变\" class=\"headerlink\" title=\"2.其他改变\"></a>2.其他改变</h2><ul>\n<li><p>data选项应始终被声明为一个函数。</p>\n</li>\n<li><p>过度类名的更改：</p>\n<ul>\n<li><p>Vue2.x写法</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.v-enter</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-leave-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.v-leave</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-enter-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>Vue3.x写法</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.v-enter-from</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-leave-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.v-leave-from</span>,</span><br><span class=\"line\"><span class=\"selector-class\">.v-enter-to</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><strong style=\"color:#DD5145\">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>\n</li>\n<li><p><strong style=\"color:#DD5145\">移除</strong><code>v-on.native</code>修饰符</p>\n<ul>\n<li><p>父组件中绑定事件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;my-component</span><br><span class=\"line\">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class=\"line\">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class=\"line\">/&gt;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>子组件中声明自定义事件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">  export default &#123;</span><br><span class=\"line\">    emits: [&#x27;close&#x27;]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li><p><strong style=\"color:#DD5145\">移除</strong>过滤器（filter）</p>\n<blockquote>\n<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>\n</blockquote>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cl1mygx61000060k5dns324gh","tag_id":"cl1mrf29p00028ok52vzwezbx","_id":"cl1mygx6h000260k5b3mkdx7m"},{"post_id":"cl1mygx6f000160k51j38b7a0","tag_id":"cl1myxqst0000bgk55m141vgj","_id":"cl1myxqsw0001bgk5dlvn0eao"}],"Tag":[{"name":"hexo vue个人学习笔记","_id":"cl1mrf29p00028ok52vzwezbx"},{"name":"hexo vue3","_id":"cl1myxqst0000bgk55m141vgj"}]}}